"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __name = (target, value) => __defProp(target, "name", { value, configurable: true });
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// src/index.ts
var src_exports = {};
__export(src_exports, {
  AppleMusicExtractor: () => AppleMusicExtractor,
  AttachmentExtractor: () => AttachmentExtractor,
  DefaultExtractors: () => DefaultExtractors,
  Internal: () => internal_exports,
  ReverbnationExtractor: () => ReverbnationExtractor,
  SoundCloudExtractor: () => SoundCloudExtractor,
  SpotifyExtractor: () => SpotifyExtractor,
  VimeoExtractor: () => VimeoExtractor,
  lyricsExtractor: () => lyricsExtractor,
  version: () => version
});
module.exports = __toCommonJS(src_exports);

// src/extractors/SoundCloudExtractor.ts
var import_discord_player = require("discord-player");
var SoundCloud = __toESM(require("soundcloud.ts"));

// src/internal/helper.ts
var import_isomorphic_unfetch = __toESM(require("isomorphic-unfetch"));
var UA = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.49";
var fetch = import_isomorphic_unfetch.default;
function filterSoundCloudPreviews(tracks) {
  const filtered = tracks.filter((t) => {
    if (typeof t.policy === "string") return t.policy.toUpperCase() === "ALLOW";
    return !(t.duration === 3e4 && t.full_duration > 3e4);
  });
  const result = filtered.length > 0 ? filtered : tracks;
  return result;
}
__name(filterSoundCloudPreviews, "filterSoundCloudPreviews");

// src/extractors/SoundCloudExtractor.ts
var _SoundCloudExtractor = class _SoundCloudExtractor extends import_discord_player.BaseExtractor {
  constructor() {
    super(...arguments);
    __publicField(this, "internal", new SoundCloud.default({
      clientId: this.options.clientId,
      oauthToken: this.options.oauthToken,
      proxy: this.options.proxy
    }));
  }
  async activate() {
    this.protocols = ["scsearch", "soundcloud"];
    _SoundCloudExtractor.instance = this;
  }
  async deactivate() {
    this.protocols = [];
    _SoundCloudExtractor.instance = null;
  }
  async validate(query, type) {
    if (typeof query !== "string") return false;
    return [
      import_discord_player.QueryType.SOUNDCLOUD,
      import_discord_player.QueryType.SOUNDCLOUD_PLAYLIST,
      import_discord_player.QueryType.SOUNDCLOUD_SEARCH,
      import_discord_player.QueryType.SOUNDCLOUD_TRACK,
      import_discord_player.QueryType.AUTO,
      import_discord_player.QueryType.AUTO_SEARCH
    ].some((r) => r === type);
  }
  async getRelatedTracks(track, history) {
    if (track.queryType === import_discord_player.QueryType.SOUNDCLOUD_TRACK) {
      const data = await this.internal.tracks.relatedV2(track.url, 5);
      const unique = filterSoundCloudPreviews(data).filter(
        (t) => !history.tracks.some((h) => h.url === t.permalink_url)
      );
      return this.createResponse(
        null,
        (unique.length > 0 ? unique : data).map((trackInfo) => {
          const newTrack = new import_discord_player.Track(this.context.player, {
            title: trackInfo.title,
            url: trackInfo.permalink_url,
            duration: import_discord_player.Util.buildTimeCode(import_discord_player.Util.parseMS(trackInfo.duration)),
            description: trackInfo.description ?? "",
            thumbnail: trackInfo.artwork_url,
            views: trackInfo.playback_count,
            author: trackInfo.user.username,
            requestedBy: track.requestedBy,
            source: "soundcloud",
            engine: trackInfo,
            queryType: import_discord_player.QueryType.SOUNDCLOUD_TRACK,
            metadata: trackInfo,
            requestMetadata: /* @__PURE__ */ __name(async () => {
              return trackInfo;
            }, "requestMetadata"),
            cleanTitle: trackInfo.title
          });
          newTrack.extractor = this;
          return newTrack;
        })
      );
    }
    return this.createResponse();
  }
  async handle(query, context) {
    if (context.protocol === "scsearch")
      context.type = import_discord_player.QueryType.SOUNDCLOUD_SEARCH;
    switch (context.type) {
      case import_discord_player.QueryType.SOUNDCLOUD_TRACK: {
        const trackInfo = await this.internal.tracks.getV2(query).catch(import_discord_player.Util.noop);
        if (!trackInfo) return this.emptyResponse();
        const track = new import_discord_player.Track(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.permalink_url,
          duration: import_discord_player.Util.buildTimeCode(import_discord_player.Util.parseMS(trackInfo.duration)),
          description: trackInfo.description ?? "",
          thumbnail: trackInfo.artwork_url,
          views: trackInfo.playback_count,
          author: trackInfo.user.username,
          requestedBy: context.requestedBy,
          source: "soundcloud",
          engine: trackInfo,
          queryType: context.type,
          metadata: trackInfo,
          requestMetadata: /* @__PURE__ */ __name(async () => {
            return trackInfo;
          }, "requestMetadata"),
          cleanTitle: trackInfo.title
        });
        track.extractor = this;
        return { playlist: null, tracks: [track] };
      }
      case import_discord_player.QueryType.SOUNDCLOUD_PLAYLIST: {
        const data = await this.internal.playlists.getV2(query).catch(import_discord_player.Util.noop);
        if (!data) return { playlist: null, tracks: [] };
        const res = new import_discord_player.Playlist(this.context.player, {
          title: data.title,
          description: data.description ?? "",
          thumbnail: data.artwork_url ?? data.tracks[0].artwork_url,
          type: "playlist",
          source: "soundcloud",
          author: {
            name: data.user.username,
            url: data.user.permalink_url
          },
          tracks: [],
          id: `${data.id}`,
          url: data.permalink_url,
          rawPlaylist: data
        });
        for (const song of data.tracks) {
          const track = new import_discord_player.Track(this.context.player, {
            title: song.title,
            description: song.description ?? "",
            author: song.user.username,
            url: song.permalink_url,
            thumbnail: song.artwork_url,
            duration: import_discord_player.Util.buildTimeCode(import_discord_player.Util.parseMS(song.duration)),
            views: song.playback_count,
            requestedBy: context.requestedBy,
            playlist: res,
            source: "soundcloud",
            engine: song,
            queryType: context.type,
            metadata: song,
            requestMetadata: /* @__PURE__ */ __name(async () => {
              return song;
            }, "requestMetadata"),
            cleanTitle: song.title
          });
          track.extractor = this;
          track.playlist = res;
          res.tracks.push(track);
        }
        return { playlist: res, tracks: res.tracks };
      }
      default: {
        let tracks = await this.internal.tracks.searchV2({ q: query }).then((t) => t.collection).catch(import_discord_player.Util.noop);
        if (!tracks)
          tracks = await this.internal.tracks.searchAlt(query).catch(import_discord_player.Util.noop);
        if (!tracks || !tracks.length) return this.emptyResponse();
        tracks = filterSoundCloudPreviews(tracks);
        const resolvedTracks = [];
        for (const trackInfo of tracks) {
          if (!trackInfo.streamable) continue;
          const track = new import_discord_player.Track(this.context.player, {
            title: trackInfo.title,
            url: trackInfo.permalink_url,
            duration: import_discord_player.Util.buildTimeCode(import_discord_player.Util.parseMS(trackInfo.duration)),
            description: trackInfo.description ?? "",
            thumbnail: trackInfo.artwork_url,
            views: trackInfo.playback_count,
            author: trackInfo.user.username,
            requestedBy: context.requestedBy,
            source: "soundcloud",
            engine: trackInfo,
            queryType: "soundcloudTrack",
            metadata: trackInfo,
            requestMetadata: /* @__PURE__ */ __name(async () => {
              return trackInfo;
            }, "requestMetadata")
          });
          track.extractor = this;
          resolvedTracks.push(track);
        }
        return { playlist: null, tracks: resolvedTracks };
      }
    }
  }
  emptyResponse() {
    return { playlist: null, tracks: [] };
  }
  async stream(info) {
    const url = await this.internal.util.streamLink(info.url).catch(import_discord_player.Util.noop);
    if (!url)
      throw new Error("Could not extract stream from this track source");
    return url;
  }
  async bridge(track, sourceExtractor) {
    if (sourceExtractor?.identifier === this.identifier) {
      return this.stream(track);
    }
    const query = sourceExtractor?.createBridgeQuery(track) ?? `${track.author} - ${track.title}`;
    const info = await this.handle(query, {
      requestedBy: track.requestedBy,
      type: import_discord_player.QueryType.SOUNDCLOUD_SEARCH
    });
    if (!info.tracks.length) return null;
    const result = await this.stream(info.tracks[0]);
    if (result) {
      track.bridgedTrack = info.tracks[0];
      track.bridgedExtractor = this;
    }
    return result;
  }
};
__name(_SoundCloudExtractor, "SoundCloudExtractor");
__publicField(_SoundCloudExtractor, "identifier", "com.discord-player.soundcloudextractor");
__publicField(_SoundCloudExtractor, "instance", null);
var SoundCloudExtractor = _SoundCloudExtractor;

// src/extractors/LyricsExtractor.ts
function lyricsExtractor() {
  throw new Error(
    "Legacy lyrics extractor has been removed. Please use the new lyrics api from `player.lyrics` instead. It offers more accurate result and features like plain lyrics and synced lyrics."
  );
}
__name(lyricsExtractor, "lyricsExtractor");

// src/extractors/VimeoExtractor.ts
var import_discord_player2 = require("discord-player");

// src/internal/Vimeo.ts
var import_http = __toESM(require("http"));
var import_https = __toESM(require("https"));
var _Vimeo = class _Vimeo {
  constructor() {
    throw new Error(
      `The ${this.constructor.name} class may not be instantiated!`
    );
  }
  /**
   * @typedef {Readable} Readable
   */
  /**
   * Downloads from vimeo
   * @param {number} id Vimeo video id
   * @returns {Promise<Readable>}
   */
  static download(id) {
    return new Promise(async (resolve) => {
      const info = await _Vimeo.getInfo(id);
      if (!info) return null;
      const downloader = info.stream.startsWith("https://") ? import_https.default : import_http.default;
      downloader.get(info.stream, (res) => {
        resolve(res);
      });
    });
  }
  /**
   * Returns video info
   * @param {number} id Video id
   */
  static async getInfo(id) {
    if (!id) throw new Error("Invalid id");
    const url = `https://player.vimeo.com/video/${id}`;
    try {
      const res = await fetch(url);
      const data = await res.text();
      const json = JSON.parse(
        data.split("window.playerConfig =")[1].split(";")[0].trim()
      );
      const obj = {
        id: json.video.id,
        duration: json.video.duration * 1e3,
        title: json.video.title,
        url: json.video.url,
        thumbnail: json.video.thumbs["1280"] || json.video.thumbs.base,
        stream: json.request.files.progressive[0].url,
        author: {
          id: json.video.owner.id,
          name: json.video.owner.name,
          url: json.video.owner.url,
          avatar: json.video.owner.img_2x || json.video.owner.img
        }
      };
      return obj;
    } catch {
      return null;
    }
  }
};
__name(_Vimeo, "Vimeo");
var Vimeo = _Vimeo;

// src/extractors/VimeoExtractor.ts
var _VimeoExtractor = class _VimeoExtractor extends import_discord_player2.BaseExtractor {
  async validate(query, type) {
    if (typeof query !== "string") return false;
    return [import_discord_player2.QueryType.VIMEO].some((r) => r === type);
  }
  async getRelatedTracks(track) {
    return this.createResponse();
  }
  async handle(query, context) {
    switch (context.type) {
      case import_discord_player2.QueryType.VIMEO: {
        const trackInfo = await Vimeo.getInfo(
          query.split("/").filter((x) => !!x).pop()
        ).catch(import_discord_player2.Util.noop);
        if (!trackInfo) return this.emptyResponse();
        const track = new import_discord_player2.Track(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.url,
          duration: import_discord_player2.Util.buildTimeCode(import_discord_player2.Util.parseMS(trackInfo.duration || 0)),
          description: `${trackInfo.title} by ${trackInfo.author.name}`,
          thumbnail: trackInfo.thumbnail,
          views: 0,
          author: trackInfo.author.name,
          requestedBy: context.requestedBy,
          source: "arbitrary",
          engine: trackInfo.stream,
          queryType: context.type,
          metadata: trackInfo,
          async requestMetadata() {
            return trackInfo;
          }
        });
        track.extractor = this;
        return { playlist: null, tracks: [track] };
      }
      default:
        return this.emptyResponse();
    }
  }
  emptyResponse() {
    return { playlist: null, tracks: [] };
  }
  async stream(info) {
    const engine = info.raw.engine;
    if (engine) {
      return engine;
    }
    const track = await Vimeo.getInfo(info.url).catch(import_discord_player2.Util.noop);
    if (!track || !track.stream)
      throw new Error("Could not extract stream from this source");
    info.raw.engine = {
      streamURL: track.stream
    };
    return track.stream;
  }
};
__name(_VimeoExtractor, "VimeoExtractor");
__publicField(_VimeoExtractor, "identifier", "com.discord-player.vimeoextractor");
var VimeoExtractor = _VimeoExtractor;

// src/extractors/ReverbnationExtractor.ts
var import_discord_player3 = require("discord-player");
var import_reverbnation_scraper = __toESM(require("reverbnation-scraper"));
var _ReverbnationExtractor = class _ReverbnationExtractor extends import_discord_player3.BaseExtractor {
  async validate(query, type) {
    if (typeof query !== "string") return false;
    return [import_discord_player3.QueryType.REVERBNATION].some(
      (r) => r === type
    );
  }
  async getRelatedTracks(track) {
    return this.createResponse();
  }
  async handle(query, context) {
    switch (context.type) {
      case import_discord_player3.QueryType.REVERBNATION: {
        const trackInfo = await import_reverbnation_scraper.default.getInfo(query).catch(import_discord_player3.Util.noop);
        if (!trackInfo) return this.emptyResponse();
        const track = new import_discord_player3.Track(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.url,
          duration: import_discord_player3.Util.buildTimeCode(import_discord_player3.Util.parseMS(trackInfo.duration)),
          description: trackInfo.lyrics || `${trackInfo.title} by ${trackInfo.artist.name}`,
          thumbnail: trackInfo.thumbnail,
          views: 0,
          author: trackInfo.artist.name,
          requestedBy: context.requestedBy,
          source: "arbitrary",
          engine: trackInfo.streamURL,
          queryType: context.type,
          metadata: trackInfo,
          async requestMetadata() {
            return trackInfo;
          }
        });
        track.extractor = this;
        return { playlist: null, tracks: [track] };
      }
      default:
        return this.emptyResponse();
    }
  }
  emptyResponse() {
    return { playlist: null, tracks: [] };
  }
  async stream(info) {
    const engine = info.raw.engine;
    if (engine) {
      return engine;
    }
    const track = await import_reverbnation_scraper.default.getInfo(info.url).catch(import_discord_player3.Util.noop);
    if (!track || !track.streamURL)
      throw new Error("Could not extract stream from this source");
    info.raw.engine = {
      streamURL: track.streamURL
    };
    return track.streamURL;
  }
};
__name(_ReverbnationExtractor, "ReverbnationExtractor");
__publicField(_ReverbnationExtractor, "identifier", "com.discord-player.reverbnationextractor");
var ReverbnationExtractor = _ReverbnationExtractor;

// src/extractors/AttachmentExtractor.ts
var import_discord_player4 = require("discord-player");
var import_fs = require("fs");

// src/internal/downloader.ts
var import_http2 = __toESM(require("http"));
var import_https2 = __toESM(require("https"));
function downloadStream(url, opts = {}) {
  return new Promise((resolve, reject) => {
    const lib = url.startsWith("http://") ? import_http2.default : import_https2.default;
    lib.get(url, opts, (res) => resolve(res)).once("error", reject);
  });
}
__name(downloadStream, "downloadStream");

// src/extractors/AttachmentExtractor.ts
var fileType = __toESM(require("file-type"));
var import_path = __toESM(require("path"));
var import_promises = require("fs/promises");
var ATTACHMENT_HEADER = ["audio/", "video/", "application/ogg"];
var _AttachmentExtractor = class _AttachmentExtractor extends import_discord_player4.BaseExtractor {
  constructor() {
    super(...arguments);
    // use lowest priority to avoid conflict with other extractors
    __publicField(this, "priority", 0);
  }
  async validate(query, type) {
    if (typeof query !== "string") return false;
    return [import_discord_player4.QueryType.ARBITRARY, import_discord_player4.QueryType.FILE].some(
      (r) => r === type
    );
  }
  async getRelatedTracks(track) {
    return this.createResponse();
  }
  async handle(query, context) {
    switch (context.type) {
      case import_discord_player4.QueryType.ARBITRARY: {
        const data = await downloadStream(
          query,
          context.requestOptions
        );
        if (!ATTACHMENT_HEADER.some(
          (r) => !!data.headers["content-type"]?.startsWith(r)
        ))
          return this.emptyResponse();
        const trackInfo = {
          title: (query.split("/").filter((x) => x.length).pop() ?? "Attachment").split("?")[0].trim(),
          duration: 0,
          thumbnail: "https://upload.wikimedia.org/wikipedia/commons/2/2a/ITunes_12.2_logo.png",
          engine: query,
          // eslint-disable-next-line
          author: data.client?.servername || "Attachment",
          // eslint-disable-next-line
          description: data.client?.servername || "Attachment",
          url: data.url || query
        };
        try {
          const mediaplex = require("mediaplex");
          const timeout = this.context.player.options.probeTimeout ?? 5e3;
          const { result, stream } = await Promise.race(
            [
              mediaplex.probeStream(data),
              new Promise((_, r) => {
                setTimeout(() => r(new Error("Timeout")), timeout);
              })
            ]
          );
          if (result) {
            trackInfo.duration = result.duration * 1e3;
            const metadata = mediaplex.readMetadata(result);
            if (metadata.author) trackInfo.author = metadata.author;
            if (metadata.title) trackInfo.title = metadata.title;
            trackInfo.description = `${trackInfo.title} by ${trackInfo.author}`;
          }
          stream.destroy();
        } catch {
        }
        const track = new import_discord_player4.Track(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.url,
          duration: import_discord_player4.Util.buildTimeCode(import_discord_player4.Util.parseMS(trackInfo.duration)),
          description: trackInfo.description,
          thumbnail: trackInfo.thumbnail,
          views: 0,
          author: trackInfo.author,
          requestedBy: context.requestedBy,
          source: "arbitrary",
          engine: trackInfo.url,
          queryType: context.type,
          metadata: trackInfo,
          async requestMetadata() {
            return trackInfo;
          }
        });
        track.extractor = this;
        track.raw.isFile = false;
        return { playlist: null, tracks: [track] };
      }
      case import_discord_player4.QueryType.FILE: {
        if (!(0, import_fs.existsSync)(query)) return this.emptyResponse();
        const fstat = await (0, import_promises.stat)(query);
        if (!fstat.isFile()) return this.emptyResponse();
        const mime = await fileType.fromFile(query).catch(() => null);
        if (!mime || !ATTACHMENT_HEADER.some((r) => !!mime.mime.startsWith(r)))
          return this.emptyResponse();
        const trackInfo = {
          title: import_path.default.basename(query) || "Attachment",
          duration: 0,
          thumbnail: "https://upload.wikimedia.org/wikipedia/commons/2/2a/ITunes_12.2_logo.png",
          engine: query,
          author: "Attachment",
          description: "Attachment",
          url: query
        };
        try {
          const mediaplex = require("mediaplex");
          const timeout = this.context.player.options.probeTimeout ?? 5e3;
          const { result, stream } = await Promise.race(
            [
              mediaplex.probeStream(
                (0, import_fs.createReadStream)(query, {
                  start: 0,
                  end: 1024 * 1024 * 10
                })
              ),
              new Promise((_, r) => {
                setTimeout(() => r(new Error("Timeout")), timeout);
              })
            ]
          );
          if (result) {
            trackInfo.duration = result.duration * 1e3;
            const metadata = mediaplex.readMetadata(result);
            if (metadata.author) trackInfo.author = metadata.author;
            if (metadata.title) trackInfo.title = metadata.title;
            trackInfo.description = `${trackInfo.title} by ${trackInfo.author}`;
          }
          stream.destroy();
        } catch {
        }
        const track = new import_discord_player4.Track(this.context.player, {
          title: trackInfo.title,
          url: trackInfo.url,
          duration: import_discord_player4.Util.buildTimeCode(import_discord_player4.Util.parseMS(trackInfo.duration)),
          description: trackInfo.description,
          thumbnail: trackInfo.thumbnail,
          views: 0,
          author: trackInfo.author,
          requestedBy: context.requestedBy,
          source: "arbitrary",
          engine: trackInfo.url,
          queryType: context.type,
          metadata: trackInfo,
          async requestMetadata() {
            return trackInfo;
          }
        });
        track.extractor = this;
        track.raw.isFile = true;
        return { playlist: null, tracks: [track] };
      }
      default:
        return this.emptyResponse();
    }
  }
  emptyResponse() {
    return { playlist: null, tracks: [] };
  }
  async stream(info) {
    const engine = info.raw.engine;
    const isFile = info.raw.isFile;
    if (!engine) throw new Error("Could not find stream source");
    if (!isFile) {
      return engine;
    }
    return (0, import_fs.createReadStream)(engine);
  }
};
__name(_AttachmentExtractor, "AttachmentExtractor");
__publicField(_AttachmentExtractor, "identifier", "com.discord-player.attachmentextractor");
var AttachmentExtractor = _AttachmentExtractor;

// src/extractors/AppleMusicExtractor.ts
var import_discord_player6 = require("discord-player");

// src/internal/index.ts
var internal_exports = {};
__export(internal_exports, {
  AppleMusic: () => AppleMusic,
  SpotifyAPI: () => SpotifyAPI,
  Vimeo: () => Vimeo,
  downloadStream: () => downloadStream
});

// src/internal/AppleMusic.ts
var import_discord_player5 = require("discord-player");
var import_node_html_parser = require("node-html-parser");
function getHTML(link) {
  return fetch(link, {
    headers: {
      "User-Agent": UA
    }
  }).then((r) => r.text()).then(
    (txt) => (0, import_node_html_parser.parse)(txt),
    () => null
  );
}
__name(getHTML, "getHTML");
function makeImage({
  height,
  url,
  width,
  ext = "jpg"
}) {
  return url.replace("{w}", `${width}`).replace("{h}", `${height}`).replace("{f}", ext);
}
__name(makeImage, "makeImage");
function parseDuration(d) {
  const r = /* @__PURE__ */ __name((name, unit) => `((?<${name}>-?\\d*[\\.,]?\\d+)${unit})?`, "r");
  const regex = new RegExp(
    [
      "(?<negative>-)?P",
      r("years", "Y"),
      r("months", "M"),
      r("weeks", "W"),
      r("days", "D"),
      "(T",
      r("hours", "H"),
      r("minutes", "M"),
      r("seconds", "S"),
      ")?"
      // end optional time
    ].join("")
  );
  const test = regex.exec(d);
  if (!test || !test.groups) return "0:00";
  const dur = [
    test.groups.years,
    test.groups.months,
    test.groups.weeks,
    test.groups.days,
    test.groups.hours,
    test.groups.minutes,
    test.groups.seconds
  ];
  return dur.filter((r2, i, a) => !!r2 || i > a.length - 2).map((m, i) => {
    if (!m) m = "0";
    return i < 1 ? m : m.padStart(2, "0");
  }).join(":") || "0:00";
}
__name(parseDuration, "parseDuration");
var _AppleMusic = class _AppleMusic {
  constructor() {
    return _AppleMusic;
  }
  static async search(query) {
    try {
      const url = `https://music.apple.com/us/search?term=${encodeURIComponent(
        query
      )}`;
      const node = await getHTML(url);
      if (!node) return [];
      const rawData = node.getElementById("serialized-server-data");
      if (!rawData) return [];
      const data = JSON.parse(rawData.innerText)[0].data.sections;
      const tracks = data.find((s) => s.itemKind === "trackLockup")?.items;
      if (!tracks) return [];
      return tracks.map((track) => ({
        id: track.contentDescriptor.identifiers.storeAdamID,
        duration: track.duration || "0:00",
        title: track.title,
        url: track.contentDescriptor.url,
        thumbnail: track?.artwork?.dictionary ? makeImage({
          url: track.artwork.dictionary.url,
          height: track.artwork.dictionary.height,
          width: track.artwork.dictionary.width
        }) : "https://music.apple.com/assets/favicon/favicon-180.png",
        artist: {
          name: track.subtitleLinks?.[0]?.title ?? "Unknown Artist"
        }
      }));
    } catch {
      return [];
    }
  }
  static async getSongInfoFallback(res, name, id, link) {
    try {
      const metaTags = res.getElementsByTagName("meta");
      if (!metaTags.length) return null;
      const title = metaTags.find((r) => r.getAttribute("name") === "apple:title")?.getAttribute("content") || res.querySelector("title")?.innerText || name;
      const contentId = metaTags.find((r) => r.getAttribute("name") === "apple:content_id")?.getAttribute("content") || id;
      const durationRaw = metaTags.find((r) => r.getAttribute("property") === "music:song:duration")?.getAttribute("content");
      const song = {
        id: contentId,
        duration: durationRaw ? parseDuration(durationRaw) : metaTags.find((m) => m.getAttribute("name") === "apple:description")?.textContent.split("Duration: ")?.[1].split('"')?.[0] || "0:00",
        title,
        url: link,
        thumbnail: metaTags.find(
          (r) => ["og:image:secure_url", "og:image"].includes(
            r.getAttribute("property")
          )
        )?.getAttribute("content") || "https://music.apple.com/assets/favicon/favicon-180.png",
        artist: {
          name: res.querySelector(".song-subtitles__artists>a")?.textContent?.trim() || "Apple Music"
        }
      };
      return song;
    } catch {
      return null;
    }
  }
  static async getSongInfo(link) {
    if (!import_discord_player5.QueryResolver.regex.appleMusicSongRegex.test(link)) {
      return null;
    }
    const url = new URL(link);
    const id = url.searchParams.get("i");
    const name = url.pathname.split("album/")[1]?.split("/")[0];
    if (!id || !name) return null;
    const res = await getHTML(`https://music.apple.com/us/song/${name}/${id}`);
    if (!res) return null;
    try {
      const datasrc = res.getElementById("serialized-server-data")?.innerText || res.innerText.split(
        '<script type="application/json" id="serialized-server-data">'
      )?.[1]?.split("</script>")?.[0];
      if (!datasrc) throw "not found";
      const data = JSON.parse(datasrc)[0].data.seoData;
      const song = data.ogSongs[0]?.attributes;
      return {
        id: data.ogSongs[0]?.id || data.appleContentId || id,
        duration: song?.durationInMillis || "0:00",
        title: song?.name || data.appleTitle,
        url: song?.url || data.url || link,
        thumbnail: song?.artwork ? makeImage({
          url: song.artwork.url,
          height: song.artwork.height,
          width: song.artwork.width
        }) : data.artworkUrl ? makeImage({
          height: data.height,
          width: data.width,
          url: data.artworkUrl,
          ext: data.fileType || "jpg"
        }) : "https://music.apple.com/assets/favicon/favicon-180.png",
        artist: {
          name: song?.artistName || data.socialTitle || "Apple Music"
        }
      };
    } catch {
      return this.getSongInfoFallback(res, name, id, link);
    }
  }
  static async getPlaylistInfo(link) {
    if (!import_discord_player5.QueryResolver.regex.appleMusicPlaylistRegex.test(link)) {
      return null;
    }
    const res = await getHTML(link);
    if (!res) return null;
    try {
      const datasrc = res.getElementById("serialized-server-data")?.innerText || res.innerText.split(
        '<script type="application/json" id="serialized-server-data">'
      )?.[1]?.split("</script>")?.[0];
      if (!datasrc) throw "not found";
      const pl = JSON.parse(datasrc)[0].data.seoData;
      const thumbnail = pl.artworkUrl ? makeImage({
        height: pl.height,
        width: pl.width,
        url: pl.artworkUrl,
        ext: pl.fileType || "jpg"
      }) : "https://music.apple.com/assets/favicon/favicon-180.png";
      return {
        id: pl.appleContentId,
        title: pl.appleTitle,
        thumbnail,
        artist: {
          name: pl.ogSongs?.[0]?.attributes?.artistName || "Apple Music"
        },
        url: pl.url,
        tracks: (
          // eslint-disable-next-line
          pl.ogSongs?.map((m) => {
            const song = m.attributes;
            return {
              id: m.id,
              duration: song.durationInMillis || "0:00",
              title: song.name,
              url: song.url,
              thumbnail: song.artwork ? makeImage({
                url: song.artwork.url,
                height: song.artwork.height,
                width: song.artwork.width
              }) : thumbnail,
              artist: {
                name: song.artistName || "Apple Music"
              }
            };
          }) || []
        )
      };
    } catch {
      return null;
    }
  }
  static async getAlbumInfo(link) {
    if (!import_discord_player5.QueryResolver.regex.appleMusicAlbumRegex.test(link)) {
      return null;
    }
    const res = await getHTML(link);
    if (!res) return null;
    try {
      const datasrc = res.getElementById("serialized-server-data")?.innerText || res.innerText.split(
        '<script type="application/json" id="serialized-server-data">'
      )?.[1]?.split("</script>")?.[0];
      if (!datasrc) throw "not found";
      const pl = JSON.parse(datasrc)[0].data.seoData;
      const thumbnail = pl.artworkUrl ? makeImage({
        height: pl.height,
        width: pl.width,
        url: pl.artworkUrl,
        ext: pl.fileType || "jpg"
      }) : "https://music.apple.com/assets/favicon/favicon-180.png";
      return {
        id: pl.appleContentId,
        title: pl.appleTitle,
        thumbnail,
        artist: {
          name: pl.ogSongs?.[0]?.attributes?.artistName || "Apple Music"
        },
        url: pl.url,
        tracks: (
          // eslint-disable-next-line
          pl.ogSongs?.map((m) => {
            const song = m.attributes;
            return {
              id: m.id,
              duration: song.durationInMillis || "0:00",
              title: song.name,
              url: song.url,
              thumbnail: song.artwork ? makeImage({
                url: song.artwork.url,
                height: song.artwork.height,
                width: song.artwork.width
              }) : thumbnail,
              artist: {
                name: song.artistName || "Apple Music"
              }
            };
          }) || []
        )
      };
    } catch {
      return null;
    }
  }
};
__name(_AppleMusic, "AppleMusic");
var AppleMusic = _AppleMusic;

// src/internal/Spotify.ts
var SP_ANON_TOKEN_URL = "https://open.spotify.com/get_access_token?reason=transport&productType=embed";
var SP_ACCESS_TOKEN_URL = "https://accounts.spotify.com/api/token?grant_type=client_credentials";
var SP_BASE = "https://api.spotify.com/v1";
var _SpotifyAPI = class _SpotifyAPI {
  constructor(credentials = {
    clientId: null,
    clientSecret: null
  }) {
    this.credentials = credentials;
    __publicField(this, "accessToken", null);
  }
  get authorizationKey() {
    if (!this.credentials.clientId || !this.credentials.clientSecret)
      return null;
    return Buffer.from(
      `${this.credentials.clientId}:${this.credentials.clientSecret}`
    ).toString("base64");
  }
  async requestToken() {
    const key = this.authorizationKey;
    if (!key) return await this.requestAnonymousToken();
    try {
      const res = await fetch(SP_ACCESS_TOKEN_URL, {
        method: "POST",
        headers: {
          "User-Agent": UA,
          Authorization: `Basic ${key}`,
          "Content-Type": "application/json"
        }
      });
      const body = await res.json();
      if (!body.access_token) throw "no token";
      const data = {
        token: body.access_token,
        expiresAfter: body.expires_in,
        type: "Bearer"
      };
      return this.accessToken = data;
    } catch {
      return await this.requestAnonymousToken();
    }
  }
  async requestAnonymousToken() {
    try {
      const res = await fetch(SP_ANON_TOKEN_URL, {
        headers: {
          "User-Agent": UA,
          "Content-Type": "application/json"
        }
      });
      if (!res.ok) throw "not_ok";
      const body = await res.json();
      if (!body.accessToken) throw "no_access_token";
      const data = {
        token: body.accessToken,
        expiresAfter: body.accessTokenExpirationTimestampMs,
        type: "Bearer"
      };
      return this.accessToken = data;
    } catch {
      return null;
    }
  }
  isTokenExpired() {
    if (!this.accessToken) return true;
    return Date.now() > this.accessToken.expiresAfter;
  }
  async search(query) {
    try {
      if (this.isTokenExpired()) await this.requestToken();
      if (!this.accessToken) return null;
      const res = await fetch(
        `${SP_BASE}/search/?q=${encodeURIComponent(
          query
        )}&type=track&market=US`,
        {
          headers: {
            "User-Agent": UA,
            Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
            "Content-Type": "application/json"
          }
        }
      );
      if (!res.ok) return null;
      const data = await res.json();
      return data.tracks.items.map((m) => ({
        title: m.name,
        duration: m.duration_ms,
        artist: m.artists.map((m2) => m2.name).join(", "),
        url: m.external_urls?.spotify || `https://open.spotify.com/track/${m.id}`,
        thumbnail: m.album.images?.[0]?.url || null
      }));
    } catch {
      return null;
    }
  }
  async getPlaylist(id) {
    try {
      if (this.isTokenExpired()) await this.requestToken();
      if (!this.accessToken) return null;
      const res = await fetch(`${SP_BASE}/playlists/${id}?market=US`, {
        headers: {
          "User-Agent": UA,
          Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
          "Content-Type": "application/json"
        }
      });
      if (!res.ok) return null;
      const data = await res.json();
      if (!data.tracks.items.length) return null;
      const t = data.tracks.items;
      let next = data.tracks.next;
      while (typeof next === "string") {
        try {
          const res2 = await fetch(next, {
            headers: {
              "User-Agent": UA,
              Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
              "Content-Type": "application/json"
            }
          });
          if (!res2.ok) break;
          const nextPage = await res2.json();
          t.push(...nextPage.items);
          next = nextPage.next;
          if (!next) break;
        } catch {
          break;
        }
      }
      const tracks = t.map(({ track: m }) => ({
        title: m.name,
        duration: m.duration_ms,
        artist: m.artists.map((m2) => m2.name).join(", "),
        url: m.external_urls?.spotify || `https://open.spotify.com/track/${m.id}`,
        thumbnail: m.album.images?.[0]?.url || null
      }));
      if (!tracks.length) return null;
      return {
        name: data.name,
        author: data.owner.display_name,
        thumbnail: data.images?.[0]?.url || null,
        id: data.id,
        url: data.external_urls.spotify || `https://open.spotify.com/playlist/${id}`,
        tracks
      };
    } catch {
      return null;
    }
  }
  async getAlbum(id) {
    try {
      if (this.isTokenExpired()) await this.requestToken();
      if (!this.accessToken) return null;
      const res = await fetch(`${SP_BASE}/albums/${id}?market=US`, {
        headers: {
          "User-Agent": UA,
          Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
          "Content-Type": "application/json"
        }
      });
      if (!res.ok) return null;
      const data = await res.json();
      if (!data.tracks.items.length) return null;
      const t = data.tracks.items;
      let next = data.tracks.next;
      while (typeof next === "string") {
        try {
          const res2 = await fetch(next, {
            headers: {
              "User-Agent": UA,
              Authorization: `${this.accessToken.type} ${this.accessToken.token}`,
              "Content-Type": "application/json"
            }
          });
          if (!res2.ok) break;
          const nextPage = await res2.json();
          t.push(...nextPage.items);
          next = nextPage.next;
          if (!next) break;
        } catch {
          break;
        }
      }
      const tracks = t.map((m) => ({
        title: m.name,
        duration: m.duration_ms,
        artist: m.artists.map((m2) => m2.name).join(", "),
        url: m.external_urls?.spotify || `https://open.spotify.com/track/${m.id}`,
        thumbnail: data.images?.[0]?.url || null
      }));
      if (!tracks.length) return null;
      return {
        name: data.name,
        author: data.artists.map((m) => m.name).join(", "),
        thumbnail: data.images?.[0]?.url || null,
        id: data.id,
        url: data.external_urls.spotify || `https://open.spotify.com/album/${id}`,
        tracks
      };
    } catch {
      return null;
    }
  }
};
__name(_SpotifyAPI, "SpotifyAPI");
var SpotifyAPI = _SpotifyAPI;

// src/extractors/AppleMusicExtractor.ts
var _AppleMusicExtractor = class _AppleMusicExtractor extends import_discord_player6.BaseExtractor {
  constructor() {
    super(...arguments);
    __publicField(this, "_stream");
  }
  async activate() {
    this.protocols = ["amsearch", "applemusic"];
    const fn = this.options.createStream;
    if (typeof fn === "function") {
      this._stream = (q, t) => {
        return fn(this, q, t);
      };
    }
  }
  async deactivate() {
    this.protocols = [];
  }
  async validate(query, type) {
    return [
      import_discord_player6.QueryType.APPLE_MUSIC_ALBUM,
      import_discord_player6.QueryType.APPLE_MUSIC_PLAYLIST,
      import_discord_player6.QueryType.APPLE_MUSIC_SONG,
      import_discord_player6.QueryType.APPLE_MUSIC_SEARCH,
      import_discord_player6.QueryType.AUTO,
      import_discord_player6.QueryType.AUTO_SEARCH
    ].some((t) => t === type);
  }
  async getRelatedTracks(track, history) {
    if (track.queryType === import_discord_player6.QueryType.APPLE_MUSIC_SONG) {
      const data = await this.handle(track.author || track.title, {
        type: import_discord_player6.QueryType.APPLE_MUSIC_SEARCH,
        requestedBy: track.requestedBy
      });
      const unique = data.tracks.filter(
        (t) => !history.tracks.some((h) => h.url === t.url)
      );
      return unique.length > 0 ? this.createResponse(null, unique) : this.createResponse();
    }
    return this.createResponse();
  }
  async handle(query, context) {
    if (context.protocol === "amsearch")
      context.type = import_discord_player6.QueryType.APPLE_MUSIC_SEARCH;
    switch (context.type) {
      case import_discord_player6.QueryType.AUTO:
      case import_discord_player6.QueryType.AUTO_SEARCH:
      case import_discord_player6.QueryType.APPLE_MUSIC_SEARCH: {
        const data = await AppleMusic.search(query);
        if (!data || !data.length) return this.createResponse();
        const tracks = data.map(
          // eslint-disable-next-line @typescript-eslint/no-explicit-any
          (m) => {
            const track = new import_discord_player6.Track(this.context.player, {
              author: m.artist.name,
              description: m.title,
              duration: typeof m.duration === "number" ? import_discord_player6.Util.buildTimeCode(import_discord_player6.Util.parseMS(m.duration)) : m.duration,
              thumbnail: m.thumbnail,
              title: m.title,
              url: m.url,
              views: 0,
              source: "apple_music",
              requestedBy: context.requestedBy,
              queryType: "appleMusicSong",
              metadata: {
                source: m,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: m,
                  bridge: null
                };
              }, "requestMetadata")
            });
            track.extractor = this;
            return track;
          }
        );
        return this.createResponse(null, tracks);
      }
      case import_discord_player6.QueryType.APPLE_MUSIC_ALBUM: {
        const info = await AppleMusic.getAlbumInfo(query);
        if (!info) return this.createResponse();
        const playlist = new import_discord_player6.Playlist(this.context.player, {
          author: {
            name: info.artist.name,
            url: ""
          },
          description: info.title,
          id: info.id,
          source: "apple_music",
          thumbnail: info.thumbnail,
          title: info.title,
          tracks: [],
          type: "album",
          url: info.url,
          rawPlaylist: info
        });
        playlist.tracks = info.tracks.map(
          (m) => {
            const track = new import_discord_player6.Track(this.context.player, {
              author: m.artist.name,
              description: m.title,
              duration: typeof m.duration === "number" ? import_discord_player6.Util.buildTimeCode(import_discord_player6.Util.parseMS(m.duration)) : m.duration,
              thumbnail: m.thumbnail,
              title: m.title,
              url: m.url,
              views: 0,
              source: "apple_music",
              requestedBy: context.requestedBy,
              queryType: "appleMusicSong",
              metadata: {
                source: info,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: info,
                  bridge: null
                };
              }, "requestMetadata")
            });
            track.playlist = playlist;
            track.extractor = this;
            return track;
          }
        );
        return { playlist, tracks: playlist.tracks };
      }
      case import_discord_player6.QueryType.APPLE_MUSIC_PLAYLIST: {
        const info = await AppleMusic.getPlaylistInfo(query);
        if (!info) return this.createResponse();
        const playlist = new import_discord_player6.Playlist(this.context.player, {
          author: {
            name: info.artist.name,
            url: ""
          },
          description: info.title,
          id: info.id,
          source: "apple_music",
          thumbnail: info.thumbnail,
          title: info.title,
          tracks: [],
          type: "playlist",
          url: info.url,
          rawPlaylist: info
        });
        playlist.tracks = info.tracks.map(
          (m) => {
            const track = new import_discord_player6.Track(this.context.player, {
              author: m.artist.name,
              description: m.title,
              duration: typeof m.duration === "number" ? import_discord_player6.Util.buildTimeCode(import_discord_player6.Util.parseMS(m.duration)) : m.duration,
              thumbnail: m.thumbnail,
              title: m.title,
              url: m.url,
              views: 0,
              source: "apple_music",
              requestedBy: context.requestedBy,
              queryType: "appleMusicSong",
              metadata: {
                source: m,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: m,
                  bridge: null
                };
              }, "requestMetadata")
            });
            track.playlist = playlist;
            track.extractor = this;
            return track;
          }
        );
        return { playlist, tracks: playlist.tracks };
      }
      case import_discord_player6.QueryType.APPLE_MUSIC_SONG: {
        const info = await AppleMusic.getSongInfo(query);
        if (!info) return this.createResponse();
        const track = new import_discord_player6.Track(this.context.player, {
          author: info.artist.name,
          description: info.title,
          duration: typeof info.duration === "number" ? import_discord_player6.Util.buildTimeCode(import_discord_player6.Util.parseMS(info.duration)) : info.duration,
          thumbnail: info.thumbnail,
          title: info.title,
          url: info.url,
          views: 0,
          source: "apple_music",
          requestedBy: context.requestedBy,
          queryType: context.type,
          metadata: {
            source: info,
            bridge: null
          },
          requestMetadata: /* @__PURE__ */ __name(async () => {
            return {
              source: info,
              bridge: null
            };
          }, "requestMetadata")
        });
        track.extractor = this;
        return { playlist: null, tracks: [track] };
      }
      default:
        return { playlist: null, tracks: [] };
    }
  }
  async stream(info) {
    if (this._stream) {
      const stream = await this._stream(info.url, info);
      if (typeof stream === "string") return stream;
      return stream;
    }
    const result = await this.context.requestBridge(info, this);
    if (!result?.result) throw new Error("Could not bridge this track");
    return result.result;
  }
};
__name(_AppleMusicExtractor, "AppleMusicExtractor");
__publicField(_AppleMusicExtractor, "identifier", "com.discord-player.applemusicextractor");
var AppleMusicExtractor = _AppleMusicExtractor;

// src/extractors/SpotifyExtractor.ts
var import_discord_player7 = require("discord-player");
var import_spotify_url_info = __toESM(require("spotify-url-info"));
var re = /^(?:https:\/\/open\.spotify\.com\/(intl-([a-z]|[A-Z]){0,3}\/)?(?:user\/[A-Za-z0-9]+\/)?|spotify:)(album|playlist|track)(?:[/:])([A-Za-z0-9]+).*$/;
var _SpotifyExtractor = class _SpotifyExtractor extends import_discord_player7.BaseExtractor {
  constructor() {
    super(...arguments);
    __publicField(this, "_stream");
    __publicField(this, "_lib");
    __publicField(this, "_credentials", {
      clientId: this.options.clientId || process.env.DP_SPOTIFY_CLIENT_ID || null,
      clientSecret: this.options.clientSecret || process.env.DP_SPOTIFY_CLIENT_SECRET || null
    });
    __publicField(this, "internal", new SpotifyAPI(this._credentials));
  }
  async activate() {
    this.protocols = ["spsearch", "spotify"];
    this._lib = (0, import_spotify_url_info.default)(fetch);
    if (this.internal.isTokenExpired()) await this.internal.requestToken();
    const fn = this.options.createStream;
    if (typeof fn === "function") {
      this._stream = (q) => {
        return fn(this, q);
      };
    }
  }
  async deactivate() {
    this._stream = void 0;
    this._lib = void 0;
    this.protocols = [];
  }
  async validate(query, type) {
    return [
      import_discord_player7.QueryType.SPOTIFY_ALBUM,
      import_discord_player7.QueryType.SPOTIFY_PLAYLIST,
      import_discord_player7.QueryType.SPOTIFY_SONG,
      import_discord_player7.QueryType.SPOTIFY_SEARCH,
      import_discord_player7.QueryType.AUTO,
      import_discord_player7.QueryType.AUTO_SEARCH
    ].some((t) => t === type);
  }
  async getRelatedTracks(track) {
    return await this.handle(track.author || track.title, {
      type: import_discord_player7.QueryType.SPOTIFY_SEARCH,
      requestedBy: track.requestedBy
    });
  }
  async handle(query, context) {
    if (context.protocol === "spsearch")
      context.type = import_discord_player7.QueryType.SPOTIFY_SEARCH;
    switch (context.type) {
      case import_discord_player7.QueryType.AUTO:
      case import_discord_player7.QueryType.AUTO_SEARCH:
      case import_discord_player7.QueryType.SPOTIFY_SEARCH: {
        const data = await this.internal.search(query);
        if (!data) return this.createResponse();
        return this.createResponse(
          null,
          data.map((spotifyData) => {
            const track = new import_discord_player7.Track(this.context.player, {
              title: spotifyData.title,
              description: `${spotifyData.title} by ${spotifyData.artist}`,
              author: spotifyData.artist ?? "Unknown Artist",
              url: spotifyData.url,
              thumbnail: spotifyData.thumbnail || "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: import_discord_player7.Util.buildTimeCode(
                import_discord_player7.Util.parseMS(spotifyData.duration ?? 0)
              ),
              views: 0,
              requestedBy: context.requestedBy,
              source: "spotify",
              queryType: import_discord_player7.QueryType.SPOTIFY_SONG,
              metadata: {
                source: spotifyData,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: spotifyData,
                  bridge: null
                };
              }, "requestMetadata")
            });
            track.extractor = this;
            return track;
          })
        );
      }
      case import_discord_player7.QueryType.SPOTIFY_SONG: {
        const spotifyData = await this._lib.getData(query, context.requestOptions).catch(import_discord_player7.Util.noop);
        if (!spotifyData) return { playlist: null, tracks: [] };
        const spotifyTrack = new import_discord_player7.Track(this.context.player, {
          title: spotifyData.title,
          description: `${spotifyData.name} by ${spotifyData.artists.map((m) => m.name).join(", ")}`,
          author: spotifyData.artists[0]?.name ?? "Unknown Artist",
          url: spotifyData.id ? `https://open.spotify.com/track/${spotifyData.id}` : query,
          thumbnail: spotifyData.coverArt?.sources?.[0]?.url || "https://www.scdn.co/i/_global/twitter_card-default.jpg",
          duration: import_discord_player7.Util.buildTimeCode(
            import_discord_player7.Util.parseMS(spotifyData.duration ?? spotifyData.maxDuration ?? 0)
          ),
          views: 0,
          requestedBy: context.requestedBy,
          source: "spotify",
          queryType: context.type,
          metadata: {
            source: spotifyData,
            bridge: null
          },
          requestMetadata: /* @__PURE__ */ __name(async () => {
            return {
              source: spotifyData,
              bridge: null
            };
          }, "requestMetadata")
        });
        spotifyTrack.extractor = this;
        return { playlist: null, tracks: [spotifyTrack] };
      }
      case import_discord_player7.QueryType.SPOTIFY_PLAYLIST: {
        try {
          const { queryType, id } = this.parse(query);
          if (queryType !== "playlist") throw "err";
          const spotifyPlaylist = await this.internal.getPlaylist(id);
          if (!spotifyPlaylist) throw "err";
          const playlist = new import_discord_player7.Playlist(this.context.player, {
            title: spotifyPlaylist.name,
            description: spotifyPlaylist.name ?? "",
            thumbnail: spotifyPlaylist.thumbnail ?? "https://www.scdn.co/i/_global/twitter_card-default.jpg",
            type: "playlist",
            source: "spotify",
            author: {
              name: spotifyPlaylist.author ?? "Unknown Artist",
              url: null
            },
            tracks: [],
            id: spotifyPlaylist.id,
            url: spotifyPlaylist.url || query,
            rawPlaylist: spotifyPlaylist
          });
          playlist.tracks = spotifyPlaylist.tracks.map((spotifyData) => {
            const data = new import_discord_player7.Track(this.context.player, {
              title: spotifyData.title,
              description: `${spotifyData.title} by ${spotifyData.artist}`,
              author: spotifyData.artist ?? "Unknown Artist",
              url: spotifyData.url,
              thumbnail: spotifyData.thumbnail || "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: import_discord_player7.Util.buildTimeCode(
                import_discord_player7.Util.parseMS(spotifyData.duration ?? 0)
              ),
              views: 0,
              requestedBy: context.requestedBy,
              source: "spotify",
              queryType: import_discord_player7.QueryType.SPOTIFY_SONG,
              metadata: {
                source: spotifyData,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: spotifyData,
                  bridge: null
                };
              }, "requestMetadata")
            });
            data.extractor = this;
            data.playlist = playlist;
            return data;
          });
          return { playlist, tracks: playlist.tracks };
        } catch {
          const spotifyPlaylist = await this._lib.getData(query, context.requestOptions).catch(import_discord_player7.Util.noop);
          if (!spotifyPlaylist) return { playlist: null, tracks: [] };
          const playlist = new import_discord_player7.Playlist(this.context.player, {
            title: spotifyPlaylist.name ?? spotifyPlaylist.title,
            description: spotifyPlaylist.title ?? "",
            thumbnail: spotifyPlaylist.coverArt?.sources?.[0]?.url ?? "https://www.scdn.co/i/_global/twitter_card-default.jpg",
            type: spotifyPlaylist.type,
            source: "spotify",
            author: {
              name: spotifyPlaylist.subtitle ?? "Unknown Artist",
              url: null
            },
            tracks: [],
            id: spotifyPlaylist.id,
            url: spotifyPlaylist.id ? `https://open.spotify.com/playlist/${spotifyPlaylist.id}` : query,
            rawPlaylist: spotifyPlaylist
          });
          playlist.tracks = spotifyPlaylist.trackList.map((m) => {
            const data = new import_discord_player7.Track(this.context.player, {
              title: m.title ?? "",
              description: m.title ?? "",
              author: m.subtitle ?? "Unknown Artist",
              url: m.uid ? `https://open.spotify.com/tracks/${m.uid}` : query,
              thumbnail: "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: import_discord_player7.Util.buildTimeCode(import_discord_player7.Util.parseMS(m.duration)),
              views: 0,
              requestedBy: context.requestedBy,
              playlist,
              source: "spotify",
              queryType: "spotifySong",
              metadata: {
                source: m,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: m,
                  bridge: null
                };
              }, "requestMetadata")
            });
            data.extractor = this;
            data.playlist = playlist;
            return data;
          });
          return { playlist, tracks: playlist.tracks };
        }
      }
      case import_discord_player7.QueryType.SPOTIFY_ALBUM: {
        try {
          const { queryType, id } = this.parse(query);
          if (queryType !== "album") throw "err";
          const spotifyAlbum = await this.internal.getAlbum(id);
          if (!spotifyAlbum) throw "err";
          const playlist = new import_discord_player7.Playlist(this.context.player, {
            title: spotifyAlbum.name,
            description: spotifyAlbum.name ?? "",
            thumbnail: spotifyAlbum.thumbnail ?? "https://www.scdn.co/i/_global/twitter_card-default.jpg",
            type: "album",
            source: "spotify",
            author: {
              name: spotifyAlbum.author ?? "Unknown Artist",
              url: null
            },
            tracks: [],
            id: spotifyAlbum.id,
            url: spotifyAlbum.url || query,
            rawPlaylist: spotifyAlbum
          });
          playlist.tracks = spotifyAlbum.tracks.map((spotifyData) => {
            const data = new import_discord_player7.Track(this.context.player, {
              title: spotifyData.title,
              description: `${spotifyData.title} by ${spotifyData.artist}`,
              author: spotifyData.artist ?? "Unknown Artist",
              url: spotifyData.url,
              thumbnail: spotifyData.thumbnail || "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: import_discord_player7.Util.buildTimeCode(
                import_discord_player7.Util.parseMS(spotifyData.duration ?? 0)
              ),
              views: 0,
              requestedBy: context.requestedBy,
              source: "spotify",
              queryType: import_discord_player7.QueryType.SPOTIFY_SONG,
              metadata: {
                source: spotifyData,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: spotifyData,
                  bridge: null
                };
              }, "requestMetadata")
            });
            data.extractor = this;
            data.playlist = playlist;
            return data;
          });
          return { playlist, tracks: playlist.tracks };
        } catch {
          const album = await this._lib.getData(query, context.requestOptions).catch(import_discord_player7.Util.noop);
          if (!album) return { playlist: null, tracks: [] };
          const playlist = new import_discord_player7.Playlist(this.context.player, {
            title: album.name ?? album.title,
            description: album.title ?? "",
            thumbnail: album.coverArt?.sources?.[0]?.url ?? "https://www.scdn.co/i/_global/twitter_card-default.jpg",
            type: album.type,
            source: "spotify",
            author: {
              name: album.subtitle ?? "Unknown Artist",
              url: null
            },
            tracks: [],
            id: album.id,
            url: album.id ? `https://open.spotify.com/playlist/${album.id}` : query,
            rawPlaylist: album
          });
          playlist.tracks = album.trackList.map((m) => {
            const data = new import_discord_player7.Track(this.context.player, {
              title: m.title ?? "",
              description: m.title ?? "",
              author: m.subtitle ?? "Unknown Artist",
              url: m.uid ? `https://open.spotify.com/tracks/${m.uid}` : query,
              thumbnail: "https://www.scdn.co/i/_global/twitter_card-default.jpg",
              duration: import_discord_player7.Util.buildTimeCode(import_discord_player7.Util.parseMS(m.duration)),
              views: 0,
              requestedBy: context.requestedBy,
              playlist,
              source: "spotify",
              queryType: "spotifySong",
              metadata: {
                source: m,
                bridge: null
              },
              requestMetadata: /* @__PURE__ */ __name(async () => {
                return {
                  source: m,
                  bridge: null
                };
              }, "requestMetadata")
            });
            data.extractor = this;
            data.playlist = playlist;
            return data;
          });
          return { playlist, tracks: playlist.tracks };
        }
      }
      default:
        return { playlist: null, tracks: [] };
    }
  }
  async stream(info) {
    if (this._stream) {
      const stream = await this._stream(info.url, info);
      if (typeof stream === "string") return stream;
      return stream;
    }
    const result = await this.context.requestBridge(info, this);
    if (!result?.result) throw new Error("Could not bridge this track");
    return result.result;
  }
  parse(q) {
    const [, , , queryType, id] = re.exec(q) || [];
    return { queryType, id };
  }
};
__name(_SpotifyExtractor, "SpotifyExtractor");
__publicField(_SpotifyExtractor, "identifier", "com.discord-player.spotifyextractor");
var SpotifyExtractor = _SpotifyExtractor;

// src/version.ts
var version = (
  /* @__MACRO__ getVersion */
  "7.1.0"
);

// src/index.ts
var DefaultExtractors = [
  SoundCloudExtractor,
  AttachmentExtractor,
  VimeoExtractor,
  ReverbnationExtractor,
  AppleMusicExtractor,
  SpotifyExtractor
];
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  AppleMusicExtractor,
  AttachmentExtractor,
  DefaultExtractors,
  Internal,
  ReverbnationExtractor,
  SoundCloudExtractor,
  SpotifyExtractor,
  VimeoExtractor,
  lyricsExtractor,
  version
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2luZGV4LnRzIiwgIi4uL3NyYy9leHRyYWN0b3JzL1NvdW5kQ2xvdWRFeHRyYWN0b3IudHMiLCAiLi4vc3JjL2ludGVybmFsL2hlbHBlci50cyIsICIuLi9zcmMvZXh0cmFjdG9ycy9MeXJpY3NFeHRyYWN0b3IudHMiLCAiLi4vc3JjL2V4dHJhY3RvcnMvVmltZW9FeHRyYWN0b3IudHMiLCAiLi4vc3JjL2ludGVybmFsL1ZpbWVvLnRzIiwgIi4uL3NyYy9leHRyYWN0b3JzL1JldmVyYm5hdGlvbkV4dHJhY3Rvci50cyIsICIuLi9zcmMvZXh0cmFjdG9ycy9BdHRhY2htZW50RXh0cmFjdG9yLnRzIiwgIi4uL3NyYy9pbnRlcm5hbC9kb3dubG9hZGVyLnRzIiwgIi4uL3NyYy9leHRyYWN0b3JzL0FwcGxlTXVzaWNFeHRyYWN0b3IudHMiLCAiLi4vc3JjL2ludGVybmFsL2luZGV4LnRzIiwgIi4uL3NyYy9pbnRlcm5hbC9BcHBsZU11c2ljLnRzIiwgIi4uL3NyYy9pbnRlcm5hbC9TcG90aWZ5LnRzIiwgIi4uL3NyYy9leHRyYWN0b3JzL1Nwb3RpZnlFeHRyYWN0b3IudHMiLCAiLi4vc3JjL3ZlcnNpb24udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7XG4gIEFwcGxlTXVzaWNFeHRyYWN0b3IsXG4gIEF0dGFjaG1lbnRFeHRyYWN0b3IsXG4gIFJldmVyYm5hdGlvbkV4dHJhY3RvcixcbiAgU291bmRDbG91ZEV4dHJhY3RvcixcbiAgU3BvdGlmeUV4dHJhY3RvcixcbiAgVmltZW9FeHRyYWN0b3IgfSBmcm9tXG4nLi9leHRyYWN0b3JzJztcblxuZXhwb3J0IGNvbnN0IERlZmF1bHRFeHRyYWN0b3JzID0gW1xuU291bmRDbG91ZEV4dHJhY3RvcixcbkF0dGFjaG1lbnRFeHRyYWN0b3IsXG5WaW1lb0V4dHJhY3RvcixcblJldmVyYm5hdGlvbkV4dHJhY3RvcixcbkFwcGxlTXVzaWNFeHRyYWN0b3IsXG5TcG90aWZ5RXh0cmFjdG9yXTtcblxuXG5leHBvcnQgKiBmcm9tICcuL2V4dHJhY3RvcnMnO1xuZXhwb3J0ICogYXMgSW50ZXJuYWwgZnJvbSAnLi9pbnRlcm5hbCc7XG5cbmV4cG9ydCB7IHZlcnNpb24gfSBmcm9tICcuL3ZlcnNpb24nOyIsICIvLyBwcmV0dGllci1pZ25vcmVcbmltcG9ydCB7XG4gIEJhc2VFeHRyYWN0b3IsXG4gIEV4dHJhY3RvckluZm8sXG4gIEV4dHJhY3RvclNlYXJjaENvbnRleHQsXG4gIEV4dHJhY3RvclN0cmVhbWFibGUsXG4gIHR5cGUgR3VpbGRRdWV1ZUhpc3RvcnksXG4gIFBsYXlsaXN0LFxuICBRdWVyeVR5cGUsXG4gIFNlYXJjaFF1ZXJ5VHlwZSxcbiAgVHJhY2ssXG4gIFV0aWwgfSBmcm9tXG4nZGlzY29yZC1wbGF5ZXInO1xuaW1wb3J0ICogYXMgU291bmRDbG91ZCBmcm9tICdzb3VuZGNsb3VkLnRzJztcbmltcG9ydCB7IGZpbHRlclNvdW5kQ2xvdWRQcmV2aWV3cyB9IGZyb20gJy4uL2ludGVybmFsL2hlbHBlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU291bmRDbG91ZEV4dHJhY3RvckluaXQge1xuICBjbGllbnRJZD86IHN0cmluZztcbiAgb2F1dGhUb2tlbj86IHN0cmluZztcbiAgcHJveHk/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBTb3VuZENsb3VkRXh0cmFjdG9yIGV4dGVuZHMgQmFzZUV4dHJhY3RvcjxTb3VuZENsb3VkRXh0cmFjdG9ySW5pdD4ge1xuICBwdWJsaWMgc3RhdGljIGlkZW50aWZpZXIgPSAnY29tLmRpc2NvcmQtcGxheWVyLnNvdW5kY2xvdWRleHRyYWN0b3InIGFzIGNvbnN0O1xuICBwdWJsaWMgc3RhdGljIGluc3RhbmNlOiBTb3VuZENsb3VkRXh0cmFjdG9yIHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIGludGVybmFsID0gbmV3IFNvdW5kQ2xvdWQuZGVmYXVsdCh7XG4gICAgY2xpZW50SWQ6IHRoaXMub3B0aW9ucy5jbGllbnRJZCxcbiAgICBvYXV0aFRva2VuOiB0aGlzLm9wdGlvbnMub2F1dGhUb2tlbixcbiAgICBwcm94eTogdGhpcy5vcHRpb25zLnByb3h5XG4gIH0pO1xuXG4gIHB1YmxpYyBhc3luYyBhY3RpdmF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnByb3RvY29scyA9IFsnc2NzZWFyY2gnLCAnc291bmRjbG91ZCddO1xuICAgIFNvdW5kQ2xvdWRFeHRyYWN0b3IuaW5zdGFuY2UgPSB0aGlzO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGRlYWN0aXZhdGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5wcm90b2NvbHMgPSBbXTtcbiAgICBTb3VuZENsb3VkRXh0cmFjdG9yLmluc3RhbmNlID0gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB2YWxpZGF0ZShcbiAgcXVlcnk6IHN0cmluZyxcbiAgdHlwZT86IFNlYXJjaFF1ZXJ5VHlwZSB8IG51bGwgfCB1bmRlZmluZWQpXG4gIDogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKHR5cGVvZiBxdWVyeSAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZTtcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICByZXR1cm4gKFtcbiAgICBRdWVyeVR5cGUuU09VTkRDTE9VRCxcbiAgICBRdWVyeVR5cGUuU09VTkRDTE9VRF9QTEFZTElTVCxcbiAgICBRdWVyeVR5cGUuU09VTkRDTE9VRF9TRUFSQ0gsXG4gICAgUXVlcnlUeXBlLlNPVU5EQ0xPVURfVFJBQ0ssXG4gICAgUXVlcnlUeXBlLkFVVE8sXG4gICAgUXVlcnlUeXBlLkFVVE9fU0VBUkNIXSBhc1xuICAgIFNlYXJjaFF1ZXJ5VHlwZVtdKS5zb21lKChyKSA9PiByID09PSB0eXBlKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRSZWxhdGVkVHJhY2tzKHRyYWNrOiBUcmFjaywgaGlzdG9yeTogR3VpbGRRdWV1ZUhpc3RvcnkpIHtcbiAgICBpZiAodHJhY2sucXVlcnlUeXBlID09PSBRdWVyeVR5cGUuU09VTkRDTE9VRF9UUkFDSykge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuaW50ZXJuYWwudHJhY2tzLnJlbGF0ZWRWMih0cmFjay51cmwsIDUpO1xuXG4gICAgICBjb25zdCB1bmlxdWUgPSBmaWx0ZXJTb3VuZENsb3VkUHJldmlld3MoZGF0YSkuZmlsdGVyKFxuICAgICAgICAodCkgPT4gIWhpc3RvcnkudHJhY2tzLnNvbWUoKGgpID0+IGgudXJsID09PSB0LnBlcm1hbGlua191cmwpXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVSZXNwb25zZShcbiAgICAgICAgbnVsbCxcbiAgICAgICAgKHVuaXF1ZS5sZW5ndGggPiAwID8gdW5pcXVlIDogZGF0YSkubWFwKCh0cmFja0luZm8pID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdUcmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICB0aXRsZTogdHJhY2tJbmZvLnRpdGxlLFxuICAgICAgICAgICAgdXJsOiB0cmFja0luZm8ucGVybWFsaW5rX3VybCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKHRyYWNrSW5mby5kdXJhdGlvbikpLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRyYWNrSW5mby5kZXNjcmlwdGlvbiA/PyAnJyxcbiAgICAgICAgICAgIHRodW1ibmFpbDogdHJhY2tJbmZvLmFydHdvcmtfdXJsLFxuICAgICAgICAgICAgdmlld3M6IHRyYWNrSW5mby5wbGF5YmFja19jb3VudCxcbiAgICAgICAgICAgIGF1dGhvcjogdHJhY2tJbmZvLnVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICByZXF1ZXN0ZWRCeTogdHJhY2sucmVxdWVzdGVkQnksXG4gICAgICAgICAgICBzb3VyY2U6ICdzb3VuZGNsb3VkJyxcbiAgICAgICAgICAgIGVuZ2luZTogdHJhY2tJbmZvLFxuICAgICAgICAgICAgcXVlcnlUeXBlOiBRdWVyeVR5cGUuU09VTkRDTE9VRF9UUkFDSyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB0cmFja0luZm8sXG4gICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrSW5mbztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGVhblRpdGxlOiB0cmFja0luZm8udGl0bGVcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIG5ld1RyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICByZXR1cm4gbmV3VHJhY2s7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaGFuZGxlKFxuICBxdWVyeTogc3RyaW5nLFxuICBjb250ZXh0OiBFeHRyYWN0b3JTZWFyY2hDb250ZXh0KVxuICA6IFByb21pc2U8RXh0cmFjdG9ySW5mbz4ge1xuICAgIGlmIChjb250ZXh0LnByb3RvY29sID09PSAnc2NzZWFyY2gnKVxuICAgIGNvbnRleHQudHlwZSA9IFF1ZXJ5VHlwZS5TT1VORENMT1VEX1NFQVJDSDtcbiAgICBzd2l0Y2ggKGNvbnRleHQudHlwZSkge1xuICAgICAgY2FzZSBRdWVyeVR5cGUuU09VTkRDTE9VRF9UUkFDSzp7XG4gICAgICAgICAgY29uc3QgdHJhY2tJbmZvID0gYXdhaXQgdGhpcy5pbnRlcm5hbC50cmFja3MuXG4gICAgICAgICAgZ2V0VjIocXVlcnkpLlxuICAgICAgICAgIGNhdGNoKFV0aWwubm9vcCk7XG5cbiAgICAgICAgICBpZiAoIXRyYWNrSW5mbykgcmV0dXJuIHRoaXMuZW1wdHlSZXNwb25zZSgpO1xuXG4gICAgICAgICAgY29uc3QgdHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgdGl0bGU6IHRyYWNrSW5mby50aXRsZSxcbiAgICAgICAgICAgIHVybDogdHJhY2tJbmZvLnBlcm1hbGlua191cmwsXG4gICAgICAgICAgICBkdXJhdGlvbjogVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyh0cmFja0luZm8uZHVyYXRpb24pKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0cmFja0luZm8uZGVzY3JpcHRpb24gPz8gJycsXG4gICAgICAgICAgICB0aHVtYm5haWw6IHRyYWNrSW5mby5hcnR3b3JrX3VybCxcbiAgICAgICAgICAgIHZpZXdzOiB0cmFja0luZm8ucGxheWJhY2tfY291bnQsXG4gICAgICAgICAgICBhdXRob3I6IHRyYWNrSW5mby51c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICBzb3VyY2U6ICdzb3VuZGNsb3VkJyxcbiAgICAgICAgICAgIGVuZ2luZTogdHJhY2tJbmZvLFxuICAgICAgICAgICAgcXVlcnlUeXBlOiBjb250ZXh0LnR5cGUsXG4gICAgICAgICAgICBtZXRhZGF0YTogdHJhY2tJbmZvLFxuICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiB0cmFja0luZm87XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYW5UaXRsZTogdHJhY2tJbmZvLnRpdGxlXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0cmFjay5leHRyYWN0b3IgPSB0aGlzO1xuXG4gICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW3RyYWNrXSB9O1xuICAgICAgICB9XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5TT1VORENMT1VEX1BMQVlMSVNUOntcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5pbnRlcm5hbC5wbGF5bGlzdHMuXG4gICAgICAgICAgZ2V0VjIocXVlcnkpLlxuICAgICAgICAgIGNhdGNoKFV0aWwubm9vcCk7XG4gICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbXSB9O1xuXG4gICAgICAgICAgY29uc3QgcmVzID0gbmV3IFBsYXlsaXN0KHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24gPz8gJycsXG4gICAgICAgICAgICB0aHVtYm5haWw6IGRhdGEuYXJ0d29ya191cmwgPz8gZGF0YS50cmFja3NbMF0uYXJ0d29ya191cmwsXG4gICAgICAgICAgICB0eXBlOiAncGxheWxpc3QnLFxuICAgICAgICAgICAgc291cmNlOiAnc291bmRjbG91ZCcsXG4gICAgICAgICAgICBhdXRob3I6IHtcbiAgICAgICAgICAgICAgbmFtZTogZGF0YS51c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgICB1cmw6IGRhdGEudXNlci5wZXJtYWxpbmtfdXJsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJhY2tzOiBbXSxcbiAgICAgICAgICAgIGlkOiBgJHtkYXRhLmlkfWAsXG4gICAgICAgICAgICB1cmw6IGRhdGEucGVybWFsaW5rX3VybCxcbiAgICAgICAgICAgIHJhd1BsYXlsaXN0OiBkYXRhXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IHNvbmcgb2YgZGF0YS50cmFja3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgdGl0bGU6IHNvbmcudGl0bGUsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzb25nLmRlc2NyaXB0aW9uID8/ICcnLFxuICAgICAgICAgICAgICBhdXRob3I6IHNvbmcudXNlci51c2VybmFtZSxcbiAgICAgICAgICAgICAgdXJsOiBzb25nLnBlcm1hbGlua191cmwsXG4gICAgICAgICAgICAgIHRodW1ibmFpbDogc29uZy5hcnR3b3JrX3VybCxcbiAgICAgICAgICAgICAgZHVyYXRpb246IFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVMoc29uZy5kdXJhdGlvbikpLFxuICAgICAgICAgICAgICB2aWV3czogc29uZy5wbGF5YmFja19jb3VudCxcbiAgICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICAgIHBsYXlsaXN0OiByZXMsXG4gICAgICAgICAgICAgIHNvdXJjZTogJ3NvdW5kY2xvdWQnLFxuICAgICAgICAgICAgICBlbmdpbmU6IHNvbmcsXG4gICAgICAgICAgICAgIHF1ZXJ5VHlwZTogY29udGV4dC50eXBlLFxuICAgICAgICAgICAgICBtZXRhZGF0YTogc29uZyxcbiAgICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNvbmc7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGNsZWFuVGl0bGU6IHNvbmcudGl0bGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdHJhY2suZXh0cmFjdG9yID0gdGhpcztcbiAgICAgICAgICAgIHRyYWNrLnBsYXlsaXN0ID0gcmVzO1xuICAgICAgICAgICAgcmVzLnRyYWNrcy5wdXNoKHRyYWNrKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdDogcmVzLCB0cmFja3M6IHJlcy50cmFja3MgfTtcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDp7XG4gICAgICAgICAgbGV0IHRyYWNrcyA9IGF3YWl0IHRoaXMuaW50ZXJuYWwudHJhY2tzLlxuICAgICAgICAgIHNlYXJjaFYyKHsgcTogcXVlcnkgfSkuXG4gICAgICAgICAgdGhlbigodCkgPT4gdC5jb2xsZWN0aW9uKS5cbiAgICAgICAgICBjYXRjaChVdGlsLm5vb3ApO1xuXG4gICAgICAgICAgaWYgKCF0cmFja3MpXG4gICAgICAgICAgdHJhY2tzID0gYXdhaXQgdGhpcy5pbnRlcm5hbC50cmFja3Muc2VhcmNoQWx0KHF1ZXJ5KS5jYXRjaChVdGlsLm5vb3ApO1xuXG4gICAgICAgICAgaWYgKCF0cmFja3MgfHwgIXRyYWNrcy5sZW5ndGgpIHJldHVybiB0aGlzLmVtcHR5UmVzcG9uc2UoKTtcblxuICAgICAgICAgIHRyYWNrcyA9IGZpbHRlclNvdW5kQ2xvdWRQcmV2aWV3cyh0cmFja3MpO1xuXG4gICAgICAgICAgY29uc3QgcmVzb2x2ZWRUcmFja3M6IFRyYWNrW10gPSBbXTtcblxuICAgICAgICAgIGZvciAoY29uc3QgdHJhY2tJbmZvIG9mIHRyYWNrcykge1xuICAgICAgICAgICAgaWYgKCF0cmFja0luZm8uc3RyZWFtYWJsZSkgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCB0cmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICAgIHRpdGxlOiB0cmFja0luZm8udGl0bGUsXG4gICAgICAgICAgICAgIHVybDogdHJhY2tJbmZvLnBlcm1hbGlua191cmwsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKHRyYWNrSW5mby5kdXJhdGlvbikpLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdHJhY2tJbmZvLmRlc2NyaXB0aW9uID8/ICcnLFxuICAgICAgICAgICAgICB0aHVtYm5haWw6IHRyYWNrSW5mby5hcnR3b3JrX3VybCxcbiAgICAgICAgICAgICAgdmlld3M6IHRyYWNrSW5mby5wbGF5YmFja19jb3VudCxcbiAgICAgICAgICAgICAgYXV0aG9yOiB0cmFja0luZm8udXNlci51c2VybmFtZSxcbiAgICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICAgIHNvdXJjZTogJ3NvdW5kY2xvdWQnLFxuICAgICAgICAgICAgICBlbmdpbmU6IHRyYWNrSW5mbyxcbiAgICAgICAgICAgICAgcXVlcnlUeXBlOiAnc291bmRjbG91ZFRyYWNrJyxcbiAgICAgICAgICAgICAgbWV0YWRhdGE6IHRyYWNrSW5mbyxcbiAgICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrSW5mbztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICAgIHJlc29sdmVkVHJhY2tzLnB1c2godHJhY2spO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IHJlc29sdmVkVHJhY2tzIH07XG4gICAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZW1wdHlSZXNwb25zZSgpOiBFeHRyYWN0b3JJbmZvIHtcbiAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbXSB9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHN0cmVhbShpbmZvOiBUcmFjaykge1xuICAgIGNvbnN0IHVybCA9IGF3YWl0IHRoaXMuaW50ZXJuYWwudXRpbC5zdHJlYW1MaW5rKGluZm8udXJsKS5jYXRjaChVdGlsLm5vb3ApO1xuICAgIGlmICghdXJsKVxuICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGV4dHJhY3Qgc3RyZWFtIGZyb20gdGhpcyB0cmFjayBzb3VyY2UnKTtcblxuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgYnJpZGdlKFxuICB0cmFjazogVHJhY2ssXG4gIHNvdXJjZUV4dHJhY3RvcjogQmFzZUV4dHJhY3RvciB8IG51bGwpXG4gIDogUHJvbWlzZTxFeHRyYWN0b3JTdHJlYW1hYmxlIHwgbnVsbD4ge1xuICAgIGlmIChzb3VyY2VFeHRyYWN0b3I/LmlkZW50aWZpZXIgPT09IHRoaXMuaWRlbnRpZmllcikge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtKHRyYWNrKTtcbiAgICB9XG5cbiAgICBjb25zdCBxdWVyeSA9XG4gICAgc291cmNlRXh0cmFjdG9yPy5jcmVhdGVCcmlkZ2VRdWVyeSh0cmFjaykgPz9cbiAgICBgJHt0cmFjay5hdXRob3J9IC0gJHt0cmFjay50aXRsZX1gO1xuXG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IHRoaXMuaGFuZGxlKHF1ZXJ5LCB7XG4gICAgICByZXF1ZXN0ZWRCeTogdHJhY2sucmVxdWVzdGVkQnksXG4gICAgICB0eXBlOiBRdWVyeVR5cGUuU09VTkRDTE9VRF9TRUFSQ0hcbiAgICB9KTtcblxuICAgIGlmICghaW5mby50cmFja3MubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc3RyZWFtKGluZm8udHJhY2tzWzBdKTtcblxuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIHRyYWNrLmJyaWRnZWRUcmFjayA9IGluZm8udHJhY2tzWzBdO1xuICAgICAgdHJhY2suYnJpZGdlZEV4dHJhY3RvciA9IHRoaXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufSIsICJpbXBvcnQgeyBCYXNlRXh0cmFjdG9yLCBUcmFjayB9IGZyb20gJ2Rpc2NvcmQtcGxheWVyJztcbmltcG9ydCB7IFNvdW5kQ2xvdWRFeHRyYWN0b3IgfSBmcm9tICcuLi9leHRyYWN0b3JzL1NvdW5kQ2xvdWRFeHRyYWN0b3InO1xuaW1wb3J0IHVuZmV0Y2ggZnJvbSAnaXNvbW9ycGhpYy11bmZldGNoJztcbmltcG9ydCB0eXBlICogYXMgU291bmRDbG91ZCBmcm9tICdzb3VuZGNsb3VkLnRzJztcblxuZXhwb3J0IGNvbnN0IFVBID1cbidNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA5LjAuMC4wIFNhZmFyaS81MzcuMzYgRWRnLzEwOS4wLjE1MTguNDknO1xuZXhwb3J0IGNvbnN0IGZldGNoID0gdW5mZXRjaDtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1ha2VTQ1NlYXJjaChxdWVyeTogc3RyaW5nKSB7XG4gIGNvbnN0IHsgaW5zdGFuY2UgfSA9IFNvdW5kQ2xvdWRFeHRyYWN0b3I7XG4gIGlmICghaW5zdGFuY2U/LmludGVybmFsKSByZXR1cm4gW107XG5cbiAgbGV0IGRhdGE6IFNvdW5kQ2xvdWQuU291bmRjbG91ZFRyYWNrVjJbXTtcblxuICB0cnkge1xuICAgIGNvbnN0IGluZm8gPSBhd2FpdCBpbnN0YW5jZS5pbnRlcm5hbC50cmFja3Muc2VhcmNoVjIoe1xuICAgICAgcTogcXVlcnksXG4gICAgICBsaW1pdDogNVxuICAgIH0pO1xuXG4gICAgZGF0YSA9IGluZm8uY29sbGVjdGlvbjtcbiAgfSBjYXRjaCB7XG4gICAgLy8gZmFsbGJhY2tcbiAgICBjb25zdCBpbmZvID0gYXdhaXQgaW5zdGFuY2UuaW50ZXJuYWwudHJhY2tzLnNlYXJjaEFsdChxdWVyeSk7XG5cbiAgICBkYXRhID0gaW5mbztcbiAgfVxuXG4gIHJldHVybiBmaWx0ZXJTb3VuZENsb3VkUHJldmlld3MoZGF0YSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwdWxsU0NNZXRhZGF0YShleHQ6IEJhc2VFeHRyYWN0b3IsIGluZm86IFRyYWNrKSB7XG4gIGNvbnN0IG1ldGEgPSBhd2FpdCBtYWtlU0NTZWFyY2goZXh0LmNyZWF0ZUJyaWRnZVF1ZXJ5KGluZm8pKS5cbiAgdGhlbigocikgPT4gclswXSkuXG4gIGNhdGNoKCgpID0+IG51bGwpO1xuXG4gIHJldHVybiBtZXRhO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyU291bmRDbG91ZFByZXZpZXdzKFxudHJhY2tzOiBTb3VuZENsb3VkLlNvdW5kY2xvdWRUcmFja1YyW10pXG46IFNvdW5kQ2xvdWQuU291bmRjbG91ZFRyYWNrVjJbXSB7XG4gIGNvbnN0IGZpbHRlcmVkID0gdHJhY2tzLmZpbHRlcigodCkgPT4ge1xuICAgIGlmICh0eXBlb2YgdC5wb2xpY3kgPT09ICdzdHJpbmcnKSByZXR1cm4gdC5wb2xpY3kudG9VcHBlckNhc2UoKSA9PT0gJ0FMTE9XJztcbiAgICByZXR1cm4gISh0LmR1cmF0aW9uID09PSAzMF8wMDAgJiYgdC5mdWxsX2R1cmF0aW9uID4gMzBfMDAwKTtcbiAgfSk7XG5cbiAgY29uc3QgcmVzdWx0ID0gZmlsdGVyZWQubGVuZ3RoID4gMCA/IGZpbHRlcmVkIDogdHJhY2tzO1xuXG4gIHJldHVybiByZXN1bHQ7XG59IiwgImV4cG9ydCBmdW5jdGlvbiBseXJpY3NFeHRyYWN0b3IoKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAnTGVnYWN5IGx5cmljcyBleHRyYWN0b3IgaGFzIGJlZW4gcmVtb3ZlZC4gUGxlYXNlIHVzZSB0aGUgbmV3IGx5cmljcyBhcGkgZnJvbSBgcGxheWVyLmx5cmljc2AgaW5zdGVhZC4gSXQgb2ZmZXJzIG1vcmUgYWNjdXJhdGUgcmVzdWx0IGFuZCBmZWF0dXJlcyBsaWtlIHBsYWluIGx5cmljcyBhbmQgc3luY2VkIGx5cmljcy4nXG4gICk7XG59IiwgIi8vIHByZXR0aWVyLWlnbm9yZVxuaW1wb3J0IHtcbiAgQmFzZUV4dHJhY3RvcixcbiAgRXh0cmFjdG9ySW5mbyxcbiAgRXh0cmFjdG9yU2VhcmNoQ29udGV4dCxcbiAgUXVlcnlUeXBlLFxuICBTZWFyY2hRdWVyeVR5cGUsXG4gIFRyYWNrLFxuICBVdGlsIH0gZnJvbVxuJ2Rpc2NvcmQtcGxheWVyJztcbmltcG9ydCB7IFZpbWVvIH0gZnJvbSAnLi4vaW50ZXJuYWwvVmltZW8nO1xuXG5leHBvcnQgY2xhc3MgVmltZW9FeHRyYWN0b3IgZXh0ZW5kcyBCYXNlRXh0cmFjdG9yIHtcbiAgcHVibGljIHN0YXRpYyBpZGVudGlmaWVyID0gJ2NvbS5kaXNjb3JkLXBsYXllci52aW1lb2V4dHJhY3RvcicgYXMgY29uc3Q7XG5cbiAgcHVibGljIGFzeW5jIHZhbGlkYXRlKFxuICBxdWVyeTogc3RyaW5nLFxuICB0eXBlPzogU2VhcmNoUXVlcnlUeXBlIHwgbnVsbCB8IHVuZGVmaW5lZClcbiAgOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAodHlwZW9mIHF1ZXJ5ICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAoW1F1ZXJ5VHlwZS5WSU1FT10gYXMgU2VhcmNoUXVlcnlUeXBlW10pLnNvbWUoKHIpID0+IHIgPT09IHR5cGUpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldFJlbGF0ZWRUcmFja3ModHJhY2s6IFRyYWNrKSB7XG4gICAgdm9pZCB0cmFjaztcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVSZXNwb25zZSgpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGhhbmRsZShcbiAgcXVlcnk6IHN0cmluZyxcbiAgY29udGV4dDogRXh0cmFjdG9yU2VhcmNoQ29udGV4dClcbiAgOiBQcm9taXNlPEV4dHJhY3RvckluZm8+IHtcbiAgICBzd2l0Y2ggKGNvbnRleHQudHlwZSkge1xuICAgICAgY2FzZSBRdWVyeVR5cGUuVklNRU86e1xuICAgICAgICAgIGNvbnN0IHRyYWNrSW5mbyA9IGF3YWl0IFZpbWVvLmdldEluZm8oXG4gICAgICAgICAgICBxdWVyeS5cbiAgICAgICAgICAgIHNwbGl0KCcvJykuXG4gICAgICAgICAgICBmaWx0ZXIoKHgpID0+ICEheCkuXG4gICAgICAgICAgICBwb3AoKSFcbiAgICAgICAgICApLmNhdGNoKFV0aWwubm9vcCk7XG5cbiAgICAgICAgICBpZiAoIXRyYWNrSW5mbykgcmV0dXJuIHRoaXMuZW1wdHlSZXNwb25zZSgpO1xuXG4gICAgICAgICAgY29uc3QgdHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgdGl0bGU6IHRyYWNrSW5mby50aXRsZSxcbiAgICAgICAgICAgIHVybDogdHJhY2tJbmZvLnVybCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKHRyYWNrSW5mby5kdXJhdGlvbiB8fCAwKSksXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYCR7dHJhY2tJbmZvLnRpdGxlfSBieSAke3RyYWNrSW5mby5hdXRob3IubmFtZX1gLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiB0cmFja0luZm8udGh1bWJuYWlsLFxuICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICBhdXRob3I6IHRyYWNrSW5mby5hdXRob3IubmFtZSxcbiAgICAgICAgICAgIHJlcXVlc3RlZEJ5OiBjb250ZXh0LnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgc291cmNlOiAnYXJiaXRyYXJ5JyxcbiAgICAgICAgICAgIGVuZ2luZTogdHJhY2tJbmZvLnN0cmVhbSxcbiAgICAgICAgICAgIHF1ZXJ5VHlwZTogY29udGV4dC50eXBlLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRyYWNrSW5mbyxcbiAgICAgICAgICAgIGFzeW5jIHJlcXVlc3RNZXRhZGF0YSgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrSW5mbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbdHJhY2tdIH07XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0aGlzLmVtcHR5UmVzcG9uc2UoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZW1wdHlSZXNwb25zZSgpOiBFeHRyYWN0b3JJbmZvIHtcbiAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbXSB9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHN0cmVhbShpbmZvOiBUcmFjaykge1xuICAgIGNvbnN0IGVuZ2luZSA9IGluZm8ucmF3LmVuZ2luZSBhcyBzdHJpbmc7XG4gICAgaWYgKGVuZ2luZSkge1xuICAgICAgcmV0dXJuIGVuZ2luZTtcbiAgICB9XG5cbiAgICBjb25zdCB0cmFjayA9IGF3YWl0IFZpbWVvLmdldEluZm8oaW5mby51cmwpLmNhdGNoKFV0aWwubm9vcCk7XG4gICAgaWYgKCF0cmFjayB8fCAhdHJhY2suc3RyZWFtKVxuICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGV4dHJhY3Qgc3RyZWFtIGZyb20gdGhpcyBzb3VyY2UnKTtcblxuICAgIGluZm8ucmF3LmVuZ2luZSA9IHtcbiAgICAgIHN0cmVhbVVSTDogdHJhY2suc3RyZWFtXG4gICAgfTtcblxuICAgIHJldHVybiB0cmFjay5zdHJlYW07XG4gIH1cbn0iLCAiaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tICdzdHJlYW0nO1xuaW1wb3J0IGh0dHAgZnJvbSAnaHR0cCc7XG5pbXBvcnQgaHR0cHMgZnJvbSAnaHR0cHMnO1xuaW1wb3J0IHsgZmV0Y2ggfSBmcm9tICcuL2hlbHBlcic7XG5cbmNsYXNzIFZpbWVvIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFRoZSAke3RoaXMuY29uc3RydWN0b3IubmFtZX0gY2xhc3MgbWF5IG5vdCBiZSBpbnN0YW50aWF0ZWQhYFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGVkZWYge1JlYWRhYmxlfSBSZWFkYWJsZVxuICAgKi9cblxuICAvKipcbiAgICogRG93bmxvYWRzIGZyb20gdmltZW9cbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkIFZpbWVvIHZpZGVvIGlkXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFJlYWRhYmxlPn1cbiAgICovXG4gIHN0YXRpYyBkb3dubG9hZChpZDogbnVtYmVyIHwgc3RyaW5nKTogUHJvbWlzZTxSZWFkYWJsZT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3QgaW5mbyA9IGF3YWl0IFZpbWVvLmdldEluZm8oaWQpO1xuICAgICAgaWYgKCFpbmZvKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgZG93bmxvYWRlciA9IGluZm8uc3RyZWFtLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykgPyBodHRwcyA6IGh0dHA7XG5cbiAgICAgIGRvd25sb2FkZXIuZ2V0KGluZm8uc3RyZWFtLCAocmVzKSA9PiB7XG4gICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdmlkZW8gaW5mb1xuICAgKiBAcGFyYW0ge251bWJlcn0gaWQgVmlkZW8gaWRcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRJbmZvKGlkOiBudW1iZXIgfCBzdHJpbmcpOiBQcm9taXNlPFZpbWVvSW5mbyB8IG51bGw+IHtcbiAgICBpZiAoIWlkKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaWQnKTtcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9wbGF5ZXIudmltZW8uY29tL3ZpZGVvLyR7aWR9YDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShcbiAgICAgICAgZGF0YS5zcGxpdCgnd2luZG93LnBsYXllckNvbmZpZyA9JylbMV0uc3BsaXQoJzsnKVswXS50cmltKClcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG9iaiA9IHtcbiAgICAgICAgaWQ6IGpzb24udmlkZW8uaWQsXG4gICAgICAgIGR1cmF0aW9uOiBqc29uLnZpZGVvLmR1cmF0aW9uICogMTAwMCxcbiAgICAgICAgdGl0bGU6IGpzb24udmlkZW8udGl0bGUsXG4gICAgICAgIHVybDoganNvbi52aWRlby51cmwsXG4gICAgICAgIHRodW1ibmFpbDoganNvbi52aWRlby50aHVtYnNbJzEyODAnXSB8fCBqc29uLnZpZGVvLnRodW1icy5iYXNlLFxuICAgICAgICBzdHJlYW06IGpzb24ucmVxdWVzdC5maWxlcy5wcm9ncmVzc2l2ZVswXS51cmwsXG4gICAgICAgIGF1dGhvcjoge1xuICAgICAgICAgIGlkOiBqc29uLnZpZGVvLm93bmVyLmlkLFxuICAgICAgICAgIG5hbWU6IGpzb24udmlkZW8ub3duZXIubmFtZSxcbiAgICAgICAgICB1cmw6IGpzb24udmlkZW8ub3duZXIudXJsLFxuICAgICAgICAgIGF2YXRhcjoganNvbi52aWRlby5vd25lci5pbWdfMnggfHwganNvbi52aWRlby5vd25lci5pbWdcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIG9iajtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZpbWVvSW5mbyB7XG4gIGlkOiBudW1iZXI7XG4gIGR1cmF0aW9uOiBudW1iZXI7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHVybDogc3RyaW5nO1xuICB0aHVtYm5haWw6IHN0cmluZztcbiAgc3RyZWFtOiBzdHJpbmc7XG4gIGF1dGhvcjoge1xuICAgIGlkOiBudW1iZXI7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHVybDogc3RyaW5nO1xuICAgIGF2YXRhcjogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgeyBWaW1lbyB9OyIsICIvLyBwcmV0dGllci1pZ25vcmVcbmltcG9ydCB7XG4gIEJhc2VFeHRyYWN0b3IsXG4gIEV4dHJhY3RvckluZm8sXG4gIEV4dHJhY3RvclNlYXJjaENvbnRleHQsXG4gIFF1ZXJ5VHlwZSxcbiAgU2VhcmNoUXVlcnlUeXBlLFxuICBUcmFjayxcbiAgVXRpbCB9IGZyb21cbidkaXNjb3JkLXBsYXllcic7XG5pbXBvcnQgcmV2ZXJibmF0aW9uIGZyb20gJ3JldmVyYm5hdGlvbi1zY3JhcGVyJztcblxuZXhwb3J0IGNsYXNzIFJldmVyYm5hdGlvbkV4dHJhY3RvciBleHRlbmRzIEJhc2VFeHRyYWN0b3Ige1xuICBwdWJsaWMgc3RhdGljIGlkZW50aWZpZXIgPVxuICAnY29tLmRpc2NvcmQtcGxheWVyLnJldmVyYm5hdGlvbmV4dHJhY3RvcicgYXMgY29uc3Q7XG5cbiAgcHVibGljIGFzeW5jIHZhbGlkYXRlKFxuICBxdWVyeTogc3RyaW5nLFxuICB0eXBlPzogU2VhcmNoUXVlcnlUeXBlIHwgbnVsbCB8IHVuZGVmaW5lZClcbiAgOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAodHlwZW9mIHF1ZXJ5ICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAoW1F1ZXJ5VHlwZS5SRVZFUkJOQVRJT05dIGFzIFNlYXJjaFF1ZXJ5VHlwZVtdKS5zb21lKFxuICAgICAgKHIpID0+IHIgPT09IHR5cGVcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldFJlbGF0ZWRUcmFja3ModHJhY2s6IFRyYWNrKSB7XG4gICAgdm9pZCB0cmFjaztcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVSZXNwb25zZSgpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGhhbmRsZShcbiAgcXVlcnk6IHN0cmluZyxcbiAgY29udGV4dDogRXh0cmFjdG9yU2VhcmNoQ29udGV4dClcbiAgOiBQcm9taXNlPEV4dHJhY3RvckluZm8+IHtcbiAgICBzd2l0Y2ggKGNvbnRleHQudHlwZSkge1xuICAgICAgY2FzZSBRdWVyeVR5cGUuUkVWRVJCTkFUSU9OOntcbiAgICAgICAgICBjb25zdCB0cmFja0luZm8gPSBhd2FpdCByZXZlcmJuYXRpb24uZ2V0SW5mbyhxdWVyeSkuY2F0Y2goVXRpbC5ub29wKTtcblxuICAgICAgICAgIGlmICghdHJhY2tJbmZvKSByZXR1cm4gdGhpcy5lbXB0eVJlc3BvbnNlKCk7XG5cbiAgICAgICAgICBjb25zdCB0cmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICB0aXRsZTogdHJhY2tJbmZvLnRpdGxlLFxuICAgICAgICAgICAgdXJsOiB0cmFja0luZm8udXJsLFxuICAgICAgICAgICAgZHVyYXRpb246IFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVModHJhY2tJbmZvLmR1cmF0aW9uKSksXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgIHRyYWNrSW5mby5seXJpY3MgfHxcbiAgICAgICAgICAgIGAke3RyYWNrSW5mby50aXRsZX0gYnkgJHt0cmFja0luZm8uYXJ0aXN0Lm5hbWV9YCxcbiAgICAgICAgICAgIHRodW1ibmFpbDogdHJhY2tJbmZvLnRodW1ibmFpbCxcbiAgICAgICAgICAgIHZpZXdzOiAwLFxuICAgICAgICAgICAgYXV0aG9yOiB0cmFja0luZm8uYXJ0aXN0Lm5hbWUsXG4gICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgIHNvdXJjZTogJ2FyYml0cmFyeScsXG4gICAgICAgICAgICBlbmdpbmU6IHRyYWNrSW5mby5zdHJlYW1VUkwsXG4gICAgICAgICAgICBxdWVyeVR5cGU6IGNvbnRleHQudHlwZSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB0cmFja0luZm8sXG4gICAgICAgICAgICBhc3luYyByZXF1ZXN0TWV0YWRhdGEoKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cmFja0luZm87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0cmFjay5leHRyYWN0b3IgPSB0aGlzO1xuXG4gICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW3RyYWNrXSB9O1xuICAgICAgICB9XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhpcy5lbXB0eVJlc3BvbnNlKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGVtcHR5UmVzcG9uc2UoKTogRXh0cmFjdG9ySW5mbyB7XG4gICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW10gfTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzdHJlYW0oaW5mbzogVHJhY2spIHtcbiAgICBjb25zdCBlbmdpbmUgPSBpbmZvLnJhdy5lbmdpbmUgYXMgc3RyaW5nO1xuICAgIGlmIChlbmdpbmUpIHtcbiAgICAgIHJldHVybiBlbmdpbmU7XG4gICAgfVxuXG4gICAgY29uc3QgdHJhY2sgPSBhd2FpdCByZXZlcmJuYXRpb24uZ2V0SW5mbyhpbmZvLnVybCkuY2F0Y2goVXRpbC5ub29wKTtcbiAgICBpZiAoIXRyYWNrIHx8ICF0cmFjay5zdHJlYW1VUkwpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZXh0cmFjdCBzdHJlYW0gZnJvbSB0aGlzIHNvdXJjZScpO1xuXG4gICAgaW5mby5yYXcuZW5naW5lID0ge1xuICAgICAgc3RyZWFtVVJMOiB0cmFjay5zdHJlYW1VUkxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRyYWNrLnN0cmVhbVVSTDtcbiAgfVxufSIsICIvLyBwcmV0dGllci1pZ25vcmVcbmltcG9ydCB7XG4gIEJhc2VFeHRyYWN0b3IsXG4gIEV4dHJhY3RvckluZm8sXG4gIEV4dHJhY3RvclNlYXJjaENvbnRleHQsXG4gIFF1ZXJ5VHlwZSxcbiAgU2VhcmNoUXVlcnlUeXBlLFxuICBUcmFjayxcbiAgVXRpbCB9IGZyb21cbidkaXNjb3JkLXBsYXllcic7XG5pbXBvcnQgdHlwZSB7IEluY29taW5nTWVzc2FnZSB9IGZyb20gJ2h0dHAnO1xuaW1wb3J0IHsgY3JlYXRlUmVhZFN0cmVhbSwgZXhpc3RzU3luYyB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IGRvd25sb2FkU3RyZWFtIH0gZnJvbSAnLi4vaW50ZXJuYWwvZG93bmxvYWRlcic7XG5pbXBvcnQgKiBhcyBmaWxlVHlwZSBmcm9tICdmaWxlLXR5cGUnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBzdGF0IH0gZnJvbSAnZnMvcHJvbWlzZXMnO1xuXG5jb25zdCBBVFRBQ0hNRU5UX0hFQURFUiA9IFsnYXVkaW8vJywgJ3ZpZGVvLycsICdhcHBsaWNhdGlvbi9vZ2cnXSBhcyBjb25zdDtcblxuZXhwb3J0IGNsYXNzIEF0dGFjaG1lbnRFeHRyYWN0b3IgZXh0ZW5kcyBCYXNlRXh0cmFjdG9yIHtcbiAgcHVibGljIHN0YXRpYyBpZGVudGlmaWVyID0gJ2NvbS5kaXNjb3JkLXBsYXllci5hdHRhY2htZW50ZXh0cmFjdG9yJyBhcyBjb25zdDtcblxuICAvLyB1c2UgbG93ZXN0IHByaW9yaXR5IHRvIGF2b2lkIGNvbmZsaWN0IHdpdGggb3RoZXIgZXh0cmFjdG9yc1xuICBwdWJsaWMgcHJpb3JpdHkgPSAwO1xuXG4gIHB1YmxpYyBhc3luYyB2YWxpZGF0ZShcbiAgcXVlcnk6IHN0cmluZyxcbiAgdHlwZT86IFNlYXJjaFF1ZXJ5VHlwZSB8IG51bGwgfCB1bmRlZmluZWQpXG4gIDogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKHR5cGVvZiBxdWVyeSAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gKFtRdWVyeVR5cGUuQVJCSVRSQVJZLCBRdWVyeVR5cGUuRklMRV0gYXMgU2VhcmNoUXVlcnlUeXBlW10pLnNvbWUoXG4gICAgICAocikgPT4gciA9PT0gdHlwZVxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0UmVsYXRlZFRyYWNrcyh0cmFjazogVHJhY2spIHtcbiAgICB2b2lkIHRyYWNrO1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaGFuZGxlKFxuICBxdWVyeTogc3RyaW5nLFxuICBjb250ZXh0OiBFeHRyYWN0b3JTZWFyY2hDb250ZXh0KVxuICA6IFByb21pc2U8RXh0cmFjdG9ySW5mbz4ge1xuICAgIHN3aXRjaCAoY29udGV4dC50eXBlKSB7XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5BUkJJVFJBUlk6e1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSAoYXdhaXQgZG93bmxvYWRTdHJlYW0oXG4gICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgIGNvbnRleHQucmVxdWVzdE9wdGlvbnNcbiAgICAgICAgICApKSBhcyBJbmNvbWluZ01lc3NhZ2U7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICFBVFRBQ0hNRU5UX0hFQURFUi5zb21lKFxuICAgICAgICAgICAgKHIpID0+ICEhZGF0YS5oZWFkZXJzWydjb250ZW50LXR5cGUnXT8uc3RhcnRzV2l0aChyKVxuICAgICAgICAgICkpXG5cbiAgICAgICAgICByZXR1cm4gdGhpcy5lbXB0eVJlc3BvbnNlKCk7XG5cbiAgICAgICAgICBjb25zdCB0cmFja0luZm8gPSB7XG4gICAgICAgICAgICB0aXRsZTogKFxuICAgICAgICAgICAgcXVlcnkuXG4gICAgICAgICAgICBzcGxpdCgnLycpLlxuICAgICAgICAgICAgZmlsdGVyKCh4KSA9PiB4Lmxlbmd0aCkuXG4gICAgICAgICAgICBwb3AoKSA/PyAnQXR0YWNobWVudCcpLlxuXG4gICAgICAgICAgICBzcGxpdCgnPycpWzBdLlxuICAgICAgICAgICAgdHJpbSgpLFxuICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgICB0aHVtYm5haWw6XG4gICAgICAgICAgICAnaHR0cHM6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEvY29tbW9ucy8yLzJhL0lUdW5lc18xMi4yX2xvZ28ucG5nJyxcbiAgICAgICAgICAgIGVuZ2luZTogcXVlcnksXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICAgIGF1dGhvcjogKGRhdGEgYXMgYW55KS5jbGllbnQ/LnNlcnZlcm5hbWUgYXMgc3RyaW5nIHx8ICdBdHRhY2htZW50JyxcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAoZGF0YSBhcyBhbnkpLmNsaWVudD8uc2VydmVybmFtZSBhcyBzdHJpbmcgfHwgJ0F0dGFjaG1lbnQnLFxuICAgICAgICAgICAgdXJsOiBkYXRhLnVybCB8fCBxdWVyeVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgICAgICBjb25zdCBtZWRpYXBsZXggPSByZXF1aXJlKCdtZWRpYXBsZXgnKSBhcyB0eXBlb2YgaW1wb3J0KCdtZWRpYXBsZXgnKTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPSB0aGlzLmNvbnRleHQucGxheWVyLm9wdGlvbnMucHJvYmVUaW1lb3V0ID8/IDUwMDA7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgcmVzdWx0LCBzdHJlYW0gfSA9IChhd2FpdCBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgICAgbWVkaWFwbGV4LnByb2JlU3RyZWFtKGRhdGEpLFxuICAgICAgICAgICAgbmV3IFByb21pc2UoKF8sIHIpID0+IHtcbiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiByKG5ldyBFcnJvcignVGltZW91dCcpKSwgdGltZW91dCk7XG4gICAgICAgICAgICB9KV1cbiAgICAgICAgICAgICkpIGFzIEF3YWl0ZWQ8UmV0dXJuVHlwZTx0eXBlb2YgbWVkaWFwbGV4LnByb2JlU3RyZWFtPj47XG5cbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgdHJhY2tJbmZvLmR1cmF0aW9uID0gcmVzdWx0LmR1cmF0aW9uICogMTAwMDtcblxuICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IG1lZGlhcGxleC5yZWFkTWV0YWRhdGEocmVzdWx0KTtcbiAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhLmF1dGhvcikgdHJhY2tJbmZvLmF1dGhvciA9IG1ldGFkYXRhLmF1dGhvcjtcbiAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhLnRpdGxlKSB0cmFja0luZm8udGl0bGUgPSBtZXRhZGF0YS50aXRsZTtcblxuICAgICAgICAgICAgICB0cmFja0luZm8uZGVzY3JpcHRpb24gPSBgJHt0cmFja0luZm8udGl0bGV9IGJ5ICR7dHJhY2tJbmZvLmF1dGhvcn1gO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdHJlYW0uZGVzdHJveSgpO1xuICAgICAgICAgIH0gY2F0Y2gge1xuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB0cmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICB0aXRsZTogdHJhY2tJbmZvLnRpdGxlLFxuICAgICAgICAgICAgdXJsOiB0cmFja0luZm8udXJsLFxuICAgICAgICAgICAgZHVyYXRpb246IFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVModHJhY2tJbmZvLmR1cmF0aW9uKSksXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdHJhY2tJbmZvLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiB0cmFja0luZm8udGh1bWJuYWlsLFxuICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICBhdXRob3I6IHRyYWNrSW5mby5hdXRob3IsXG4gICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgIHNvdXJjZTogJ2FyYml0cmFyeScsXG4gICAgICAgICAgICBlbmdpbmU6IHRyYWNrSW5mby51cmwsXG4gICAgICAgICAgICBxdWVyeVR5cGU6IGNvbnRleHQudHlwZSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB0cmFja0luZm8sXG4gICAgICAgICAgICBhc3luYyByZXF1ZXN0TWV0YWRhdGEoKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cmFja0luZm87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0cmFjay5leHRyYWN0b3IgPSB0aGlzO1xuXG4gICAgICAgICAgdHJhY2sucmF3LmlzRmlsZSA9IGZhbHNlO1xuXG4gICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW3RyYWNrXSB9O1xuICAgICAgICB9XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5GSUxFOntcbiAgICAgICAgICBpZiAoIWV4aXN0c1N5bmMocXVlcnkpKSByZXR1cm4gdGhpcy5lbXB0eVJlc3BvbnNlKCk7XG4gICAgICAgICAgY29uc3QgZnN0YXQgPSBhd2FpdCBzdGF0KHF1ZXJ5KTtcbiAgICAgICAgICBpZiAoIWZzdGF0LmlzRmlsZSgpKSByZXR1cm4gdGhpcy5lbXB0eVJlc3BvbnNlKCk7XG4gICAgICAgICAgY29uc3QgbWltZSA9IGF3YWl0IGZpbGVUeXBlLmZyb21GaWxlKHF1ZXJ5KS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgICAgICAgICBpZiAoIW1pbWUgfHwgIUFUVEFDSE1FTlRfSEVBREVSLnNvbWUoKHIpID0+ICEhbWltZS5taW1lLnN0YXJ0c1dpdGgocikpKVxuICAgICAgICAgIHJldHVybiB0aGlzLmVtcHR5UmVzcG9uc2UoKTtcblxuICAgICAgICAgIGNvbnN0IHRyYWNrSW5mbyA9IHtcbiAgICAgICAgICAgIHRpdGxlOiBwYXRoLmJhc2VuYW1lKHF1ZXJ5KSB8fCAnQXR0YWNobWVudCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICAgIHRodW1ibmFpbDpcbiAgICAgICAgICAgICdodHRwczovL3VwbG9hZC53aWtpbWVkaWEub3JnL3dpa2lwZWRpYS9jb21tb25zLzIvMmEvSVR1bmVzXzEyLjJfbG9nby5wbmcnLFxuICAgICAgICAgICAgZW5naW5lOiBxdWVyeSxcbiAgICAgICAgICAgIGF1dGhvcjogJ0F0dGFjaG1lbnQnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdBdHRhY2htZW50JyxcbiAgICAgICAgICAgIHVybDogcXVlcnlcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgY29uc3QgbWVkaWFwbGV4ID0gcmVxdWlyZSgnbWVkaWFwbGV4JykgYXMgdHlwZW9mIGltcG9ydCgnbWVkaWFwbGV4Jyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPSB0aGlzLmNvbnRleHQucGxheWVyLm9wdGlvbnMucHJvYmVUaW1lb3V0ID8/IDUwMDA7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgcmVzdWx0LCBzdHJlYW0gfSA9IChhd2FpdCBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgICAgbWVkaWFwbGV4LnByb2JlU3RyZWFtKFxuICAgICAgICAgICAgICBjcmVhdGVSZWFkU3RyZWFtKHF1ZXJ5LCB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgICAgICAgICAgZW5kOiAxMDI0ICogMTAyNCAqIDEwXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgbmV3IFByb21pc2UoKF8sIHIpID0+IHtcbiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiByKG5ldyBFcnJvcignVGltZW91dCcpKSwgdGltZW91dCk7XG4gICAgICAgICAgICB9KV1cbiAgICAgICAgICAgICkpIGFzIEF3YWl0ZWQ8UmV0dXJuVHlwZTx0eXBlb2YgbWVkaWFwbGV4LnByb2JlU3RyZWFtPj47XG5cbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgdHJhY2tJbmZvLmR1cmF0aW9uID0gcmVzdWx0LmR1cmF0aW9uICogMTAwMDtcblxuICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IG1lZGlhcGxleC5yZWFkTWV0YWRhdGEocmVzdWx0KTtcbiAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhLmF1dGhvcikgdHJhY2tJbmZvLmF1dGhvciA9IG1ldGFkYXRhLmF1dGhvcjtcbiAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhLnRpdGxlKSB0cmFja0luZm8udGl0bGUgPSBtZXRhZGF0YS50aXRsZTtcblxuICAgICAgICAgICAgICB0cmFja0luZm8uZGVzY3JpcHRpb24gPSBgJHt0cmFja0luZm8udGl0bGV9IGJ5ICR7dHJhY2tJbmZvLmF1dGhvcn1gO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdHJlYW0uZGVzdHJveSgpO1xuICAgICAgICAgIH0gY2F0Y2gge1xuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB0cmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICB0aXRsZTogdHJhY2tJbmZvLnRpdGxlLFxuICAgICAgICAgICAgdXJsOiB0cmFja0luZm8udXJsLFxuICAgICAgICAgICAgZHVyYXRpb246IFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVModHJhY2tJbmZvLmR1cmF0aW9uKSksXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdHJhY2tJbmZvLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiB0cmFja0luZm8udGh1bWJuYWlsLFxuICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICBhdXRob3I6IHRyYWNrSW5mby5hdXRob3IsXG4gICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgIHNvdXJjZTogJ2FyYml0cmFyeScsXG4gICAgICAgICAgICBlbmdpbmU6IHRyYWNrSW5mby51cmwsXG4gICAgICAgICAgICBxdWVyeVR5cGU6IGNvbnRleHQudHlwZSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB0cmFja0luZm8sXG4gICAgICAgICAgICBhc3luYyByZXF1ZXN0TWV0YWRhdGEoKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cmFja0luZm87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0cmFjay5leHRyYWN0b3IgPSB0aGlzO1xuXG4gICAgICAgICAgdHJhY2sucmF3LmlzRmlsZSA9IHRydWU7XG5cbiAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbdHJhY2tdIH07XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0aGlzLmVtcHR5UmVzcG9uc2UoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZW1wdHlSZXNwb25zZSgpOiBFeHRyYWN0b3JJbmZvIHtcbiAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbXSB9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHN0cmVhbShpbmZvOiBUcmFjaykge1xuICAgIGNvbnN0IGVuZ2luZSA9IGluZm8ucmF3LmVuZ2luZSBhcyBzdHJpbmc7XG5cbiAgICBjb25zdCBpc0ZpbGUgPSBpbmZvLnJhdy5pc0ZpbGUgYXMgYm9vbGVhbjtcblxuICAgIGlmICghZW5naW5lKSB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBmaW5kIHN0cmVhbSBzb3VyY2UnKTtcblxuICAgIGlmICghaXNGaWxlKSB7XG4gICAgICByZXR1cm4gZW5naW5lO1xuICAgICAgLy8gcmV0dXJuIGF3YWl0IGRvd25sb2FkU3RyZWFtKGVuZ2luZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNyZWF0ZVJlYWRTdHJlYW0oZW5naW5lKTtcbiAgfVxufSIsICJpbXBvcnQgaHR0cCwgeyBSZXF1ZXN0T3B0aW9ucyB9IGZyb20gJ2h0dHAnO1xuaW1wb3J0IGh0dHBzIGZyb20gJ2h0dHBzJztcbmltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSAnc3RyZWFtJztcblxuZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkU3RyZWFtKHVybDogc3RyaW5nLCBvcHRzOiBSZXF1ZXN0T3B0aW9ucyA9IHt9KSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZTxSZWFkYWJsZT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGxpYiA9IHVybC5zdGFydHNXaXRoKCdodHRwOi8vJykgPyBodHRwIDogaHR0cHM7XG5cbiAgICBsaWIuZ2V0KHVybCwgb3B0cywgKHJlcykgPT4gcmVzb2x2ZShyZXMpKS5vbmNlKCdlcnJvcicsIHJlamVjdCk7XG4gIH0pO1xufSIsICJpbXBvcnQge1xuICBFeHRyYWN0b3JJbmZvLFxuICBFeHRyYWN0b3JTZWFyY2hDb250ZXh0LFxuICBFeHRyYWN0b3JTdHJlYW1hYmxlLFxuICBHdWlsZFF1ZXVlSGlzdG9yeSxcbiAgUGxheWxpc3QsXG4gIFF1ZXJ5VHlwZSxcbiAgU2VhcmNoUXVlcnlUeXBlLFxuICBUcmFjayxcbiAgVXRpbCxcbiAgQmFzZUV4dHJhY3RvciB9IGZyb21cbidkaXNjb3JkLXBsYXllcic7XG5pbXBvcnQgeyBBcHBsZU11c2ljIH0gZnJvbSAnLi4vaW50ZXJuYWwnO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tICdzdHJlYW0nO1xuaW1wb3J0IHsgU3RyZWFtRk4gfSBmcm9tICcuLi90eXBlcy9jb21tb24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFwcGxlTXVzaWNFeHRyYWN0b3JJbml0IHtcbiAgY3JlYXRlU3RyZWFtPzogKFxuICBleHQ6IEFwcGxlTXVzaWNFeHRyYWN0b3IsXG4gIHVybDogc3RyaW5nLFxuICB0cmFjazogVHJhY2spXG4gID0+IFByb21pc2U8UmVhZGFibGUgfCBzdHJpbmc+O1xufVxuXG5leHBvcnQgY2xhc3MgQXBwbGVNdXNpY0V4dHJhY3RvciBleHRlbmRzIEJhc2VFeHRyYWN0b3I8QXBwbGVNdXNpY0V4dHJhY3RvckluaXQ+IHtcbiAgcHVibGljIHN0YXRpYyBpZGVudGlmaWVyID0gJ2NvbS5kaXNjb3JkLXBsYXllci5hcHBsZW11c2ljZXh0cmFjdG9yJyBhcyBjb25zdDtcbiAgcHJpdmF0ZSBfc3RyZWFtITogU3RyZWFtRk47XG5cbiAgcHVibGljIGFzeW5jIGFjdGl2YXRlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMucHJvdG9jb2xzID0gWydhbXNlYXJjaCcsICdhcHBsZW11c2ljJ107XG4gICAgY29uc3QgZm4gPSB0aGlzLm9wdGlvbnMuY3JlYXRlU3RyZWFtO1xuXG4gICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fc3RyZWFtID0gKHE6IHN0cmluZywgdDogVHJhY2spID0+IHtcbiAgICAgICAgcmV0dXJuIGZuKHRoaXMsIHEsIHQpO1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZGVhY3RpdmF0ZSgpIHtcbiAgICB0aGlzLnByb3RvY29scyA9IFtdO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHZhbGlkYXRlKFxuICBxdWVyeTogc3RyaW5nLFxuICB0eXBlPzogU2VhcmNoUXVlcnlUeXBlIHwgbnVsbCB8IHVuZGVmaW5lZClcbiAgOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICByZXR1cm4gKDxTZWFyY2hRdWVyeVR5cGVbXT4gW1xuICAgIFF1ZXJ5VHlwZS5BUFBMRV9NVVNJQ19BTEJVTSxcbiAgICBRdWVyeVR5cGUuQVBQTEVfTVVTSUNfUExBWUxJU1QsXG4gICAgUXVlcnlUeXBlLkFQUExFX01VU0lDX1NPTkcsXG4gICAgUXVlcnlUeXBlLkFQUExFX01VU0lDX1NFQVJDSCxcbiAgICBRdWVyeVR5cGUuQVVUTyxcbiAgICBRdWVyeVR5cGUuQVVUT19TRUFSQ0hdKS5cbiAgICBzb21lKCh0KSA9PiB0ID09PSB0eXBlKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRSZWxhdGVkVHJhY2tzKHRyYWNrOiBUcmFjaywgaGlzdG9yeTogR3VpbGRRdWV1ZUhpc3RvcnkpIHtcbiAgICBpZiAodHJhY2sucXVlcnlUeXBlID09PSBRdWVyeVR5cGUuQVBQTEVfTVVTSUNfU09ORykge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuaGFuZGxlKHRyYWNrLmF1dGhvciB8fCB0cmFjay50aXRsZSwge1xuICAgICAgICB0eXBlOiBRdWVyeVR5cGUuQVBQTEVfTVVTSUNfU0VBUkNILFxuICAgICAgICByZXF1ZXN0ZWRCeTogdHJhY2sucmVxdWVzdGVkQnlcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1bmlxdWUgPSBkYXRhLnRyYWNrcy5maWx0ZXIoXG4gICAgICAgICh0KSA9PiAhaGlzdG9yeS50cmFja3Muc29tZSgoaCkgPT4gaC51cmwgPT09IHQudXJsKVxuICAgICAgKTtcbiAgICAgIHJldHVybiB1bmlxdWUubGVuZ3RoID4gMCA/XG4gICAgICB0aGlzLmNyZWF0ZVJlc3BvbnNlKG51bGwsIHVuaXF1ZSkgOlxuICAgICAgdGhpcy5jcmVhdGVSZXNwb25zZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaGFuZGxlKFxuICBxdWVyeTogc3RyaW5nLFxuICBjb250ZXh0OiBFeHRyYWN0b3JTZWFyY2hDb250ZXh0KVxuICA6IFByb21pc2U8RXh0cmFjdG9ySW5mbz4ge1xuICAgIGlmIChjb250ZXh0LnByb3RvY29sID09PSAnYW1zZWFyY2gnKVxuICAgIGNvbnRleHQudHlwZSA9IFF1ZXJ5VHlwZS5BUFBMRV9NVVNJQ19TRUFSQ0g7XG5cbiAgICBzd2l0Y2ggKGNvbnRleHQudHlwZSkge1xuICAgICAgY2FzZSBRdWVyeVR5cGUuQVVUTzpcbiAgICAgIGNhc2UgUXVlcnlUeXBlLkFVVE9fU0VBUkNIOlxuICAgICAgY2FzZSBRdWVyeVR5cGUuQVBQTEVfTVVTSUNfU0VBUkNIOntcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgQXBwbGVNdXNpYy5zZWFyY2gocXVlcnkpO1xuICAgICAgICAgIGlmICghZGF0YSB8fCAhZGF0YS5sZW5ndGgpIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKCk7XG4gICAgICAgICAgY29uc3QgdHJhY2tzID0gZGF0YS5tYXAoXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgKG06IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB0cmFjazogVHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgICAgIGF1dGhvcjogbS5hcnRpc3QubmFtZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbS50aXRsZSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjpcbiAgICAgICAgICAgICAgICB0eXBlb2YgbS5kdXJhdGlvbiA9PT0gJ251bWJlcicgP1xuICAgICAgICAgICAgICAgIFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVMobS5kdXJhdGlvbikpIDpcbiAgICAgICAgICAgICAgICBtLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHRodW1ibmFpbDogbS50aHVtYm5haWwsXG4gICAgICAgICAgICAgICAgdGl0bGU6IG0udGl0bGUsXG4gICAgICAgICAgICAgICAgdXJsOiBtLnVybCxcbiAgICAgICAgICAgICAgICB2aWV3czogMCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdhcHBsZV9tdXNpYycsXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICAgICAgcXVlcnlUeXBlOiAnYXBwbGVNdXNpY1NvbmcnLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBzb3VyY2U6IG0sXG4gICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRhZGF0YTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBtLFxuICAgICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICB0cmFjay5leHRyYWN0b3IgPSB0aGlzO1xuXG4gICAgICAgICAgICAgIHJldHVybiB0cmFjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlUmVzcG9uc2UobnVsbCwgdHJhY2tzKTtcbiAgICAgICAgfVxuICAgICAgY2FzZSBRdWVyeVR5cGUuQVBQTEVfTVVTSUNfQUxCVU06e1xuICAgICAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCBBcHBsZU11c2ljLmdldEFsYnVtSW5mbyhxdWVyeSk7XG4gICAgICAgICAgaWYgKCFpbmZvKSByZXR1cm4gdGhpcy5jcmVhdGVSZXNwb25zZSgpO1xuXG4gICAgICAgICAgY29uc3QgcGxheWxpc3QgPSBuZXcgUGxheWxpc3QodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgYXV0aG9yOiB7XG4gICAgICAgICAgICAgIG5hbWU6IGluZm8uYXJ0aXN0Lm5hbWUsXG4gICAgICAgICAgICAgIHVybDogJydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogaW5mby50aXRsZSxcbiAgICAgICAgICAgIGlkOiBpbmZvLmlkLFxuICAgICAgICAgICAgc291cmNlOiAnYXBwbGVfbXVzaWMnLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiBpbmZvLnRodW1ibmFpbCxcbiAgICAgICAgICAgIHRpdGxlOiBpbmZvLnRpdGxlLFxuICAgICAgICAgICAgdHJhY2tzOiBbXSxcbiAgICAgICAgICAgIHR5cGU6ICdhbGJ1bScsXG4gICAgICAgICAgICB1cmw6IGluZm8udXJsLFxuICAgICAgICAgICAgcmF3UGxheWxpc3Q6IGluZm9cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHBsYXlsaXN0LnRyYWNrcyA9IGluZm8udHJhY2tzLm1hcChcbiAgICAgICAgICAgIChcbiAgICAgICAgICAgIG0gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAgOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgdHJhY2s6IFRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgICBhdXRob3I6IG0uYXJ0aXN0Lm5hbWUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG0udGl0bGUsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246XG4gICAgICAgICAgICAgICAgdHlwZW9mIG0uZHVyYXRpb24gPT09ICdudW1iZXInID9cbiAgICAgICAgICAgICAgICBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKG0uZHVyYXRpb24pKSA6XG4gICAgICAgICAgICAgICAgbS5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICB0aHVtYm5haWw6IG0udGh1bWJuYWlsLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBtLnRpdGxlLFxuICAgICAgICAgICAgICAgIHVybDogbS51cmwsXG4gICAgICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICAgICAgc291cmNlOiAnYXBwbGVfbXVzaWMnLFxuICAgICAgICAgICAgICAgIHJlcXVlc3RlZEJ5OiBjb250ZXh0LnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgICAgIHF1ZXJ5VHlwZTogJ2FwcGxlTXVzaWNTb25nJyxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgc291cmNlOiBpbmZvLFxuICAgICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogaW5mbyxcbiAgICAgICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHRyYWNrLnBsYXlsaXN0ID0gcGxheWxpc3Q7XG4gICAgICAgICAgICAgIHRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG4gICAgICAgICAgICAgIHJldHVybiB0cmFjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3QsIHRyYWNrczogcGxheWxpc3QudHJhY2tzIH07XG4gICAgICAgIH1cbiAgICAgIGNhc2UgUXVlcnlUeXBlLkFQUExFX01VU0lDX1BMQVlMSVNUOntcbiAgICAgICAgICBjb25zdCBpbmZvID0gYXdhaXQgQXBwbGVNdXNpYy5nZXRQbGF5bGlzdEluZm8ocXVlcnkpO1xuICAgICAgICAgIGlmICghaW5mbykgcmV0dXJuIHRoaXMuY3JlYXRlUmVzcG9uc2UoKTtcblxuICAgICAgICAgIGNvbnN0IHBsYXlsaXN0ID0gbmV3IFBsYXlsaXN0KHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgIGF1dGhvcjoge1xuICAgICAgICAgICAgICBuYW1lOiBpbmZvLmFydGlzdC5uYW1lLFxuICAgICAgICAgICAgICB1cmw6ICcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGluZm8udGl0bGUsXG4gICAgICAgICAgICBpZDogaW5mby5pZCxcbiAgICAgICAgICAgIHNvdXJjZTogJ2FwcGxlX211c2ljJyxcbiAgICAgICAgICAgIHRodW1ibmFpbDogaW5mby50aHVtYm5haWwsXG4gICAgICAgICAgICB0aXRsZTogaW5mby50aXRsZSxcbiAgICAgICAgICAgIHRyYWNrczogW10sXG4gICAgICAgICAgICB0eXBlOiAncGxheWxpc3QnLFxuICAgICAgICAgICAgdXJsOiBpbmZvLnVybCxcbiAgICAgICAgICAgIHJhd1BsYXlsaXN0OiBpbmZvXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBwbGF5bGlzdC50cmFja3MgPSBpbmZvLnRyYWNrcy5tYXAoXG4gICAgICAgICAgICAoXG4gICAgICAgICAgICBtIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAgIDogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHRyYWNrOiBUcmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICAgICAgYXV0aG9yOiBtLmFydGlzdC5uYW1lLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtLnRpdGxlLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOlxuICAgICAgICAgICAgICAgIHR5cGVvZiBtLmR1cmF0aW9uID09PSAnbnVtYmVyJyA/XG4gICAgICAgICAgICAgICAgVXRpbC5idWlsZFRpbWVDb2RlKFV0aWwucGFyc2VNUyhtLmR1cmF0aW9uKSkgOlxuICAgICAgICAgICAgICAgIG0uZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgdGh1bWJuYWlsOiBtLnRodW1ibmFpbCxcbiAgICAgICAgICAgICAgICB0aXRsZTogbS50aXRsZSxcbiAgICAgICAgICAgICAgICB1cmw6IG0udXJsLFxuICAgICAgICAgICAgICAgIHZpZXdzOiAwLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ2FwcGxlX211c2ljJyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgICAgICBxdWVyeVR5cGU6ICdhcHBsZU11c2ljU29uZycsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgIHNvdXJjZTogbSxcbiAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG0sXG4gICAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIHRyYWNrLnBsYXlsaXN0ID0gcGxheWxpc3Q7XG4gICAgICAgICAgICAgIHRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdCwgdHJhY2tzOiBwbGF5bGlzdC50cmFja3MgfTtcbiAgICAgICAgfVxuICAgICAgY2FzZSBRdWVyeVR5cGUuQVBQTEVfTVVTSUNfU09ORzp7XG4gICAgICAgICAgY29uc3QgaW5mbyA9IGF3YWl0IEFwcGxlTXVzaWMuZ2V0U29uZ0luZm8ocXVlcnkpO1xuICAgICAgICAgIGlmICghaW5mbykgcmV0dXJuIHRoaXMuY3JlYXRlUmVzcG9uc2UoKTtcblxuICAgICAgICAgIGNvbnN0IHRyYWNrOiBUcmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICBhdXRob3I6IGluZm8uYXJ0aXN0Lm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogaW5mby50aXRsZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOlxuICAgICAgICAgICAgdHlwZW9mIGluZm8uZHVyYXRpb24gPT09ICdudW1iZXInID9cbiAgICAgICAgICAgIFV0aWwuYnVpbGRUaW1lQ29kZShVdGlsLnBhcnNlTVMoaW5mby5kdXJhdGlvbikpIDpcbiAgICAgICAgICAgIGluZm8uZHVyYXRpb24sXG4gICAgICAgICAgICB0aHVtYm5haWw6IGluZm8udGh1bWJuYWlsLFxuICAgICAgICAgICAgdGl0bGU6IGluZm8udGl0bGUsXG4gICAgICAgICAgICB1cmw6IGluZm8udXJsLFxuICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICBzb3VyY2U6ICdhcHBsZV9tdXNpYycsXG4gICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgIHF1ZXJ5VHlwZTogY29udGV4dC50eXBlLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgc291cmNlOiBpbmZvLFxuICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzb3VyY2U6IGluZm8sXG4gICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0cmFjay5leHRyYWN0b3IgPSB0aGlzO1xuXG4gICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW3RyYWNrXSB9O1xuICAgICAgICB9XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbXSB9O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzdHJlYW0oaW5mbzogVHJhY2spOiBQcm9taXNlPEV4dHJhY3RvclN0cmVhbWFibGU+IHtcbiAgICBpZiAodGhpcy5fc3RyZWFtKSB7XG4gICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLl9zdHJlYW0oaW5mby51cmwsIGluZm8pO1xuICAgICAgaWYgKHR5cGVvZiBzdHJlYW0gPT09ICdzdHJpbmcnKSByZXR1cm4gc3RyZWFtO1xuICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICB9XG5cbiAgICAvLyBuZXcgYXBpXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jb250ZXh0LnJlcXVlc3RCcmlkZ2UoaW5mbywgdGhpcyk7XG5cbiAgICBpZiAoIXJlc3VsdD8ucmVzdWx0KSB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBicmlkZ2UgdGhpcyB0cmFjaycpO1xuXG4gICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gIH1cbn0iLCAiZXhwb3J0ICogZnJvbSAnLi9BcHBsZU11c2ljJztcbmV4cG9ydCAqIGZyb20gJy4vVmltZW8nO1xuZXhwb3J0ICogZnJvbSAnLi9kb3dubG9hZGVyJztcbmV4cG9ydCAqIGZyb20gJy4vU3BvdGlmeSc7IiwgIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbmltcG9ydCB7IFF1ZXJ5UmVzb2x2ZXIgfSBmcm9tICdkaXNjb3JkLXBsYXllcic7XG5pbXBvcnQgeyBwYXJzZSwgSFRNTEVsZW1lbnQgfSBmcm9tICdub2RlLWh0bWwtcGFyc2VyJztcbmltcG9ydCB7IFVBLCBmZXRjaCB9IGZyb20gJy4vaGVscGVyJztcblxuZnVuY3Rpb24gZ2V0SFRNTChsaW5rOiBzdHJpbmcpOiBQcm9taXNlPEhUTUxFbGVtZW50IHwgbnVsbD4ge1xuICByZXR1cm4gZmV0Y2gobGluaywge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgICdVc2VyLUFnZW50JzogVUFcbiAgICB9XG4gIH0pLlxuICB0aGVuKChyKSA9PiByLnRleHQoKSkuXG4gIHRoZW4oXG4gICAgKHR4dCkgPT4gcGFyc2UodHh0KSxcbiAgICAoKSA9PiBudWxsXG4gICk7XG59XG5cbmZ1bmN0aW9uIG1ha2VJbWFnZSh7XG4gIGhlaWdodCxcbiAgdXJsLFxuICB3aWR0aCxcbiAgZXh0ID0gJ2pwZydcblxuXG5cblxuXG59OiB7dXJsOiBzdHJpbmc7d2lkdGg6IG51bWJlcjtoZWlnaHQ6IG51bWJlcjtleHQ/OiBzdHJpbmc7fSkge1xuICByZXR1cm4gdXJsLlxuICByZXBsYWNlKCd7d30nLCBgJHt3aWR0aH1gKS5cbiAgcmVwbGFjZSgne2h9JywgYCR7aGVpZ2h0fWApLlxuICByZXBsYWNlKCd7Zn0nLCBleHQpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUR1cmF0aW9uKGQ6IHN0cmluZykge1xuICBjb25zdCByID0gKG5hbWU6IHN0cmluZywgdW5pdDogc3RyaW5nKSA9PlxuICBgKCg/PCR7bmFtZX0+LT9cXFxcZCpbXFxcXC4sXT9cXFxcZCspJHt1bml0fSk/YDtcbiAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKFxuICAgIFtcbiAgICAnKD88bmVnYXRpdmU+LSk/UCcsXG4gICAgcigneWVhcnMnLCAnWScpLFxuICAgIHIoJ21vbnRocycsICdNJyksXG4gICAgcignd2Vla3MnLCAnVycpLFxuICAgIHIoJ2RheXMnLCAnRCcpLFxuICAgICcoVCcsXG4gICAgcignaG91cnMnLCAnSCcpLFxuICAgIHIoJ21pbnV0ZXMnLCAnTScpLFxuICAgIHIoJ3NlY29uZHMnLCAnUycpLFxuICAgICcpPycgLy8gZW5kIG9wdGlvbmFsIHRpbWVcbiAgICBdLmpvaW4oJycpXG4gICk7XG4gIGNvbnN0IHRlc3QgPSByZWdleC5leGVjKGQpO1xuICBpZiAoIXRlc3QgfHwgIXRlc3QuZ3JvdXBzKSByZXR1cm4gJzA6MDAnO1xuXG4gIGNvbnN0IGR1ciA9IFtcbiAgdGVzdC5ncm91cHMueWVhcnMsXG4gIHRlc3QuZ3JvdXBzLm1vbnRocyxcbiAgdGVzdC5ncm91cHMud2Vla3MsXG4gIHRlc3QuZ3JvdXBzLmRheXMsXG4gIHRlc3QuZ3JvdXBzLmhvdXJzLFxuICB0ZXN0Lmdyb3Vwcy5taW51dGVzLFxuICB0ZXN0Lmdyb3Vwcy5zZWNvbmRzXTtcblxuXG4gIHJldHVybiAoXG4gICAgZHVyLlxuICAgIGZpbHRlcigociwgaSwgYSkgPT4gISFyIHx8IGkgPiBhLmxlbmd0aCAtIDIpLlxuICAgIG1hcCgobSwgaSkgPT4ge1xuICAgICAgaWYgKCFtKSBtID0gJzAnO1xuICAgICAgcmV0dXJuIGkgPCAxID8gbSA6IG0ucGFkU3RhcnQoMiwgJzAnKTtcbiAgICB9KS5cbiAgICBqb2luKCc6JykgfHwgJzA6MDAnKTtcblxufVxuXG5leHBvcnQgY2xhc3MgQXBwbGVNdXNpYyB7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICByZXR1cm4gQXBwbGVNdXNpYztcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgc2VhcmNoKHF1ZXJ5OiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gYGh0dHBzOi8vbXVzaWMuYXBwbGUuY29tL3VzL3NlYXJjaD90ZXJtPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICBxdWVyeVxuICAgICAgKX1gO1xuICAgICAgY29uc3Qgbm9kZSA9IGF3YWl0IGdldEhUTUwodXJsKTtcbiAgICAgIGlmICghbm9kZSkgcmV0dXJuIFtdO1xuXG4gICAgICBjb25zdCByYXdEYXRhID0gbm9kZS5nZXRFbGVtZW50QnlJZCgnc2VyaWFsaXplZC1zZXJ2ZXItZGF0YScpO1xuICAgICAgaWYgKCFyYXdEYXRhKSByZXR1cm4gW107XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHJhd0RhdGEuaW5uZXJUZXh0KVswXS5kYXRhLnNlY3Rpb25zO1xuICAgICAgY29uc3QgdHJhY2tzID0gZGF0YS5maW5kKChzOiBhbnkpID0+IHMuaXRlbUtpbmQgPT09ICd0cmFja0xvY2t1cCcpPy5pdGVtcztcbiAgICAgIGlmICghdHJhY2tzKSByZXR1cm4gW107XG5cbiAgICAgIHJldHVybiB0cmFja3MubWFwKCh0cmFjazogYW55KSA9PiAoe1xuICAgICAgICBpZDogdHJhY2suY29udGVudERlc2NyaXB0b3IuaWRlbnRpZmllcnMuc3RvcmVBZGFtSUQsXG4gICAgICAgIGR1cmF0aW9uOiB0cmFjay5kdXJhdGlvbiB8fCAnMDowMCcsXG4gICAgICAgIHRpdGxlOiB0cmFjay50aXRsZSxcbiAgICAgICAgdXJsOiB0cmFjay5jb250ZW50RGVzY3JpcHRvci51cmwsXG4gICAgICAgIHRodW1ibmFpbDogdHJhY2s/LmFydHdvcms/LmRpY3Rpb25hcnkgP1xuICAgICAgICBtYWtlSW1hZ2Uoe1xuICAgICAgICAgIHVybDogdHJhY2suYXJ0d29yay5kaWN0aW9uYXJ5LnVybCxcbiAgICAgICAgICBoZWlnaHQ6IHRyYWNrLmFydHdvcmsuZGljdGlvbmFyeS5oZWlnaHQsXG4gICAgICAgICAgd2lkdGg6IHRyYWNrLmFydHdvcmsuZGljdGlvbmFyeS53aWR0aFxuICAgICAgICB9KSA6XG4gICAgICAgICdodHRwczovL211c2ljLmFwcGxlLmNvbS9hc3NldHMvZmF2aWNvbi9mYXZpY29uLTE4MC5wbmcnLFxuICAgICAgICBhcnRpc3Q6IHtcbiAgICAgICAgICBuYW1lOiB0cmFjay5zdWJ0aXRsZUxpbmtzPy5bMF0/LnRpdGxlID8/ICdVbmtub3duIEFydGlzdCdcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0U29uZ0luZm9GYWxsYmFjayhcbiAgcmVzOiBIVE1MRWxlbWVudCxcbiAgbmFtZTogc3RyaW5nLFxuICBpZDogc3RyaW5nLFxuICBsaW5rOiBzdHJpbmcpXG4gIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbWV0YVRhZ3MgPSByZXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ21ldGEnKTtcbiAgICAgIGlmICghbWV0YVRhZ3MubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgdGl0bGUgPVxuICAgICAgbWV0YVRhZ3MuXG4gICAgICBmaW5kKChyKSA9PiByLmdldEF0dHJpYnV0ZSgnbmFtZScpID09PSAnYXBwbGU6dGl0bGUnKT8uXG4gICAgICBnZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKSB8fFxuICAgICAgcmVzLnF1ZXJ5U2VsZWN0b3IoJ3RpdGxlJyk/LmlubmVyVGV4dCB8fFxuICAgICAgbmFtZTtcbiAgICAgIGNvbnN0IGNvbnRlbnRJZCA9XG4gICAgICBtZXRhVGFncy5cbiAgICAgIGZpbmQoKHIpID0+IHIuZ2V0QXR0cmlidXRlKCduYW1lJykgPT09ICdhcHBsZTpjb250ZW50X2lkJyk/LlxuICAgICAgZ2V0QXR0cmlidXRlKCdjb250ZW50JykgfHwgaWQ7XG4gICAgICBjb25zdCBkdXJhdGlvblJhdyA9IG1ldGFUYWdzLlxuICAgICAgZmluZCgocikgPT4gci5nZXRBdHRyaWJ1dGUoJ3Byb3BlcnR5JykgPT09ICdtdXNpYzpzb25nOmR1cmF0aW9uJyk/LlxuICAgICAgZ2V0QXR0cmlidXRlKCdjb250ZW50Jyk7XG5cbiAgICAgIGNvbnN0IHNvbmcgPSB7XG4gICAgICAgIGlkOiBjb250ZW50SWQsXG4gICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvblJhdyA/XG4gICAgICAgIHBhcnNlRHVyYXRpb24oZHVyYXRpb25SYXcpIDpcbiAgICAgICAgbWV0YVRhZ3MuXG4gICAgICAgIGZpbmQoKG0pID0+IG0uZ2V0QXR0cmlidXRlKCduYW1lJykgPT09ICdhcHBsZTpkZXNjcmlwdGlvbicpPy5cbiAgICAgICAgdGV4dENvbnRlbnQuc3BsaXQoJ0R1cmF0aW9uOiAnKT8uWzFdLlxuICAgICAgICBzcGxpdCgnXCInKT8uWzBdIHx8ICcwOjAwJyxcbiAgICAgICAgdGl0bGUsXG4gICAgICAgIHVybDogbGluayxcbiAgICAgICAgdGh1bWJuYWlsOlxuICAgICAgICBtZXRhVGFncy5cbiAgICAgICAgZmluZCgocikgPT5cbiAgICAgICAgWydvZzppbWFnZTpzZWN1cmVfdXJsJywgJ29nOmltYWdlJ10uaW5jbHVkZXMoXG4gICAgICAgICAgci5nZXRBdHRyaWJ1dGUoJ3Byb3BlcnR5JykhXG4gICAgICAgIClcbiAgICAgICAgKT8uXG4gICAgICAgIGdldEF0dHJpYnV0ZSgnY29udGVudCcpIHx8XG4gICAgICAgICdodHRwczovL211c2ljLmFwcGxlLmNvbS9hc3NldHMvZmF2aWNvbi9mYXZpY29uLTE4MC5wbmcnLFxuICAgICAgICBhcnRpc3Q6IHtcbiAgICAgICAgICBuYW1lOlxuICAgICAgICAgIHJlcy5cbiAgICAgICAgICBxdWVyeVNlbGVjdG9yKCcuc29uZy1zdWJ0aXRsZXNfX2FydGlzdHM+YScpPy5cbiAgICAgICAgICB0ZXh0Q29udGVudD8udHJpbSgpIHx8ICdBcHBsZSBNdXNpYydcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHNvbmc7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFNvbmdJbmZvKGxpbms6IHN0cmluZykge1xuICAgIGlmICghUXVlcnlSZXNvbHZlci5yZWdleC5hcHBsZU11c2ljU29uZ1JlZ2V4LnRlc3QobGluaykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwobGluayk7XG4gICAgY29uc3QgaWQgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnaScpO1xuICAgIGNvbnN0IG5hbWUgPSB1cmwucGF0aG5hbWUuc3BsaXQoJ2FsYnVtLycpWzFdPy5zcGxpdCgnLycpWzBdO1xuXG4gICAgaWYgKCFpZCB8fCAhbmFtZSkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRIVE1MKGBodHRwczovL211c2ljLmFwcGxlLmNvbS91cy9zb25nLyR7bmFtZX0vJHtpZH1gKTtcbiAgICBpZiAoIXJlcykgcmV0dXJuIG51bGw7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YXNyYyA9XG4gICAgICByZXMuZ2V0RWxlbWVudEJ5SWQoJ3NlcmlhbGl6ZWQtc2VydmVyLWRhdGEnKT8uaW5uZXJUZXh0IHx8XG4gICAgICByZXMuaW5uZXJUZXh0LlxuICAgICAgc3BsaXQoXG4gICAgICAgICc8c2NyaXB0IHR5cGU9XCJhcHBsaWNhdGlvbi9qc29uXCIgaWQ9XCJzZXJpYWxpemVkLXNlcnZlci1kYXRhXCI+J1xuICAgICAgKT8uWzFdPy5cbiAgICAgIHNwbGl0KCc8L3NjcmlwdD4nKT8uWzBdO1xuICAgICAgaWYgKCFkYXRhc3JjKSB0aHJvdyAnbm90IGZvdW5kJztcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFzcmMpWzBdLmRhdGEuc2VvRGF0YTtcbiAgICAgIGNvbnN0IHNvbmcgPSBkYXRhLm9nU29uZ3NbMF0/LmF0dHJpYnV0ZXM7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBkYXRhLm9nU29uZ3NbMF0/LmlkIHx8IGRhdGEuYXBwbGVDb250ZW50SWQgfHwgaWQsXG4gICAgICAgIGR1cmF0aW9uOiBzb25nPy5kdXJhdGlvbkluTWlsbGlzIHx8ICcwOjAwJyxcbiAgICAgICAgdGl0bGU6IHNvbmc/Lm5hbWUgfHwgZGF0YS5hcHBsZVRpdGxlLFxuICAgICAgICB1cmw6IHNvbmc/LnVybCB8fCBkYXRhLnVybCB8fCBsaW5rLFxuICAgICAgICB0aHVtYm5haWw6IHNvbmc/LmFydHdvcmsgP1xuICAgICAgICBtYWtlSW1hZ2Uoe1xuICAgICAgICAgIHVybDogc29uZy5hcnR3b3JrLnVybCxcbiAgICAgICAgICBoZWlnaHQ6IHNvbmcuYXJ0d29yay5oZWlnaHQsXG4gICAgICAgICAgd2lkdGg6IHNvbmcuYXJ0d29yay53aWR0aFxuICAgICAgICB9KSA6XG4gICAgICAgIGRhdGEuYXJ0d29ya1VybCA/XG4gICAgICAgIG1ha2VJbWFnZSh7XG4gICAgICAgICAgaGVpZ2h0OiBkYXRhLmhlaWdodCxcbiAgICAgICAgICB3aWR0aDogZGF0YS53aWR0aCxcbiAgICAgICAgICB1cmw6IGRhdGEuYXJ0d29ya1VybCxcbiAgICAgICAgICBleHQ6IGRhdGEuZmlsZVR5cGUgfHwgJ2pwZydcbiAgICAgICAgfSkgOlxuICAgICAgICAnaHR0cHM6Ly9tdXNpYy5hcHBsZS5jb20vYXNzZXRzL2Zhdmljb24vZmF2aWNvbi0xODAucG5nJyxcbiAgICAgICAgYXJ0aXN0OiB7XG4gICAgICAgICAgbmFtZTogc29uZz8uYXJ0aXN0TmFtZSB8fCBkYXRhLnNvY2lhbFRpdGxlIHx8ICdBcHBsZSBNdXNpYydcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFNvbmdJbmZvRmFsbGJhY2socmVzLCBuYW1lLCBpZCwgbGluayk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRQbGF5bGlzdEluZm8obGluazogc3RyaW5nKSB7XG4gICAgaWYgKCFRdWVyeVJlc29sdmVyLnJlZ2V4LmFwcGxlTXVzaWNQbGF5bGlzdFJlZ2V4LnRlc3QobGluaykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldEhUTUwobGluayk7XG4gICAgaWYgKCFyZXMpIHJldHVybiBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGFzcmMgPVxuICAgICAgcmVzLmdldEVsZW1lbnRCeUlkKCdzZXJpYWxpemVkLXNlcnZlci1kYXRhJyk/LmlubmVyVGV4dCB8fFxuICAgICAgcmVzLmlubmVyVGV4dC5cbiAgICAgIHNwbGl0KFxuICAgICAgICAnPHNjcmlwdCB0eXBlPVwiYXBwbGljYXRpb24vanNvblwiIGlkPVwic2VyaWFsaXplZC1zZXJ2ZXItZGF0YVwiPidcbiAgICAgICk/LlsxXT8uXG4gICAgICBzcGxpdCgnPC9zY3JpcHQ+Jyk/LlswXTtcbiAgICAgIGlmICghZGF0YXNyYykgdGhyb3cgJ25vdCBmb3VuZCc7XG4gICAgICBjb25zdCBwbCA9IEpTT04ucGFyc2UoZGF0YXNyYylbMF0uZGF0YS5zZW9EYXRhO1xuICAgICAgY29uc3QgdGh1bWJuYWlsID0gcGwuYXJ0d29ya1VybCA/XG4gICAgICBtYWtlSW1hZ2Uoe1xuICAgICAgICBoZWlnaHQ6IHBsLmhlaWdodCxcbiAgICAgICAgd2lkdGg6IHBsLndpZHRoLFxuICAgICAgICB1cmw6IHBsLmFydHdvcmtVcmwsXG4gICAgICAgIGV4dDogcGwuZmlsZVR5cGUgfHwgJ2pwZydcbiAgICAgIH0pIDpcbiAgICAgICdodHRwczovL211c2ljLmFwcGxlLmNvbS9hc3NldHMvZmF2aWNvbi9mYXZpY29uLTE4MC5wbmcnO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHBsLmFwcGxlQ29udGVudElkLFxuICAgICAgICB0aXRsZTogcGwuYXBwbGVUaXRsZSxcbiAgICAgICAgdGh1bWJuYWlsLFxuICAgICAgICBhcnRpc3Q6IHtcbiAgICAgICAgICBuYW1lOiBwbC5vZ1NvbmdzPy5bMF0/LmF0dHJpYnV0ZXM/LmFydGlzdE5hbWUgfHwgJ0FwcGxlIE11c2ljJ1xuICAgICAgICB9LFxuICAgICAgICB1cmw6IHBsLnVybCxcbiAgICAgICAgdHJhY2tzOlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgcGwub2dTb25ncz8ubWFwKChtOiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zdCBzb25nID0gbS5hdHRyaWJ1dGVzO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogbS5pZCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBzb25nLmR1cmF0aW9uSW5NaWxsaXMgfHwgJzA6MDAnLFxuICAgICAgICAgICAgdGl0bGU6IHNvbmcubmFtZSxcbiAgICAgICAgICAgIHVybDogc29uZy51cmwsXG4gICAgICAgICAgICB0aHVtYm5haWw6IHNvbmcuYXJ0d29yayA/XG4gICAgICAgICAgICBtYWtlSW1hZ2Uoe1xuICAgICAgICAgICAgICB1cmw6IHNvbmcuYXJ0d29yay51cmwsXG4gICAgICAgICAgICAgIGhlaWdodDogc29uZy5hcnR3b3JrLmhlaWdodCxcbiAgICAgICAgICAgICAgd2lkdGg6IHNvbmcuYXJ0d29yay53aWR0aFxuICAgICAgICAgICAgfSkgOlxuICAgICAgICAgICAgdGh1bWJuYWlsLFxuICAgICAgICAgICAgYXJ0aXN0OiB7XG4gICAgICAgICAgICAgIG5hbWU6IHNvbmcuYXJ0aXN0TmFtZSB8fCAnQXBwbGUgTXVzaWMnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSkgfHwgW11cbiAgICAgIH07XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldEFsYnVtSW5mbyhsaW5rOiBzdHJpbmcpIHtcbiAgICBpZiAoIVF1ZXJ5UmVzb2x2ZXIucmVnZXguYXBwbGVNdXNpY0FsYnVtUmVnZXgudGVzdChsaW5rKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0SFRNTChsaW5rKTtcbiAgICBpZiAoIXJlcykgcmV0dXJuIG51bGw7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YXNyYyA9XG4gICAgICByZXMuZ2V0RWxlbWVudEJ5SWQoJ3NlcmlhbGl6ZWQtc2VydmVyLWRhdGEnKT8uaW5uZXJUZXh0IHx8XG4gICAgICByZXMuaW5uZXJUZXh0LlxuICAgICAgc3BsaXQoXG4gICAgICAgICc8c2NyaXB0IHR5cGU9XCJhcHBsaWNhdGlvbi9qc29uXCIgaWQ9XCJzZXJpYWxpemVkLXNlcnZlci1kYXRhXCI+J1xuICAgICAgKT8uWzFdPy5cbiAgICAgIHNwbGl0KCc8L3NjcmlwdD4nKT8uWzBdO1xuICAgICAgaWYgKCFkYXRhc3JjKSB0aHJvdyAnbm90IGZvdW5kJztcbiAgICAgIGNvbnN0IHBsID0gSlNPTi5wYXJzZShkYXRhc3JjKVswXS5kYXRhLnNlb0RhdGE7XG4gICAgICBjb25zdCB0aHVtYm5haWwgPSBwbC5hcnR3b3JrVXJsID9cbiAgICAgIG1ha2VJbWFnZSh7XG4gICAgICAgIGhlaWdodDogcGwuaGVpZ2h0LFxuICAgICAgICB3aWR0aDogcGwud2lkdGgsXG4gICAgICAgIHVybDogcGwuYXJ0d29ya1VybCxcbiAgICAgICAgZXh0OiBwbC5maWxlVHlwZSB8fCAnanBnJ1xuICAgICAgfSkgOlxuICAgICAgJ2h0dHBzOi8vbXVzaWMuYXBwbGUuY29tL2Fzc2V0cy9mYXZpY29uL2Zhdmljb24tMTgwLnBuZyc7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogcGwuYXBwbGVDb250ZW50SWQsXG4gICAgICAgIHRpdGxlOiBwbC5hcHBsZVRpdGxlLFxuICAgICAgICB0aHVtYm5haWwsXG4gICAgICAgIGFydGlzdDoge1xuICAgICAgICAgIG5hbWU6IHBsLm9nU29uZ3M/LlswXT8uYXR0cmlidXRlcz8uYXJ0aXN0TmFtZSB8fCAnQXBwbGUgTXVzaWMnXG4gICAgICAgIH0sXG4gICAgICAgIHVybDogcGwudXJsLFxuICAgICAgICB0cmFja3M6XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICBwbC5vZ1NvbmdzPy5tYXAoKG06IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHNvbmcgPSBtLmF0dHJpYnV0ZXM7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBtLmlkLFxuICAgICAgICAgICAgZHVyYXRpb246IHNvbmcuZHVyYXRpb25Jbk1pbGxpcyB8fCAnMDowMCcsXG4gICAgICAgICAgICB0aXRsZTogc29uZy5uYW1lLFxuICAgICAgICAgICAgdXJsOiBzb25nLnVybCxcbiAgICAgICAgICAgIHRodW1ibmFpbDogc29uZy5hcnR3b3JrID9cbiAgICAgICAgICAgIG1ha2VJbWFnZSh7XG4gICAgICAgICAgICAgIHVybDogc29uZy5hcnR3b3JrLnVybCxcbiAgICAgICAgICAgICAgaGVpZ2h0OiBzb25nLmFydHdvcmsuaGVpZ2h0LFxuICAgICAgICAgICAgICB3aWR0aDogc29uZy5hcnR3b3JrLndpZHRoXG4gICAgICAgICAgICB9KSA6XG4gICAgICAgICAgICB0aHVtYm5haWwsXG4gICAgICAgICAgICBhcnRpc3Q6IHtcbiAgICAgICAgICAgICAgbmFtZTogc29uZy5hcnRpc3ROYW1lIHx8ICdBcHBsZSBNdXNpYydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9KSB8fCBbXVxuICAgICAgfTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufSIsICJpbXBvcnQgeyBmZXRjaCwgVUEgfSBmcm9tICcuL2hlbHBlcic7XG5cbmNvbnN0IFNQX0FOT05fVE9LRU5fVVJMID1cbidodHRwczovL29wZW4uc3BvdGlmeS5jb20vZ2V0X2FjY2Vzc190b2tlbj9yZWFzb249dHJhbnNwb3J0JnByb2R1Y3RUeXBlPWVtYmVkJztcbmNvbnN0IFNQX0FDQ0VTU19UT0tFTl9VUkwgPVxuJ2h0dHBzOi8vYWNjb3VudHMuc3BvdGlmeS5jb20vYXBpL3Rva2VuP2dyYW50X3R5cGU9Y2xpZW50X2NyZWRlbnRpYWxzJztcbmNvbnN0IFNQX0JBU0UgPSAnaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEnO1xuXG5pbnRlcmZhY2UgU1BfQUNDRVNTX1RPS0VOIHtcbiAgdG9rZW46IHN0cmluZztcbiAgZXhwaXJlc0FmdGVyOiBudW1iZXI7XG4gIHR5cGU6ICdCZWFyZXInO1xufVxuXG5leHBvcnQgY2xhc3MgU3BvdGlmeUFQSSB7XG4gIHB1YmxpYyBhY2Nlc3NUb2tlbjogU1BfQUNDRVNTX1RPS0VOIHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKFxuICBwdWJsaWMgY3JlZGVudGlhbHM6IHtcbiAgICBjbGllbnRJZDogc3RyaW5nIHwgbnVsbDtcbiAgICBjbGllbnRTZWNyZXQ6IHN0cmluZyB8IG51bGw7XG4gIH0gPSB7XG4gICAgY2xpZW50SWQ6IG51bGwsXG4gICAgY2xpZW50U2VjcmV0OiBudWxsXG4gIH0pXG4gIHt9XG5cbiAgcHVibGljIGdldCBhdXRob3JpemF0aW9uS2V5KCkge1xuICAgIGlmICghdGhpcy5jcmVkZW50aWFscy5jbGllbnRJZCB8fCAhdGhpcy5jcmVkZW50aWFscy5jbGllbnRTZWNyZXQpXG4gICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIEJ1ZmZlci5mcm9tKFxuICAgICAgYCR7dGhpcy5jcmVkZW50aWFscy5jbGllbnRJZH06JHt0aGlzLmNyZWRlbnRpYWxzLmNsaWVudFNlY3JldH1gXG4gICAgKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcmVxdWVzdFRva2VuKCkge1xuICAgIGNvbnN0IGtleSA9IHRoaXMuYXV0aG9yaXphdGlvbktleTtcblxuICAgIGlmICgha2V5KSByZXR1cm4gYXdhaXQgdGhpcy5yZXF1ZXN0QW5vbnltb3VzVG9rZW4oKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChTUF9BQ0NFU1NfVE9LRU5fVVJMLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1VzZXItQWdlbnQnOiBVQSxcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmFzaWMgJHtrZXl9YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgaWYgKCFib2R5LmFjY2Vzc190b2tlbikgdGhyb3cgJ25vIHRva2VuJztcblxuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgdG9rZW46IGJvZHkuYWNjZXNzX3Rva2VuIGFzIHN0cmluZyxcbiAgICAgICAgZXhwaXJlc0FmdGVyOiBib2R5LmV4cGlyZXNfaW4gYXMgbnVtYmVyLFxuICAgICAgICB0eXBlOiAnQmVhcmVyJyBhcyBjb25zdFxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW4gPSBkYXRhO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmVxdWVzdEFub255bW91c1Rva2VuKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlcXVlc3RBbm9ueW1vdXNUb2tlbigpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goU1BfQU5PTl9UT0tFTl9VUkwsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdVc2VyLUFnZW50JzogVUEsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXMub2spIHRocm93ICdub3Rfb2snO1xuXG4gICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgaWYgKCFib2R5LmFjY2Vzc1Rva2VuKSB0aHJvdyAnbm9fYWNjZXNzX3Rva2VuJztcblxuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgdG9rZW46IGJvZHkuYWNjZXNzVG9rZW4gYXMgc3RyaW5nLFxuICAgICAgICBleHBpcmVzQWZ0ZXI6IGJvZHkuYWNjZXNzVG9rZW5FeHBpcmF0aW9uVGltZXN0YW1wTXMgYXMgbnVtYmVyLFxuICAgICAgICB0eXBlOiAnQmVhcmVyJyBhcyBjb25zdFxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW4gPSBkYXRhO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGlzVG9rZW5FeHBpcmVkKCkge1xuICAgIGlmICghdGhpcy5hY2Nlc3NUb2tlbikgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIERhdGUubm93KCkgPiB0aGlzLmFjY2Vzc1Rva2VuLmV4cGlyZXNBZnRlcjtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzZWFyY2gocXVlcnk6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICAvLyByZXFcbiAgICAgIGlmICh0aGlzLmlzVG9rZW5FeHBpcmVkKCkpIGF3YWl0IHRoaXMucmVxdWVzdFRva2VuKCk7XG4gICAgICAvLyBmYWlsZWRcbiAgICAgIGlmICghdGhpcy5hY2Nlc3NUb2tlbikgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFxuICAgICAgICBgJHtTUF9CQVNFfS9zZWFyY2gvP3E9JHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgcXVlcnlcbiAgICAgICAgKX0mdHlwZT10cmFjayZtYXJrZXQ9VVNgLFxuICAgICAgICB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiBVQSxcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGAke3RoaXMuYWNjZXNzVG9rZW4udHlwZX0gJHt0aGlzLmFjY2Vzc1Rva2VuLnRva2VufWAsXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBpZiAoIXJlcy5vaykgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IGRhdGE6IHt0cmFja3M6IHtpdGVtczogU3BvdGlmeVRyYWNrW107fTt9ID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgcmV0dXJuIGRhdGEudHJhY2tzLml0ZW1zLm1hcCgobSkgPT4gKHtcbiAgICAgICAgdGl0bGU6IG0ubmFtZSxcbiAgICAgICAgZHVyYXRpb246IG0uZHVyYXRpb25fbXMsXG4gICAgICAgIGFydGlzdDogbS5hcnRpc3RzLm1hcCgobSkgPT4gbS5uYW1lKS5qb2luKCcsICcpLFxuICAgICAgICB1cmw6XG4gICAgICAgIG0uZXh0ZXJuYWxfdXJscz8uc3BvdGlmeSB8fCBgaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL3RyYWNrLyR7bS5pZH1gLFxuICAgICAgICB0aHVtYm5haWw6IG0uYWxidW0uaW1hZ2VzPy5bMF0/LnVybCB8fCBudWxsXG4gICAgICB9KSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0UGxheWxpc3QoaWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICAvLyByZXFcbiAgICAgIGlmICh0aGlzLmlzVG9rZW5FeHBpcmVkKCkpIGF3YWl0IHRoaXMucmVxdWVzdFRva2VuKCk7XG4gICAgICAvLyBmYWlsZWRcbiAgICAgIGlmICghdGhpcy5hY2Nlc3NUb2tlbikgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke1NQX0JBU0V9L3BsYXlsaXN0cy8ke2lkfT9tYXJrZXQ9VVNgLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnVXNlci1BZ2VudCc6IFVBLFxuICAgICAgICAgIEF1dGhvcml6YXRpb246IGAke3RoaXMuYWNjZXNzVG9rZW4udHlwZX0gJHt0aGlzLmFjY2Vzc1Rva2VuLnRva2VufWAsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmICghcmVzLm9rKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgZGF0YToge1xuICAgICAgICBleHRlcm5hbF91cmxzOiB7c3BvdGlmeTogc3RyaW5nO307XG4gICAgICAgIG93bmVyOiB7ZGlzcGxheV9uYW1lOiBzdHJpbmc7fTtcbiAgICAgICAgaWQ6IHN0cmluZztcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgICBpbWFnZXM6IHt1cmw6IHN0cmluZzt9W107XG4gICAgICAgIHRyYWNrczoge1xuICAgICAgICAgIGl0ZW1zOiB7dHJhY2s6IFNwb3RpZnlUcmFjazt9W107XG4gICAgICAgICAgbmV4dD86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgIH0gPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICBpZiAoIWRhdGEudHJhY2tzLml0ZW1zLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IHQ6IHt0cmFjazogU3BvdGlmeVRyYWNrO31bXSA9IGRhdGEudHJhY2tzLml0ZW1zO1xuXG4gICAgICBsZXQgbmV4dDogc3RyaW5nIHwgdW5kZWZpbmVkID0gZGF0YS50cmFja3MubmV4dDtcblxuICAgICAgd2hpbGUgKHR5cGVvZiBuZXh0ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKG5leHQsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiBVQSxcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYCR7dGhpcy5hY2Nlc3NUb2tlbi50eXBlfSAke3RoaXMuYWNjZXNzVG9rZW4udG9rZW59YCxcbiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICghcmVzLm9rKSBicmVhaztcbiAgICAgICAgICBjb25zdCBuZXh0UGFnZToge2l0ZW1zOiB7dHJhY2s6IFNwb3RpZnlUcmFjazt9W107bmV4dD86IHN0cmluZzt9ID1cbiAgICAgICAgICBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICAgICAgdC5wdXNoKC4uLm5leHRQYWdlLml0ZW1zKTtcbiAgICAgICAgICBuZXh0ID0gbmV4dFBhZ2UubmV4dDtcblxuICAgICAgICAgIGlmICghbmV4dCkgYnJlYWs7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRyYWNrcyA9IHQubWFwKCh7IHRyYWNrOiBtIH0pID0+ICh7XG4gICAgICAgIHRpdGxlOiBtLm5hbWUsXG4gICAgICAgIGR1cmF0aW9uOiBtLmR1cmF0aW9uX21zLFxuICAgICAgICBhcnRpc3Q6IG0uYXJ0aXN0cy5tYXAoKG0pID0+IG0ubmFtZSkuam9pbignLCAnKSxcbiAgICAgICAgdXJsOlxuICAgICAgICBtLmV4dGVybmFsX3VybHM/LnNwb3RpZnkgfHwgYGh0dHBzOi8vb3Blbi5zcG90aWZ5LmNvbS90cmFjay8ke20uaWR9YCxcbiAgICAgICAgdGh1bWJuYWlsOiBtLmFsYnVtLmltYWdlcz8uWzBdPy51cmwgfHwgbnVsbFxuICAgICAgfSkpO1xuXG4gICAgICBpZiAoIXRyYWNrcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhdXRob3I6IGRhdGEub3duZXIuZGlzcGxheV9uYW1lLFxuICAgICAgICB0aHVtYm5haWw6IGRhdGEuaW1hZ2VzPy5bMF0/LnVybCB8fCBudWxsLFxuICAgICAgICBpZDogZGF0YS5pZCxcbiAgICAgICAgdXJsOlxuICAgICAgICBkYXRhLmV4dGVybmFsX3VybHMuc3BvdGlmeSB8fFxuICAgICAgICBgaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL3BsYXlsaXN0LyR7aWR9YCxcbiAgICAgICAgdHJhY2tzXG4gICAgICB9O1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldEFsYnVtKGlkOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgLy8gcmVxXG4gICAgICBpZiAodGhpcy5pc1Rva2VuRXhwaXJlZCgpKSBhd2FpdCB0aGlzLnJlcXVlc3RUb2tlbigpO1xuICAgICAgLy8gZmFpbGVkXG4gICAgICBpZiAoIXRoaXMuYWNjZXNzVG9rZW4pIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtTUF9CQVNFfS9hbGJ1bXMvJHtpZH0/bWFya2V0PVVTYCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1VzZXItQWdlbnQnOiBVQSxcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgJHt0aGlzLmFjY2Vzc1Rva2VuLnR5cGV9ICR7dGhpcy5hY2Nlc3NUb2tlbi50b2tlbn1gLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoIXJlcy5vaykgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IGRhdGE6IHtcbiAgICAgICAgZXh0ZXJuYWxfdXJsczoge3Nwb3RpZnk6IHN0cmluZzt9O1xuICAgICAgICBhcnRpc3RzOiB7bmFtZTogc3RyaW5nO31bXTtcbiAgICAgICAgaWQ6IHN0cmluZztcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgICBpbWFnZXM6IHt1cmw6IHN0cmluZzt9W107XG4gICAgICAgIHRyYWNrczoge1xuICAgICAgICAgIGl0ZW1zOiBTcG90aWZ5VHJhY2tbXTtcbiAgICAgICAgICBuZXh0Pzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgfSA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgIGlmICghZGF0YS50cmFja3MuaXRlbXMubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgdDogU3BvdGlmeVRyYWNrW10gPSBkYXRhLnRyYWNrcy5pdGVtcztcblxuICAgICAgbGV0IG5leHQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IGRhdGEudHJhY2tzLm5leHQ7XG5cbiAgICAgIHdoaWxlICh0eXBlb2YgbmV4dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChuZXh0LCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICdVc2VyLUFnZW50JzogVUEsXG4gICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGAke3RoaXMuYWNjZXNzVG9rZW4udHlwZX0gJHt0aGlzLmFjY2Vzc1Rva2VuLnRva2VufWAsXG4gICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoIXJlcy5vaykgYnJlYWs7XG4gICAgICAgICAgY29uc3QgbmV4dFBhZ2U6IHtpdGVtczogU3BvdGlmeVRyYWNrW107bmV4dD86IHN0cmluZzt9ID1cbiAgICAgICAgICBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICAgICAgdC5wdXNoKC4uLm5leHRQYWdlLml0ZW1zKTtcbiAgICAgICAgICBuZXh0ID0gbmV4dFBhZ2UubmV4dDtcblxuICAgICAgICAgIGlmICghbmV4dCkgYnJlYWs7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRyYWNrcyA9IHQubWFwKChtKSA9PiAoe1xuICAgICAgICB0aXRsZTogbS5uYW1lLFxuICAgICAgICBkdXJhdGlvbjogbS5kdXJhdGlvbl9tcyxcbiAgICAgICAgYXJ0aXN0OiBtLmFydGlzdHMubWFwKChtKSA9PiBtLm5hbWUpLmpvaW4oJywgJyksXG4gICAgICAgIHVybDpcbiAgICAgICAgbS5leHRlcm5hbF91cmxzPy5zcG90aWZ5IHx8IGBodHRwczovL29wZW4uc3BvdGlmeS5jb20vdHJhY2svJHttLmlkfWAsXG4gICAgICAgIHRodW1ibmFpbDogZGF0YS5pbWFnZXM/LlswXT8udXJsIHx8IG51bGxcbiAgICAgIH0pKTtcblxuICAgICAgaWYgKCF0cmFja3MubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgYXV0aG9yOiBkYXRhLmFydGlzdHMubWFwKChtKSA9PiBtLm5hbWUpLmpvaW4oJywgJyksXG4gICAgICAgIHRodW1ibmFpbDogZGF0YS5pbWFnZXM/LlswXT8udXJsIHx8IG51bGwsXG4gICAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgICB1cmw6XG4gICAgICAgIGRhdGEuZXh0ZXJuYWxfdXJscy5zcG90aWZ5IHx8IGBodHRwczovL29wZW4uc3BvdGlmeS5jb20vYWxidW0vJHtpZH1gLFxuICAgICAgICB0cmFja3NcbiAgICAgIH07XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTcG90aWZ5VHJhY2sge1xuICBhbGJ1bToge1xuICAgIGltYWdlczoge1xuICAgICAgaGVpZ2h0OiBudW1iZXI7XG4gICAgICB1cmw6IHN0cmluZztcbiAgICAgIHdpZHRoOiBudW1iZXI7XG4gICAgfVtdO1xuICB9O1xuICBhcnRpc3RzOiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gIH1bXTtcbiAgZHVyYXRpb25fbXM6IG51bWJlcjtcbiAgZXhwbGljaXQ6IGJvb2xlYW47XG4gIGV4dGVybmFsX3VybHM6IHtzcG90aWZ5OiBzdHJpbmc7fTtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xufSIsICJpbXBvcnQge1xuICBCYXNlRXh0cmFjdG9yLFxuICBFeHRyYWN0b3JJbmZvLFxuICBFeHRyYWN0b3JTZWFyY2hDb250ZXh0LFxuICBFeHRyYWN0b3JTdHJlYW1hYmxlLFxuICBQbGF5bGlzdCxcbiAgUXVlcnlUeXBlLFxuICBTZWFyY2hRdWVyeVR5cGUsXG4gIFRyYWNrLFxuICBVdGlsIH0gZnJvbVxuJ2Rpc2NvcmQtcGxheWVyJztcbmltcG9ydCB0eXBlIHsgUmVhZGFibGUgfSBmcm9tICdzdHJlYW0nO1xuaW1wb3J0IHsgZmV0Y2ggfSBmcm9tICcuLi9pbnRlcm5hbC9oZWxwZXInO1xuaW1wb3J0IHNwb3RpZnksIHtcbiAgU3BvdGlmeSxcbiAgU3BvdGlmeUFsYnVtLFxuICBTcG90aWZ5UGxheWxpc3QsXG4gIFNwb3RpZnlTb25nIH0gZnJvbVxuJ3Nwb3RpZnktdXJsLWluZm8nO1xuaW1wb3J0IHsgU3BvdGlmeUFQSSB9IGZyb20gJy4uL2ludGVybmFsJztcbmltcG9ydCB7IFN0cmVhbUZOIH0gZnJvbSAnLi4vdHlwZXMvY29tbW9uJztcblxuY29uc3QgcmUgPVxuL14oPzpodHRwczpcXC9cXC9vcGVuXFwuc3BvdGlmeVxcLmNvbVxcLyhpbnRsLShbYS16XXxbQS1aXSl7MCwzfVxcLyk/KD86dXNlclxcL1tBLVphLXowLTldK1xcLyk/fHNwb3RpZnk6KShhbGJ1bXxwbGF5bGlzdHx0cmFjaykoPzpbLzpdKShbQS1aYS16MC05XSspLiokLztcblxuZXhwb3J0IGludGVyZmFjZSBTcG90aWZ5RXh0cmFjdG9ySW5pdCB7XG4gIGNsaWVudElkPzogc3RyaW5nIHwgbnVsbDtcbiAgY2xpZW50U2VjcmV0Pzogc3RyaW5nIHwgbnVsbDtcbiAgY3JlYXRlU3RyZWFtPzogKFxuICBleHQ6IFNwb3RpZnlFeHRyYWN0b3IsXG4gIHVybDogc3RyaW5nKVxuICA9PiBQcm9taXNlPFJlYWRhYmxlIHwgc3RyaW5nPjtcbn1cblxuZXhwb3J0IGNsYXNzIFNwb3RpZnlFeHRyYWN0b3IgZXh0ZW5kcyBCYXNlRXh0cmFjdG9yPFNwb3RpZnlFeHRyYWN0b3JJbml0PiB7XG4gIHB1YmxpYyBzdGF0aWMgaWRlbnRpZmllciA9ICdjb20uZGlzY29yZC1wbGF5ZXIuc3BvdGlmeWV4dHJhY3RvcicgYXMgY29uc3Q7XG4gIHByaXZhdGUgX3N0cmVhbSE6IFN0cmVhbUZOO1xuICBwcml2YXRlIF9saWIhOiBTcG90aWZ5O1xuICBwcml2YXRlIF9jcmVkZW50aWFscyA9IHtcbiAgICBjbGllbnRJZDogdGhpcy5vcHRpb25zLmNsaWVudElkIHx8IHByb2Nlc3MuZW52LkRQX1NQT1RJRllfQ0xJRU5UX0lEIHx8IG51bGwsXG4gICAgY2xpZW50U2VjcmV0OlxuICAgIHRoaXMub3B0aW9ucy5jbGllbnRTZWNyZXQgfHwgcHJvY2Vzcy5lbnYuRFBfU1BPVElGWV9DTElFTlRfU0VDUkVUIHx8IG51bGxcbiAgfTtcbiAgcHVibGljIGludGVybmFsID0gbmV3IFNwb3RpZnlBUEkodGhpcy5fY3JlZGVudGlhbHMpO1xuXG4gIHB1YmxpYyBhc3luYyBhY3RpdmF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnByb3RvY29scyA9IFsnc3BzZWFyY2gnLCAnc3BvdGlmeSddO1xuICAgIHRoaXMuX2xpYiA9IHNwb3RpZnkoZmV0Y2gpO1xuICAgIGlmICh0aGlzLmludGVybmFsLmlzVG9rZW5FeHBpcmVkKCkpIGF3YWl0IHRoaXMuaW50ZXJuYWwucmVxdWVzdFRva2VuKCk7XG5cbiAgICBjb25zdCBmbiA9IHRoaXMub3B0aW9ucy5jcmVhdGVTdHJlYW07XG4gICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fc3RyZWFtID0gKHE6IHN0cmluZykgPT4ge1xuICAgICAgICByZXR1cm4gZm4odGhpcywgcSk7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZWFjdGl2YXRlKCkge1xuICAgIHRoaXMuX3N0cmVhbSA9IHVuZGVmaW5lZCBhcyB1bmtub3duIGFzIFN0cmVhbUZOO1xuICAgIHRoaXMuX2xpYiA9IHVuZGVmaW5lZCBhcyB1bmtub3duIGFzIFNwb3RpZnk7XG4gICAgdGhpcy5wcm90b2NvbHMgPSBbXTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB2YWxpZGF0ZShcbiAgcXVlcnk6IHN0cmluZyxcbiAgdHlwZT86IFNlYXJjaFF1ZXJ5VHlwZSB8IG51bGwgfCB1bmRlZmluZWQpXG4gIDogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgLy8gcHJldHRpZXItaWdub3JlXG4gICAgcmV0dXJuICg8U2VhcmNoUXVlcnlUeXBlW10+IFtcbiAgICBRdWVyeVR5cGUuU1BPVElGWV9BTEJVTSxcbiAgICBRdWVyeVR5cGUuU1BPVElGWV9QTEFZTElTVCxcbiAgICBRdWVyeVR5cGUuU1BPVElGWV9TT05HLFxuICAgIFF1ZXJ5VHlwZS5TUE9USUZZX1NFQVJDSCxcbiAgICBRdWVyeVR5cGUuQVVUTyxcbiAgICBRdWVyeVR5cGUuQVVUT19TRUFSQ0hdKS5cbiAgICBzb21lKCh0KSA9PiB0ID09PSB0eXBlKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRSZWxhdGVkVHJhY2tzKHRyYWNrOiBUcmFjaykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmhhbmRsZSh0cmFjay5hdXRob3IgfHwgdHJhY2sudGl0bGUsIHtcbiAgICAgIHR5cGU6IFF1ZXJ5VHlwZS5TUE9USUZZX1NFQVJDSCxcbiAgICAgIHJlcXVlc3RlZEJ5OiB0cmFjay5yZXF1ZXN0ZWRCeVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGhhbmRsZShcbiAgcXVlcnk6IHN0cmluZyxcbiAgY29udGV4dDogRXh0cmFjdG9yU2VhcmNoQ29udGV4dClcbiAgOiBQcm9taXNlPEV4dHJhY3RvckluZm8+IHtcbiAgICBpZiAoY29udGV4dC5wcm90b2NvbCA9PT0gJ3Nwc2VhcmNoJylcbiAgICBjb250ZXh0LnR5cGUgPSBRdWVyeVR5cGUuU1BPVElGWV9TRUFSQ0g7XG4gICAgc3dpdGNoIChjb250ZXh0LnR5cGUpIHtcbiAgICAgIGNhc2UgUXVlcnlUeXBlLkFVVE86XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5BVVRPX1NFQVJDSDpcbiAgICAgIGNhc2UgUXVlcnlUeXBlLlNQT1RJRllfU0VBUkNIOntcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5pbnRlcm5hbC5zZWFyY2gocXVlcnkpO1xuICAgICAgICAgIGlmICghZGF0YSkgcmV0dXJuIHRoaXMuY3JlYXRlUmVzcG9uc2UoKTtcblxuICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlc3BvbnNlKFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIGRhdGEubWFwKChzcG90aWZ5RGF0YSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB0cmFjazogVHJhY2sgPSBuZXcgVHJhY2sodGhpcy5jb250ZXh0LnBsYXllciwge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBzcG90aWZ5RGF0YS50aXRsZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogYCR7c3BvdGlmeURhdGEudGl0bGV9IGJ5ICR7c3BvdGlmeURhdGEuYXJ0aXN0fWAsXG4gICAgICAgICAgICAgICAgYXV0aG9yOiBzcG90aWZ5RGF0YS5hcnRpc3QgPz8gJ1Vua25vd24gQXJ0aXN0JyxcbiAgICAgICAgICAgICAgICB1cmw6IHNwb3RpZnlEYXRhLnVybCxcbiAgICAgICAgICAgICAgICB0aHVtYm5haWw6XG4gICAgICAgICAgICAgICAgc3BvdGlmeURhdGEudGh1bWJuYWlsIHx8XG4gICAgICAgICAgICAgICAgJ2h0dHBzOi8vd3d3LnNjZG4uY28vaS9fZ2xvYmFsL3R3aXR0ZXJfY2FyZC1kZWZhdWx0LmpwZycsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IFV0aWwuYnVpbGRUaW1lQ29kZShcbiAgICAgICAgICAgICAgICAgIFV0aWwucGFyc2VNUyhzcG90aWZ5RGF0YS5kdXJhdGlvbiA/PyAwKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgdmlld3M6IDAsXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICAgICAgc291cmNlOiAnc3BvdGlmeScsXG4gICAgICAgICAgICAgICAgcXVlcnlUeXBlOiBRdWVyeVR5cGUuU1BPVElGWV9TT05HLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBzb3VyY2U6IHNwb3RpZnlEYXRhLFxuICAgICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0TWV0YWRhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogc3BvdGlmeURhdGEsXG4gICAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIHRyYWNrLmV4dHJhY3RvciA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICBjYXNlIFF1ZXJ5VHlwZS5TUE9USUZZX1NPTkc6e1xuICAgICAgICAgIGNvbnN0IHNwb3RpZnlEYXRhOiBTcG90aWZ5U29uZyB8IHZvaWQgPSBhd2FpdCB0aGlzLl9saWIuXG4gICAgICAgICAgZ2V0RGF0YShxdWVyeSwgY29udGV4dC5yZXF1ZXN0T3B0aW9ucyBhcyB1bmtub3duIGFzIFJlcXVlc3RJbml0KS5cbiAgICAgICAgICBjYXRjaChVdGlsLm5vb3ApO1xuICAgICAgICAgIGlmICghc3BvdGlmeURhdGEpIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IFtdIH07XG4gICAgICAgICAgY29uc3Qgc3BvdGlmeVRyYWNrOiBUcmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICB0aXRsZTogc3BvdGlmeURhdGEudGl0bGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYCR7c3BvdGlmeURhdGEubmFtZX0gYnkgJHtzcG90aWZ5RGF0YS5hcnRpc3RzLlxuICAgICAgICAgICAgbWFwKChtKSA9PiBtLm5hbWUpLlxuICAgICAgICAgICAgam9pbignLCAnKX1gLFxuICAgICAgICAgICAgYXV0aG9yOiBzcG90aWZ5RGF0YS5hcnRpc3RzWzBdPy5uYW1lID8/ICdVbmtub3duIEFydGlzdCcsXG4gICAgICAgICAgICB1cmw6IHNwb3RpZnlEYXRhLmlkID9cbiAgICAgICAgICAgIGBodHRwczovL29wZW4uc3BvdGlmeS5jb20vdHJhY2svJHtzcG90aWZ5RGF0YS5pZH1gIDpcbiAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgdGh1bWJuYWlsOlxuICAgICAgICAgICAgc3BvdGlmeURhdGEuY292ZXJBcnQ/LnNvdXJjZXM/LlswXT8udXJsIHx8XG4gICAgICAgICAgICAnaHR0cHM6Ly93d3cuc2Nkbi5jby9pL19nbG9iYWwvdHdpdHRlcl9jYXJkLWRlZmF1bHQuanBnJyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoXG4gICAgICAgICAgICAgIFV0aWwucGFyc2VNUyhzcG90aWZ5RGF0YS5kdXJhdGlvbiA/PyBzcG90aWZ5RGF0YS5tYXhEdXJhdGlvbiA/PyAwKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHZpZXdzOiAwLFxuICAgICAgICAgICAgcmVxdWVzdGVkQnk6IGNvbnRleHQucmVxdWVzdGVkQnksXG4gICAgICAgICAgICBzb3VyY2U6ICdzcG90aWZ5JyxcbiAgICAgICAgICAgIHF1ZXJ5VHlwZTogY29udGV4dC50eXBlLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgc291cmNlOiBzcG90aWZ5RGF0YSxcbiAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc291cmNlOiBzcG90aWZ5RGF0YSxcbiAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHNwb3RpZnlUcmFjay5leHRyYWN0b3IgPSB0aGlzO1xuXG4gICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3Q6IG51bGwsIHRyYWNrczogW3Nwb3RpZnlUcmFja10gfTtcbiAgICAgICAgfVxuICAgICAgY2FzZSBRdWVyeVR5cGUuU1BPVElGWV9QTEFZTElTVDp7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgcXVlcnlUeXBlLCBpZCB9ID0gdGhpcy5wYXJzZShxdWVyeSk7XG4gICAgICAgICAgICBpZiAocXVlcnlUeXBlICE9PSAncGxheWxpc3QnKSB0aHJvdyAnZXJyJztcblxuICAgICAgICAgICAgY29uc3Qgc3BvdGlmeVBsYXlsaXN0ID0gYXdhaXQgdGhpcy5pbnRlcm5hbC5nZXRQbGF5bGlzdChpZCk7XG4gICAgICAgICAgICBpZiAoIXNwb3RpZnlQbGF5bGlzdCkgdGhyb3cgJ2Vycic7XG5cbiAgICAgICAgICAgIGNvbnN0IHBsYXlsaXN0ID0gbmV3IFBsYXlsaXN0KHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgdGl0bGU6IHNwb3RpZnlQbGF5bGlzdC5uYW1lLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogc3BvdGlmeVBsYXlsaXN0Lm5hbWUgPz8gJycsXG4gICAgICAgICAgICAgIHRodW1ibmFpbDpcbiAgICAgICAgICAgICAgc3BvdGlmeVBsYXlsaXN0LnRodW1ibmFpbCA/P1xuICAgICAgICAgICAgICAnaHR0cHM6Ly93d3cuc2Nkbi5jby9pL19nbG9iYWwvdHdpdHRlcl9jYXJkLWRlZmF1bHQuanBnJyxcbiAgICAgICAgICAgICAgdHlwZTogJ3BsYXlsaXN0JyxcbiAgICAgICAgICAgICAgc291cmNlOiAnc3BvdGlmeScsXG4gICAgICAgICAgICAgIGF1dGhvcjoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHNwb3RpZnlQbGF5bGlzdC5hdXRob3IgPz8gJ1Vua25vd24gQXJ0aXN0JyxcbiAgICAgICAgICAgICAgICB1cmw6IG51bGwgYXMgdW5rbm93biBhcyBzdHJpbmdcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdHJhY2tzOiBbXSxcbiAgICAgICAgICAgICAgaWQ6IHNwb3RpZnlQbGF5bGlzdC5pZCxcbiAgICAgICAgICAgICAgdXJsOiBzcG90aWZ5UGxheWxpc3QudXJsIHx8IHF1ZXJ5LFxuICAgICAgICAgICAgICByYXdQbGF5bGlzdDogc3BvdGlmeVBsYXlsaXN0XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcGxheWxpc3QudHJhY2tzID0gc3BvdGlmeVBsYXlsaXN0LnRyYWNrcy5tYXAoKHNwb3RpZnlEYXRhKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGRhdGE6IFRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogc3BvdGlmeURhdGEudGl0bGUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGAke3Nwb3RpZnlEYXRhLnRpdGxlfSBieSAke3Nwb3RpZnlEYXRhLmFydGlzdH1gLFxuICAgICAgICAgICAgICAgIGF1dGhvcjogc3BvdGlmeURhdGEuYXJ0aXN0ID8/ICdVbmtub3duIEFydGlzdCcsXG4gICAgICAgICAgICAgICAgdXJsOiBzcG90aWZ5RGF0YS51cmwsXG4gICAgICAgICAgICAgICAgdGh1bWJuYWlsOlxuICAgICAgICAgICAgICAgIHNwb3RpZnlEYXRhLnRodW1ibmFpbCB8fFxuICAgICAgICAgICAgICAgICdodHRwczovL3d3dy5zY2RuLmNvL2kvX2dsb2JhbC90d2l0dGVyX2NhcmQtZGVmYXVsdC5qcGcnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoXG4gICAgICAgICAgICAgICAgICBVdGlsLnBhcnNlTVMoc3BvdGlmeURhdGEuZHVyYXRpb24gPz8gMClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHZpZXdzOiAwLFxuICAgICAgICAgICAgICAgIHJlcXVlc3RlZEJ5OiBjb250ZXh0LnJlcXVlc3RlZEJ5LFxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ3Nwb3RpZnknLFxuICAgICAgICAgICAgICAgIHF1ZXJ5VHlwZTogUXVlcnlUeXBlLlNQT1RJRllfU09ORyxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgc291cmNlOiBzcG90aWZ5RGF0YSxcbiAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHNwb3RpZnlEYXRhLFxuICAgICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZGF0YS5leHRyYWN0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICBkYXRhLnBsYXlsaXN0ID0gcGxheWxpc3Q7XG4gICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfSkgYXMgVHJhY2tbXTtcblxuICAgICAgICAgICAgcmV0dXJuIHsgcGxheWxpc3QsIHRyYWNrczogcGxheWxpc3QudHJhY2tzIH07XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICBjb25zdCBzcG90aWZ5UGxheWxpc3Q6IFNwb3RpZnlQbGF5bGlzdCB8IHZvaWQgPSBhd2FpdCB0aGlzLl9saWIuXG4gICAgICAgICAgICBnZXREYXRhKHF1ZXJ5LCBjb250ZXh0LnJlcXVlc3RPcHRpb25zIGFzIHVua25vd24gYXMgUmVxdWVzdEluaXQpLlxuICAgICAgICAgICAgY2F0Y2goVXRpbC5ub29wKTtcbiAgICAgICAgICAgIGlmICghc3BvdGlmeVBsYXlsaXN0KSByZXR1cm4geyBwbGF5bGlzdDogbnVsbCwgdHJhY2tzOiBbXSB9O1xuXG4gICAgICAgICAgICBjb25zdCBwbGF5bGlzdCA9IG5ldyBQbGF5bGlzdCh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICAgIHRpdGxlOiBzcG90aWZ5UGxheWxpc3QubmFtZSA/PyBzcG90aWZ5UGxheWxpc3QudGl0bGUsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzcG90aWZ5UGxheWxpc3QudGl0bGUgPz8gJycsXG4gICAgICAgICAgICAgIHRodW1ibmFpbDpcbiAgICAgICAgICAgICAgc3BvdGlmeVBsYXlsaXN0LmNvdmVyQXJ0Py5zb3VyY2VzPy5bMF0/LnVybCA/P1xuICAgICAgICAgICAgICAnaHR0cHM6Ly93d3cuc2Nkbi5jby9pL19nbG9iYWwvdHdpdHRlcl9jYXJkLWRlZmF1bHQuanBnJyxcbiAgICAgICAgICAgICAgdHlwZTogc3BvdGlmeVBsYXlsaXN0LnR5cGUsXG4gICAgICAgICAgICAgIHNvdXJjZTogJ3Nwb3RpZnknLFxuICAgICAgICAgICAgICBhdXRob3I6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBzcG90aWZ5UGxheWxpc3Quc3VidGl0bGUgPz8gJ1Vua25vd24gQXJ0aXN0JyxcbiAgICAgICAgICAgICAgICB1cmw6IG51bGwgYXMgdW5rbm93biBhcyBzdHJpbmdcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdHJhY2tzOiBbXSxcbiAgICAgICAgICAgICAgaWQ6IHNwb3RpZnlQbGF5bGlzdC5pZCxcbiAgICAgICAgICAgICAgdXJsOiBzcG90aWZ5UGxheWxpc3QuaWQgP1xuICAgICAgICAgICAgICBgaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL3BsYXlsaXN0LyR7c3BvdGlmeVBsYXlsaXN0LmlkfWAgOlxuICAgICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgICAgcmF3UGxheWxpc3Q6IHNwb3RpZnlQbGF5bGlzdFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHBsYXlsaXN0LnRyYWNrcyA9IHNwb3RpZnlQbGF5bGlzdC50cmFja0xpc3QubWFwKChtKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGRhdGE6IFRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogbS50aXRsZSA/PyAnJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbS50aXRsZSA/PyAnJyxcbiAgICAgICAgICAgICAgICBhdXRob3I6IG0uc3VidGl0bGUgPz8gJ1Vua25vd24gQXJ0aXN0JyxcbiAgICAgICAgICAgICAgICB1cmw6IG0udWlkID8gYGh0dHBzOi8vb3Blbi5zcG90aWZ5LmNvbS90cmFja3MvJHttLnVpZH1gIDogcXVlcnksXG4gICAgICAgICAgICAgICAgdGh1bWJuYWlsOlxuICAgICAgICAgICAgICAgICdodHRwczovL3d3dy5zY2RuLmNvL2kvX2dsb2JhbC90d2l0dGVyX2NhcmQtZGVmYXVsdC5qcGcnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKG0uZHVyYXRpb24pKSxcbiAgICAgICAgICAgICAgICB2aWV3czogMCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgICAgICBwbGF5bGlzdCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdzcG90aWZ5JyxcbiAgICAgICAgICAgICAgICBxdWVyeVR5cGU6ICdzcG90aWZ5U29uZycsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgIHNvdXJjZTogbSxcbiAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG0sXG4gICAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkYXRhLmV4dHJhY3RvciA9IHRoaXM7XG4gICAgICAgICAgICAgIGRhdGEucGxheWxpc3QgPSBwbGF5bGlzdDtcbiAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9KSBhcyBUcmFja1tdO1xuXG4gICAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdCwgdHJhY2tzOiBwbGF5bGlzdC50cmFja3MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGNhc2UgUXVlcnlUeXBlLlNQT1RJRllfQUxCVU06e1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IHF1ZXJ5VHlwZSwgaWQgfSA9IHRoaXMucGFyc2UocXVlcnkpO1xuICAgICAgICAgICAgaWYgKHF1ZXJ5VHlwZSAhPT0gJ2FsYnVtJykgdGhyb3cgJ2Vycic7XG5cbiAgICAgICAgICAgIGNvbnN0IHNwb3RpZnlBbGJ1bSA9IGF3YWl0IHRoaXMuaW50ZXJuYWwuZ2V0QWxidW0oaWQpO1xuICAgICAgICAgICAgaWYgKCFzcG90aWZ5QWxidW0pIHRocm93ICdlcnInO1xuXG4gICAgICAgICAgICBjb25zdCBwbGF5bGlzdCA9IG5ldyBQbGF5bGlzdCh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICAgIHRpdGxlOiBzcG90aWZ5QWxidW0ubmFtZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHNwb3RpZnlBbGJ1bS5uYW1lID8/ICcnLFxuICAgICAgICAgICAgICB0aHVtYm5haWw6XG4gICAgICAgICAgICAgIHNwb3RpZnlBbGJ1bS50aHVtYm5haWwgPz9cbiAgICAgICAgICAgICAgJ2h0dHBzOi8vd3d3LnNjZG4uY28vaS9fZ2xvYmFsL3R3aXR0ZXJfY2FyZC1kZWZhdWx0LmpwZycsXG4gICAgICAgICAgICAgIHR5cGU6ICdhbGJ1bScsXG4gICAgICAgICAgICAgIHNvdXJjZTogJ3Nwb3RpZnknLFxuICAgICAgICAgICAgICBhdXRob3I6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBzcG90aWZ5QWxidW0uYXV0aG9yID8/ICdVbmtub3duIEFydGlzdCcsXG4gICAgICAgICAgICAgICAgdXJsOiBudWxsIGFzIHVua25vd24gYXMgc3RyaW5nXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHRyYWNrczogW10sXG4gICAgICAgICAgICAgIGlkOiBzcG90aWZ5QWxidW0uaWQsXG4gICAgICAgICAgICAgIHVybDogc3BvdGlmeUFsYnVtLnVybCB8fCBxdWVyeSxcbiAgICAgICAgICAgICAgcmF3UGxheWxpc3Q6IHNwb3RpZnlBbGJ1bVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHBsYXlsaXN0LnRyYWNrcyA9IHNwb3RpZnlBbGJ1bS50cmFja3MubWFwKChzcG90aWZ5RGF0YSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBkYXRhOiBUcmFjayA9IG5ldyBUcmFjayh0aGlzLmNvbnRleHQucGxheWVyLCB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IHNwb3RpZnlEYXRhLnRpdGxlLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgJHtzcG90aWZ5RGF0YS50aXRsZX0gYnkgJHtzcG90aWZ5RGF0YS5hcnRpc3R9YCxcbiAgICAgICAgICAgICAgICBhdXRob3I6IHNwb3RpZnlEYXRhLmFydGlzdCA/PyAnVW5rbm93biBBcnRpc3QnLFxuICAgICAgICAgICAgICAgIHVybDogc3BvdGlmeURhdGEudXJsLFxuICAgICAgICAgICAgICAgIHRodW1ibmFpbDpcbiAgICAgICAgICAgICAgICBzcG90aWZ5RGF0YS50aHVtYm5haWwgfHxcbiAgICAgICAgICAgICAgICAnaHR0cHM6Ly93d3cuc2Nkbi5jby9pL19nbG9iYWwvdHdpdHRlcl9jYXJkLWRlZmF1bHQuanBnJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogVXRpbC5idWlsZFRpbWVDb2RlKFxuICAgICAgICAgICAgICAgICAgVXRpbC5wYXJzZU1TKHNwb3RpZnlEYXRhLmR1cmF0aW9uID8/IDApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICB2aWV3czogMCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdzcG90aWZ5JyxcbiAgICAgICAgICAgICAgICBxdWVyeVR5cGU6IFF1ZXJ5VHlwZS5TUE9USUZZX1NPTkcsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgIHNvdXJjZTogc3BvdGlmeURhdGEsXG4gICAgICAgICAgICAgICAgICBicmlkZ2U6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRhZGF0YTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBzcG90aWZ5RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgYnJpZGdlOiBudWxsXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGRhdGEuZXh0cmFjdG9yID0gdGhpcztcbiAgICAgICAgICAgICAgZGF0YS5wbGF5bGlzdCA9IHBsYXlsaXN0O1xuICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgIH0pIGFzIFRyYWNrW107XG5cbiAgICAgICAgICAgIHJldHVybiB7IHBsYXlsaXN0LCB0cmFja3M6IHBsYXlsaXN0LnRyYWNrcyB9O1xuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgY29uc3QgYWxidW06IFNwb3RpZnlBbGJ1bSB8IHZvaWQgPSBhd2FpdCB0aGlzLl9saWIuXG4gICAgICAgICAgICBnZXREYXRhKHF1ZXJ5LCBjb250ZXh0LnJlcXVlc3RPcHRpb25zIGFzIHVua25vd24gYXMgUmVxdWVzdEluaXQpLlxuICAgICAgICAgICAgY2F0Y2goVXRpbC5ub29wKTtcbiAgICAgICAgICAgIGlmICghYWxidW0pIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IFtdIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHBsYXlsaXN0ID0gbmV3IFBsYXlsaXN0KHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgdGl0bGU6IGFsYnVtLm5hbWUgPz8gYWxidW0udGl0bGUsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBhbGJ1bS50aXRsZSA/PyAnJyxcbiAgICAgICAgICAgICAgdGh1bWJuYWlsOlxuICAgICAgICAgICAgICBhbGJ1bS5jb3ZlckFydD8uc291cmNlcz8uWzBdPy51cmwgPz9cbiAgICAgICAgICAgICAgJ2h0dHBzOi8vd3d3LnNjZG4uY28vaS9fZ2xvYmFsL3R3aXR0ZXJfY2FyZC1kZWZhdWx0LmpwZycsXG4gICAgICAgICAgICAgIHR5cGU6IGFsYnVtLnR5cGUsXG4gICAgICAgICAgICAgIHNvdXJjZTogJ3Nwb3RpZnknLFxuICAgICAgICAgICAgICBhdXRob3I6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBhbGJ1bS5zdWJ0aXRsZSA/PyAnVW5rbm93biBBcnRpc3QnLFxuICAgICAgICAgICAgICAgIHVybDogbnVsbCBhcyB1bmtub3duIGFzIHN0cmluZ1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0cmFja3M6IFtdLFxuICAgICAgICAgICAgICBpZDogYWxidW0uaWQsXG4gICAgICAgICAgICAgIHVybDogYWxidW0uaWQgP1xuICAgICAgICAgICAgICBgaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL3BsYXlsaXN0LyR7YWxidW0uaWR9YCA6XG4gICAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgICByYXdQbGF5bGlzdDogYWxidW1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwbGF5bGlzdC50cmFja3MgPSBhbGJ1bS50cmFja0xpc3QubWFwKChtKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGRhdGE6IFRyYWNrID0gbmV3IFRyYWNrKHRoaXMuY29udGV4dC5wbGF5ZXIsIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogbS50aXRsZSA/PyAnJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbS50aXRsZSA/PyAnJyxcbiAgICAgICAgICAgICAgICBhdXRob3I6IG0uc3VidGl0bGUgPz8gJ1Vua25vd24gQXJ0aXN0JyxcbiAgICAgICAgICAgICAgICB1cmw6IG0udWlkID8gYGh0dHBzOi8vb3Blbi5zcG90aWZ5LmNvbS90cmFja3MvJHttLnVpZH1gIDogcXVlcnksXG4gICAgICAgICAgICAgICAgdGh1bWJuYWlsOlxuICAgICAgICAgICAgICAgICdodHRwczovL3d3dy5zY2RuLmNvL2kvX2dsb2JhbC90d2l0dGVyX2NhcmQtZGVmYXVsdC5qcGcnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBVdGlsLmJ1aWxkVGltZUNvZGUoVXRpbC5wYXJzZU1TKG0uZHVyYXRpb24pKSxcbiAgICAgICAgICAgICAgICB2aWV3czogMCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRCeTogY29udGV4dC5yZXF1ZXN0ZWRCeSxcbiAgICAgICAgICAgICAgICBwbGF5bGlzdCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdzcG90aWZ5JyxcbiAgICAgICAgICAgICAgICBxdWVyeVR5cGU6ICdzcG90aWZ5U29uZycsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgIHNvdXJjZTogbSxcbiAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWVzdE1ldGFkYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG0sXG4gICAgICAgICAgICAgICAgICAgIGJyaWRnZTogbnVsbFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkYXRhLmV4dHJhY3RvciA9IHRoaXM7XG4gICAgICAgICAgICAgIGRhdGEucGxheWxpc3QgPSBwbGF5bGlzdDtcbiAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9KSBhcyBUcmFja1tdO1xuXG4gICAgICAgICAgICByZXR1cm4geyBwbGF5bGlzdCwgdHJhY2tzOiBwbGF5bGlzdC50cmFja3MgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB7IHBsYXlsaXN0OiBudWxsLCB0cmFja3M6IFtdIH07XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHN0cmVhbShpbmZvOiBUcmFjayk6IFByb21pc2U8RXh0cmFjdG9yU3RyZWFtYWJsZT4ge1xuICAgIGlmICh0aGlzLl9zdHJlYW0pIHtcbiAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IHRoaXMuX3N0cmVhbShpbmZvLnVybCwgaW5mbyk7XG4gICAgICBpZiAodHlwZW9mIHN0cmVhbSA9PT0gJ3N0cmluZycpIHJldHVybiBzdHJlYW07XG4gICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cblxuICAgIC8vIG5ldyBhcGlcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNvbnRleHQucmVxdWVzdEJyaWRnZShpbmZvLCB0aGlzKTtcblxuICAgIGlmICghcmVzdWx0Py5yZXN1bHQpIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGJyaWRnZSB0aGlzIHRyYWNrJyk7XG5cbiAgICByZXR1cm4gcmVzdWx0LnJlc3VsdDtcbiAgfVxuXG4gIHB1YmxpYyBwYXJzZShxOiBzdHJpbmcpIHtcbiAgICBjb25zdCBbLCwsIHF1ZXJ5VHlwZSwgaWRdID0gcmUuZXhlYyhxKSB8fCBbXTtcblxuICAgIHJldHVybiB7IHF1ZXJ5VHlwZSwgaWQgfTtcbiAgfVxufSIsICJcblxuXG5cblxuXG5leHBvcnQgY29uc3QgdmVyc2lvbiA9IC8qIEBfX01BQ1JPX18gZ2V0VmVyc2lvbiAqL1wiNy4xLjBcIjsiXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7QUNDQSw0QkFXQTtBQUNBLGlCQUE0Qjs7O0FDWDVCLGdDQUFvQjtBQUdiLElBQU0sS0FDYjtBQUNPLElBQU0sUUFBUSwwQkFBQUE7QUFpQ2QsU0FBUyx5QkFDaEIsUUFDaUM7QUFDL0IsUUFBTSxXQUFXLE9BQU8sT0FBTyxDQUFDLE1BQU07QUFDcEMsUUFBSSxPQUFPLEVBQUUsV0FBVyxTQUFVLFFBQU8sRUFBRSxPQUFPLFlBQVksTUFBTTtBQUNwRSxXQUFPLEVB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LFlBTW5CLENBQUM7QUFDRCxpQkFBSyxZQUFZO0FBQ2pCLGlCQUFLLFdBQVc7QUFDaEIsbUJBQU87QUFBQSxVQUNULENBQUM7QUFFRCxpQkFBTyxFQUFFLFVBQVUsUUFBUSxTQUFTLE9BQU87QUFBQSxRQUM3QztBQUFBLE1BQ0Y7QUFBQSxNQUNGO0FBQ0UsZUFBTyxFQUFFLFVBQVUsTUFBTSxRQUFRLENBQUMsRUFBRTtBQUFBLElBQ3hDO0FBQUEsRUFDRjtBQUFBLEVBRUEsTUFBYSxPQUFPLE1BQTJDO0FBQzdELFFBQUksS0FBSyxTQUFTO0FBQ2hCLFlBQU0sU0FBUyxNQUFNLEtBQUssUUFBUSxLQUFLLEtBQUssSUFBSTtBQUNoRCxVQUFJLE9BQU8sV0FBVyxTQUFVLFFBQU87QUFDdkMsYUFBTztBQUFBLElBQ1Q7QUFHQSxVQUFNLFNBQVMsTUFBTSxLQUFLLFFBQVEsY0FBYyxNQUFNLElBQUk7QUFFMUQsUUFBSSxDQUFDLFFBQVEsT0FBUSxPQUFNLElBQUksTUFBTSw2QkFBNkI7QUFFbEUsV0FBTyxPQUFPO0FBQUEsRUFDaEI7QUFBQSxFQUVPLE1BQU0sR0FBVztBQUN0QixVQUFNLENBQUMsRUFBQyxFQUFDLEVBQUUsV0FBVyxFQUFFLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0FBRTNDLFdBQU8sRUFBRSxXQUFXLEdBQUc7QUFBQSxFQUN6QjtBQUNGO0FBbFowRTtBQUN4RSxjQURXLG1CQUNHLGNBQWE7QUFEdEIsSUFBTSxtQkFBTjs7O0FDNUJBLElBQU07QUFBQTtBQUFBLEVBQXFDO0FBQUE7OztBZEczQyxJQUFNLG9CQUFvQjtBQUFBLEVBQ2pDO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBZ0I7IiwKICAibmFtZXMiOiBbInVuZmV0Y2giLCAiaW1wb3J0X2Rpc2NvcmRfcGxheWVyIiwgImh0dHBzIiwgImh0dHAiLCAiaW1wb3J0X2Rpc2NvcmRfcGxheWVyIiwgInJldmVyYm5hdGlvbiIsICJpbXBvcnRfZGlzY29yZF9wbGF5ZXIiLCAiaW1wb3J0X2h0dHAiLCAiaW1wb3J0X2h0dHBzIiwgImh0dHAiLCAiaHR0cHMiLCAicGF0aCIsICJpbXBvcnRfZGlzY29yZF9wbGF5ZXIiLCAiaW1wb3J0X2Rpc2NvcmRfcGxheWVyIiwgInIiLCAibSIsICJyZXMiLCAiaW1wb3J0X2Rpc2NvcmRfcGxheWVyIiwgInNwb3RpZnkiXQp9Cg==